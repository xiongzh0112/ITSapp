"use strict";function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*!
 * 
 *          iclient-classic.(https://iclient.supermap.io)
 *          Copyright© 2000 - 2020 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.0.1
 *         
 */!function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports;}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r});},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e){s.d(r,i,function(t){return e[t];}.bind(null,i));}return r;},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"];}:function(){return e;};return s.d(t,"a",t),t;},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},s.p="",s(s.s=12);}([function(e,t){var s;s=function(){return this;}();try{s=s||new Function("return this")();}catch(e){"object"==(typeof window==="undefined"?"undefined":_typeof(window))&&(s=window);}e.exports=s;},function(e,t){e.exports=function(){try{return mapv;}catch(e){return{};}}();},function(e,t,s){var r,i,a;i=[t,e],void 0===(a="function"==typeof(r=function r(e,t){"use strict";var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(e){try{delete window[e];}catch(t){window[e]=void 0;}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t);}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=e,n=t.timeout||s.timeout,o=t.jsonpCallback||s.jsonpCallback,l=void 0;return new Promise(function(s,h){var u=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),c=o+"_"+u;window[u]=function(e){s({ok:!0,json:function json(){return Promise.resolve(e);}}),l&&clearTimeout(l),i(c),r(u);},a+=-1===a.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+a+o+"="+u),t.charset&&d.setAttribute("charset",t.charset),d.id=c,document.getElementsByTagName("head")[0].appendChild(d),l=setTimeout(function(){h(new Error("JSONP request to "+e+" timed out")),r(u),i(c),window[u]=function(){r(u);};},n),d.onerror=function(){h(new Error("JSONP request to "+e+" failed")),r(u),i(c),l&&clearTimeout(l);};});};})?r.apply(t,i):r)||(e.exports=a);},function(e,t){e.exports=function(){try{return XLSX;}catch(e){return{};}}();},function(e,t){e.exports=function(){try{return elasticsearch;}catch(e){return{};}}();},function(e,t,s){(function(t){var s=9007199254740991,r="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",n="[object Map]",o="[object Set]",l=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,u="object"==_typeof(t)&&t&&t.Object===Object&&t,c="object"==(typeof self==="undefined"?"undefined":_typeof(self))&&self&&self.Object===Object&&self,d=u||c||Function("return this")();function p(e,t){return function(e,t){for(var s=-1,r=e?e.length:0,i=Array(r);++s<r;){i[s]=t(e[s],s,e);}return i;}(t,function(t){return[t,e[t]];});}var m,f,y,g=Function.prototype,v=Object.prototype,S=d["__core-js_shared__"],b=(m=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",x=g.toString,C=v.hasOwnProperty,_=v.toString,T=RegExp("^"+x.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=v.propertyIsEnumerable,A=(f=Object.keys,y=Object,function(e){return f(y(e));}),w=U(d,"DataView"),N=U(d,"Map"),P=U(d,"Promise"),O=U(d,"Set"),L=U(d,"WeakMap"),M=J(w),I=J(N),R=J(P),D=J(O),F=J(L);function k(e,t){var s=V(e)||function(e){return function(e){return function(e){return!!e&&"object"==_typeof(e);}(e)&&q(e);}(e)&&C.call(e,"callee")&&(!E.call(e,"callee")||_.call(e)==r);}(e)?function(e,t){for(var s=-1,r=Array(e);++s<e;){r[s]=t(s);}return r;}(e.length,String):[],i=s.length,a=!!i;for(var n in e){!t&&!C.call(e,n)||a&&("length"==n||j(n,i))||s.push(n);}return s;}function B(e){return!(!z(e)||b&&b in e)&&(W(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"");}catch(e){}return t;}(e)?T:l).test(J(e));}function G(e){if(s=(t=e)&&t.constructor,r="function"==typeof s&&s.prototype||v,t!==r)return A(e);var t,s,r,i=[];for(var a in Object(e)){C.call(e,a)&&"constructor"!=a&&i.push(a);}return i;}function U(e,t){var s=function(e,t){return null==e?void 0:e[t];}(e,t);return B(s)?s:void 0;}var H=function H(e){return _.call(e);};function j(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||h.test(e))&&e>-1&&e%1==0&&e<t;}function J(e){if(null!=e){try{return x.call(e);}catch(e){}try{return e+"";}catch(e){}}return"";}(w&&"[object DataView]"!=H(new w(new ArrayBuffer(1)))||N&&H(new N())!=n||P&&"[object Promise]"!=H(P.resolve())||O&&H(new O())!=o||L&&"[object WeakMap]"!=H(new L()))&&(H=function H(e){var t=_.call(e),s="[object Object]"==t?e.constructor:void 0,r=s?J(s):void 0;if(r)switch(r){case M:return"[object DataView]";case I:return n;case R:return"[object Promise]";case D:return o;case F:return"[object WeakMap]";}return t;});var V=Array.isArray;function q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s;}(e.length)&&!W(e);}function W(e){var t=z(e)?_.call(e):"";return t==i||t==a;}function z(e){var t=_typeof(e);return!!e&&("object"==t||"function"==t);}var Y,X=(Y=function Y(e){return q(e)?k(e):G(e);},function(e){var t,s,r,i=H(e);return i==n?(t=e,s=-1,r=Array(t.size),t.forEach(function(e,t){r[++s]=[t,e];}),r):i==o?function(e){var t=-1,s=Array(e.size);return e.forEach(function(e){s[++t]=[e,e];}),s;}(e):p(e,Y(e));});e.exports=X;}).call(this,s(0));},function(e,t){e.exports=function(){try{return echarts;}catch(e){return{};}}();},function(e,t,s){(function(e,t){(function(){"use strict";function s(e){var t=this.constructor;return this.then(function(s){return t.resolve(e()).then(function(){return s;});},function(s){return t.resolve(e()).then(function(){return t.reject(s);});});}var r=setTimeout;function i(e){return Boolean(e&&void 0!==e.length);}function a(){}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this);}function o(e,t){for(;3===e._state;){e=e._value;}0!==e._state?(e._handled=!0,n._immediateFn(function(){var s=1===e._state?t.onFulfilled:t.onRejected;if(null!==s){var r;try{r=s(e._value);}catch(e){return void h(t.promise,e);}l(t.promise,r);}else(1===e._state?l:h)(t.promise,e._value);})):e._deferreds.push(t);}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==_typeof(t)||"function"==typeof t)){var s=t.then;if(t instanceof n)return e._state=3,e._value=t,void u(e);if("function"==typeof s)return void c((r=s,i=t,function(){r.apply(i,arguments);}),e);}e._state=1,e._value=t,u(e);}catch(t){h(e,t);}var r,i;}function h(e,t){e._state=2,e._value=t,u(e);}function u(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value);});for(var t=0,s=e._deferreds.length;t<s;t++){o(e,e._deferreds[t]);}e._deferreds=null;}function c(e,t){var s=!1;try{e(function(e){s||(s=!0,l(t,e));},function(e){s||(s=!0,h(t,e));});}catch(e){if(s)return;s=!0,h(t,e);}}n.prototype["catch"]=function(e){return this.then(null,e);},n.prototype.then=function(e,t){var s=new this.constructor(a);return o(this,new function(e,t,s){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=s;}(e,t,s)),s;},n.prototype["finally"]=s,n.all=function(e){return new n(function(t,s){if(!i(e))return s(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var a=r.length;function n(e,i){try{if(i&&("object"==_typeof(i)||"function"==typeof i)){var o=i.then;if("function"==typeof o)return void o.call(i,function(t){n(e,t);},s);}r[e]=i,0==--a&&t(r);}catch(e){s(e);}}for(var o=0;o<r.length;o++){n(o,r[o]);}});},n.resolve=function(e){return e&&"object"==_typeof(e)&&e.constructor===n?e:new n(function(t){t(e);});},n.reject=function(e){return new n(function(t,s){s(e);});},n.race=function(e){return new n(function(t,s){if(!i(e))return s(new TypeError("Promise.race accepts an array"));for(var r=0,a=e.length;r<a;r++){n.resolve(e[r]).then(t,s);}});},n._immediateFn="function"==typeof e&&function(t){e(t);}||function(e){r(e,0);},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e);};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object");}();"Promise"in d?d.Promise.prototype["finally"]||(d.Promise.prototype["finally"]=s):d.Promise=n;})();}).call(this,s(8).setImmediate,s(0));},function(e,t,s){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t;}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout);},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval);},t.clearTimeout=t.clearInterval=function(e){e&&e.close();},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id);},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t;},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1;},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout();},t));},s(9),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate;}).call(this,s(0));},function(e,t,s){(function(e,t){!function(e,s){"use strict";if(!e.setImmediate){var r,i,a,n,o,l=1,h={},u=!1,c=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function r(e){t.nextTick(function(){m(e);});}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,s=e.onmessage;return e.onmessage=function(){t=!1;},e.postMessage("","*"),e.onmessage=s,t;}}()?e.MessageChannel?((a=new MessageChannel()).port1.onmessage=function(e){m(e.data);},r=function r(e){a.port2.postMessage(e);}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,r=function r(e){var t=c.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,i.removeChild(t),t=null;},i.appendChild(t);}):r=function r(e){setTimeout(m,0,e);}:(n="setImmediate$"+Math.random()+"$",o=function o(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(n)&&m(+t.data.slice(n.length));},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function r(t){e.postMessage(n+t,"*");}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),s=0;s<t.length;s++){t[s]=arguments[s+1];}var i={callback:e,args:t};return h[l]=i,r(l),l++;},d.clearImmediate=p;}function p(e){delete h[e];}function m(e){if(u)setTimeout(m,0,e);else{var t=h[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(s,r);}}(t);}finally{p(e),u=!1;}}}}}("undefined"==typeof self?void 0===e?this:e:self);}).call(this,s(0),s(10));},function(e,t){var s,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined");}function n(){throw new Error("clearTimeout has not been defined");}function o(e){if(s===setTimeout)return setTimeout(e,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0);}catch(t){try{return s.call(null,e,0);}catch(t){return s.call(this,e,0);}}}!function(){try{s="function"==typeof setTimeout?setTimeout:a;}catch(e){s=a;}try{r="function"==typeof clearTimeout?clearTimeout:n;}catch(e){r=n;}}();var l,h=[],u=!1,c=-1;function d(){u&&l&&(u=!1,l.length?h=l.concat(h):c=-1,h.length&&p());}function p(){if(!u){var e=o(d);u=!0;for(var t=h.length;t;){for(l=h,h=[];++c<t;){l&&l[c].run();}c=-1,t=h.length;}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e);}catch(t){try{return r.call(null,e);}catch(t){return r.call(this,e);}}}(e);}}function m(e,t){this.fun=e,this.array=t;}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++){t[s-1]=arguments[s];}h.push(new m(e,t)),1!==h.length||u||o(p);},m.prototype.run=function(){this.fun.apply(null,this.array);},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[];},i.binding=function(e){throw new Error("process.binding is not supported");},i.cwd=function(){return"/";},i.chdir=function(e){throw new Error("process.chdir is not supported");},i.umask=function(){return 0;};},function(e,t,s){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){o.prototype.append=function(e,t){e=a(e),t=n(t);var s=this.map[e];s||(s=[],this.map[e]=s),s.push(t);},o.prototype["delete"]=function(e){delete this.map[a(e)];},o.prototype.get=function(e){var t=this.map[a(e)];return t?t[0]:null;},o.prototype.getAll=function(e){return this.map[a(e)]||[];},o.prototype.has=function(e){return this.map.hasOwnProperty(a(e));},o.prototype.set=function(e,t){this.map[a(e)]=[n(t)];},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(s){this.map[s].forEach(function(r){e.call(t,r,s,this);},this);},this);};var s={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob(),!0;}catch(e){return!1;}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this);},c.call(d.prototype),c.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url});},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e;};var i=[301,302,303,307,308];m.redirect=function(e,t){if(-1===i.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}});},t.Headers=o,t.Request=d,t.Response=m,t.fetch=function(e,t){return new Promise(function(r,i){var a;a=d.prototype.isPrototypeOf(e)&&!t?e:new d(e,t);var n=new XMLHttpRequest();var l=!1;function h(){if(4===n.readyState){var e=1223===n.status?204:n.status;if(e<100||e>599){if(l)return;return l=!0,void i(new TypeError("Network request failed"));}var t={status:e,statusText:n.statusText,headers:function(e){var t=new o();return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var s=e.trim().split(":"),r=s.shift().trim(),i=s.join(":").trim();t.append(r,i);}),t;}(n),url:"responseURL"in n?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):void 0},s="response"in n?n.response:n.responseText;l||(l=!0,r(new m(s,t)));}}n.onreadystatechange=h,n.onload=h,n.onerror=function(){l||(l=!0,i(new TypeError("Network request failed")));},n.open(a.method,a.url,!0);try{"include"===a.credentials&&("withCredentials"in n?n.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"));}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e);}"responseType"in n&&s.blob&&(n.responseType="blob"),a.headers.forEach(function(e,t){n.setRequestHeader(t,e);}),n.send(void 0===a._bodyInit?null:a._bodyInit);});},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch);}function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase();}function n(e){return"string"!=typeof e&&(e=String(e)),e;}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e);},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t]);},this);}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0;}function h(e){return new Promise(function(t,s){e.onload=function(){t(e.result);},e.onerror=function(){s(e.error);};});}function u(e){var t=new FileReader();return t.readAsArrayBuffer(e),h(t);}function c(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(s.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(s.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!s.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type");}else this._bodyText="";},s.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]));},this.arrayBuffer=function(){return this.blob().then(u);},this.text=function(){var e,t,s,r,i,a,n,o=l(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,s=new FileReader(),r=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,a=e.type.match(i)||r.match(i),n=[e],a&&n.push(a[0].replace(/^charset\=/,"").replace(/;$/,"")),s.readAsText.apply(s,n),h(s);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText);}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText);},s.formData&&(this.formData=function(){return this.text().then(p);}),this.json=function(){return this.text().then(JSON.parse);},this;}function d(e,t){var s,i,a=(t=t||{}).body;if(d.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,a||(a=e._bodyInit,e.bodyUsed=!0);}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=(s=t.method||this.method||"GET",i=s.toUpperCase(),r.indexOf(i)>-1?i:s),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a,t);}function p(e){var t=new FormData();return e.trim().split("&").forEach(function(e){if(e){var s=e.split("="),r=s.shift().replace(/\+/g," "),i=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i));}}),t;}function m(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"";}}("undefined"!=typeof self?self:this);},function(e,t,s){"use strict";s.r(t);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var r=window.SuperMap=window.SuperMap||{};r.Components=window.SuperMap.Components||{};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var i=/*#__PURE__*/function(){function i(e,t,s){_classCallCheck(this,i);this.x=e?parseFloat(e):0,this.y=t?parseFloat(t):0,this.mode=s,this.CLASS_NAME="SuperMap.Pixel",r.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};}_createClass(i,[{key:"toString",value:function toString(){return"x="+this.x+",y="+this.y;}},{key:"clone",value:function clone(){return new i(this.x,this.y,this.mode);}},{key:"equals",value:function equals(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t;}},{key:"distanceTo",value:function distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2));}},{key:"add",value:function add(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new i(this.x+e,this.y+t);}},{key:"offset",value:function offset(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t;}},{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.mode=null;}}]);return i;}();r.Pixel=i,/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.inherit=function(e,t){var s,i,a,n=function n(){};for(n.prototype=t.prototype,e.prototype=new n(),s=2,i=arguments.length;s<i;s++){"function"==typeof(a=arguments[s])&&(a=a.prototype),r.Util.extend(e.prototype,a);}},r.mixin=function(){for(var _len=arguments.length,e=new Array(_len),_key=0;_key<_len;_key++){e[_key]=arguments[_key];}var t=function t(_t2){_classCallCheck(this,t);for(var s=0;s<e.length;s++){i(this,new e[s](_t2));}};for(var s=0;s<e.length;s++){var r=e[s];i(t,r),i(t.prototype,r.prototype),i(t.prototype,new r());}return t;function i(e,t){var s=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<s.length;r++){var i=s[r];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var _s2=Object.getOwnPropertyDescriptor(t,i);window.ActiveXObject?Object.defineProperty(e,i,_s2||{}):Object.defineProperty(e,i,_s2);}}}};var a=r.String={startsWith:function startsWith(e,t){return 0==e.indexOf(t);},contains:function contains(e,t){return-1!=e.indexOf(t);},trim:function trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");},camelize:function camelize(e){for(var t=e.split("-"),s=t[0],r=1,i=t.length;r<i;r++){var a=t[r];s+=a.charAt(0).toUpperCase()+a.substring(1);}return s;},format:function format(e,t,s){t||(t=window);return e.replace(r.String.tokenRegEx,function(e,r){for(var i,a=r.split(/\.+/),n=0;n<a.length;n++){0==n&&(i=t),i=i[a[n]];}return"function"==typeof i&&(i=s?i.apply(null,s):i()),void 0===i?"undefined":i;});},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function isNumeric(e){return r.String.numberRegEx.test(e);},numericIf:function numericIf(e){return r.String.isNumeric(e)?parseFloat(e):e;}},n=r.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function limitSigDigs(e,t){var s=0;return t>0&&(s=parseFloat(e.toPrecision(t))),s;},format:function format(e,t,s,i){t=void 0!==t?t:0,s=void 0!==s?s:r.Number.thousandsSeparator,i=void 0!==i?i:r.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var a=e.toString().split(".");1===a.length&&null==t&&(t=0);var n,o=a[0];if(s)for(var l=/(-?[0-9]+)([0-9]{3})/;l.test(o);){o=o.replace(l,"$1"+s+"$2");}if(0==t)n=o;else{var h=a.length>1?a[1]:"0";null!=t&&(h+=new Array(t-h.length+1).join("0")),n=o+i+h;}return n;}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return n.limitSigDigs(this,e);});var o,l,h,u=r.Function={bind:function bind(e,t){var s=Array.prototype.slice.apply(arguments,[2]);return function(){var r=s.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r);};},bindAsEventListener:function bindAsEventListener(e,t){return function(s){return e.call(t,s||window.event);};},False:function False(){return!1;},True:function True(){return!0;},Void:function Void(){}},c=(r.Array={filter:function filter(e,t,s){var r=[];if(Array.prototype.filter)r=e.filter(t,s);else{var i=e.length;if("function"!=typeof t)throw new TypeError();for(var a=0;a<i;a++){if(a in e){var n=e[a];t.call(s,n,a,e)&&r.push(n);}}}return r;}},r.Util=r.Util||{});r.Util.extend=function(e,t){if(e=e||{},t){for(var s in t){var r=t[s];void 0!==r&&(e[s]=r);}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString);}return e;},r.Util.copy=function(e,t){var s;if(e=e||{},t)for(var r in e){void 0!==(s=t[r])&&(e[r]=s);}},r.Util.reset=function(e){for(var t in e=e||{}){if(e.hasOwnProperty(t)){if("object"==_typeof(e[t])&&e[t]instanceof Array){for(var s in e[t]){e[t][s].destroy&&e[t][s].destroy();}e[t].length=0;}else"object"==_typeof(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null;}}},r.Util.getElement=function(){for(var e=[],t=0,s=arguments.length;t<s;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r);}return e;},r.Util.isElement=function(e){return!(!e||1!==e.nodeType);},r.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e);},r.Util.removeItem=function(e,t){for(var s=e.length-1;s>=0;s--){e[s]===t&&e.splice(s,1);}return e;},r.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var s=0,r=e.length;s<r;s++){if(e[s]===t)return s;}return-1;},r.Util.modifyDOMElement=function(e,t,s,r,i,a,n,o){t&&(e.id=t),s&&(e.style.left=s.x+"px",e.style.top=s.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),i&&(e.style.position=i),a&&(e.style.border=a),n&&(e.style.overflow=n),parseFloat(o)>=0&&parseFloat(o)<1?(e.style.filter="alpha(opacity="+100*o+")",e.style.opacity=o):1===parseFloat(o)&&(e.style.filter="",e.style.opacity="");},r.Util.applyDefaults=function(e,t){e=e||{};var s="function"==typeof window.Event&&t instanceof window.Event;for(var r in t){(void 0===e[r]||!s&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))&&(e[r]=t[r]);}return!s&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e;},r.Util.getParameterString=function(e){var t=[];for(var s in e){var r=e[s];if(null!=r&&"function"!=typeof r){var i;if("object"==_typeof(r)&&r.constructor===Array){for(var a,n=[],o=0,l=r.length;o<l;o++){a=r[o],n.push(encodeURIComponent(null===a||void 0===a?"":a));}i=n.join(",");}else i=encodeURIComponent(r);t.push(encodeURIComponent(s)+"="+i);}}return t.join("&");},r.Util.urlAppend=function(e,t){var s=e;if(t){var r=(e+" ").split(/[?&]/);s+=" "===r.pop()?t:r.length?"&"+t:"?"+t;}return s;},r.Util.DEFAULT_PRECISION=14,r.Util.toFloat=function(e,t){return null==t&&(t=r.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t));},r.Util.rad=function(e){return e*Math.PI/180;},r.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(r.String.contains(e,"?")){var s=e.indexOf("?")+1,i=r.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(s,i);}for(var a={},n=t.split(/[&;]/),o=0,l=n.length;o<l;++o){var h=n[o].split("=");if(h[0]){var u=h[0];try{u=decodeURIComponent(u);}catch(e){u=unescape(u);}var c=(h[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c);}catch(e){c=unescape(c);}1==(c=c.split(",")).length&&(c=c[0]),a[u]=c;}}return a;},r.Util.lastSeqID=0,r.Util.createUniqueID=function(e){return null==e&&(e="id_"),r.Util.lastSeqID+=1,e+r.Util.lastSeqID;},r.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},r.INCHES_PER_UNIT["in"]=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.degrees=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.nmi=1852*r.INCHES_PER_UNIT.m,r.METERS_PER_INCH=.0254000508001016,r.Util.extend(r.INCHES_PER_UNIT,{Inch:r.INCHES_PER_UNIT.inches,Meter:1/r.METERS_PER_INCH,Foot:.3048006096012192/r.METERS_PER_INCH,IFoot:.3048/r.METERS_PER_INCH,ClarkeFoot:.3047972651151/r.METERS_PER_INCH,SearsFoot:.30479947153867626/r.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/r.METERS_PER_INCH,IInch:.0254/r.METERS_PER_INCH,MicroInch:254e-7/r.METERS_PER_INCH,Mil:2.54e-8/r.METERS_PER_INCH,Centimeter:.01/r.METERS_PER_INCH,Kilometer:1e3/r.METERS_PER_INCH,Yard:.9144018288036576/r.METERS_PER_INCH,SearsYard:.914398414616029/r.METERS_PER_INCH,IndianYard:.9143985307444408/r.METERS_PER_INCH,IndianYd37:.91439523/r.METERS_PER_INCH,IndianYd62:.9143988/r.METERS_PER_INCH,IndianYd75:.9143985/r.METERS_PER_INCH,IndianFoot:.30479951/r.METERS_PER_INCH,IndianFt37:.30479841/r.METERS_PER_INCH,IndianFt62:.3047996/r.METERS_PER_INCH,IndianFt75:.3047995/r.METERS_PER_INCH,Mile:1609.3472186944373/r.METERS_PER_INCH,IYard:.9144/r.METERS_PER_INCH,IMile:1609.344/r.METERS_PER_INCH,NautM:1852/r.METERS_PER_INCH,"Lat-66":110943.31648893273/r.METERS_PER_INCH,"Lat-83":110946.25736872235/r.METERS_PER_INCH,Decimeter:.1/r.METERS_PER_INCH,Millimeter:.001/r.METERS_PER_INCH,Dekameter:10/r.METERS_PER_INCH,Decameter:10/r.METERS_PER_INCH,Hectometer:100/r.METERS_PER_INCH,GermanMeter:1.0000135965/r.METERS_PER_INCH,CaGrid:.999738/r.METERS_PER_INCH,ClarkeChain:20.1166194976/r.METERS_PER_INCH,GunterChain:20.11684023368047/r.METERS_PER_INCH,BenoitChain:20.116782494375872/r.METERS_PER_INCH,SearsChain:20.11676512155/r.METERS_PER_INCH,ClarkeLink:.201166194976/r.METERS_PER_INCH,GunterLink:.2011684023368047/r.METERS_PER_INCH,BenoitLink:.20116782494375873/r.METERS_PER_INCH,SearsLink:.2011676512155/r.METERS_PER_INCH,Rod:5.02921005842012/r.METERS_PER_INCH,IntnlChain:20.1168/r.METERS_PER_INCH,IntnlLink:.201168/r.METERS_PER_INCH,Perch:5.02921005842012/r.METERS_PER_INCH,Pole:5.02921005842012/r.METERS_PER_INCH,Furlong:201.1684023368046/r.METERS_PER_INCH,Rood:3.778266898/r.METERS_PER_INCH,CapeFoot:.3047972615/r.METERS_PER_INCH,Brealey:375/r.METERS_PER_INCH,ModAmFt:.304812252984506/r.METERS_PER_INCH,Fathom:1.8288/r.METERS_PER_INCH,"NautM-UK":1853.184/r.METERS_PER_INCH,"50kilometers":5e4/r.METERS_PER_INCH,"150kilometers":15e4/r.METERS_PER_INCH}),r.Util.extend(r.INCHES_PER_UNIT,{mm:r.INCHES_PER_UNIT.Meter/1e3,cm:r.INCHES_PER_UNIT.Meter/100,dm:100*r.INCHES_PER_UNIT.Meter,km:1e3*r.INCHES_PER_UNIT.Meter,kmi:r.INCHES_PER_UNIT.nmi,fath:r.INCHES_PER_UNIT.Fathom,ch:r.INCHES_PER_UNIT.IntnlChain,link:r.INCHES_PER_UNIT.IntnlLink,"us-in":r.INCHES_PER_UNIT.inches,"us-ft":r.INCHES_PER_UNIT.Foot,"us-yd":r.INCHES_PER_UNIT.Yard,"us-ch":r.INCHES_PER_UNIT.GunterChain,"us-mi":r.INCHES_PER_UNIT.Mile,"ind-yd":r.INCHES_PER_UNIT.IndianYd37,"ind-ft":r.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/r.METERS_PER_INCH}),r.DOTS_PER_INCH=96,r.Util.normalizeScale=function(e){return e>1?1/e:e;},r.Util.getResolutionFromScale=function(e,t){var s;e&&(null==t&&(t="degrees"),s=1/(r.Util.normalizeScale(e)*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH));return s;},r.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH;},r.IS_GECKO=-1===(o=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==o.indexOf("gecko"),r.Browser=function(){var e,t="",s="",r="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(t="msie",e=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(t="chrome",e=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(t="firefox",e=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(t="opera",e=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(t="safari",e=i.match(/version\/([\d.]+)/)),s=e?e[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?r="apple":i.indexOf("android")>-1&&(s=(e=i.match(/version\/([\d.]+)/))?e[1]:"",r="android"),{name:t,version:s,device:r};}(),r.Util.getBrowser=function(){return r.Browser;},r.Util.isSupportCanvas=(l=!0,h=r.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===h.name&&parseFloat(h.version)<5&&(l=!1),"safari"===h.name&&parseFloat(h.version)<4&&(l=!1),"opera"===h.name&&parseFloat(h.version)<10&&(l=!1),"msie"===h.name&&parseFloat(h.version)<9&&(l=!1)):l=!1,l),r.Util.supportCanvas=function(){return r.Util.isSupportCanvas;},r.INCHES_PER_UNIT.degree=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.meter=r.INCHES_PER_UNIT.m,r.INCHES_PER_UNIT.foot=r.INCHES_PER_UNIT.ft,r.INCHES_PER_UNIT.inch=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.mile=r.INCHES_PER_UNIT.mi,r.INCHES_PER_UNIT.kilometer=r.INCHES_PER_UNIT.km,r.INCHES_PER_UNIT.yard=r.INCHES_PER_UNIT.yd,r.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),s=document.location.toString(),r=s.indexOf("//");if(-1===t)return!0;var i,a=i=e.substring(0,t),n=s.substring(r+2);r=n.indexOf("/");var o=n.indexOf(":"),l=n.substring(0,r),h=document.location.protocol;if(-1!==o||(l+=":"+("http:"===h.toLowerCase()?80:443)),h.toLowerCase()!==a.toLowerCase())return!1;var u=(a=e.substring(t+2)).indexOf(":");t=a.indexOf("/");var c,d=a.substring(0,t);return-1!==u?c=a.substring(0,u):(c=a.substring(0,t),d+=":"+("http:"===i.toLowerCase()?80:443)),c===document.domain&&d===l;},r.Util.calculateDpi=function(e,t,s,r,i){if(e&&t&&s){var a,n=e.getWidth(),o=e.getHeight(),l=t.w,h=t.h;if(i=i||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var _e2=n/l,_t3=o/h;a=254/(_e2>_t3?_e2:_t3)/s/(2*Math.PI*i/360)/1e4;}else{a=254/(n/l)/s/1e4;}return a;}},r.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var s=[],i=0,a=t.length;i<a;i++){s.push(r.Util.toJSON(t[i]));}return"["+s.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"==_typeof(t)){if(t.length){var _e4=[];for(var _s3=0,_i2=t.length;_s3<_i2;_s3++){_e4.push(r.Util.toJSON(t[_s3]));}return"["+_e4.join(",")+"]";}var _e3=[];for(var _s4 in t){"function"!=typeof t[_s4]&&"CLASS_NAME"!==_s4&&"parent"!==_s4&&_e3.push("'"+_s4+"':"+r.Util.toJSON(t[_s4]));}return _e3.length>0?"{"+_e3.join(",")+"}":"{}";}return t.toString();}},r.Util.getResolutionFromScaleDpi=function(e,t,s,i){return i=i||6378137,s=s||"",e>0&&t>0?(e=r.Util.normalizeScale(e),"degree"===s.toLowerCase()||"degrees"===s.toLowerCase()||"dd"===s.toLowerCase()?254/t/e/(2*Math.PI*i/360)/1e4:254/t/e/1e4):-1;},r.Util.getScaleFromResolutionDpi=function(e,t,s,r){return r=r||6378137,s=s||"",e>0&&t>0?"degree"===s.toLowerCase()||"degrees"===s.toLowerCase()||"dd"===s.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1;},r.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e;},r.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var s in t){var r=t[s];void 0!==r&&"CLASS_NAME"!==s&&"function"!=typeof r&&(e[s]=r);}return e;},r.Util.copyAttributesWithClip=function(e,t,s){if(e=e||{},t)for(var r in t){var i=!1;if(s&&s.length)for(var a=0,n=s.length;a<n;a++){if(r===s[a]){i=!0;break;}}if(!0!==i){var o=t[r];void 0!==o&&"CLASS_NAME"!==r&&"function"!=typeof o&&(e[r]=o);}}return e;},r.Util.cloneObject=function(e){if(null===e||"object"!=_typeof(e))return e;if(e instanceof Date){var _t4=new Date();return _t4.setTime(e.getTime()),_t4;}if(e instanceof Array){return e.slice(0);}if(e instanceof Object){var _s5={};for(var t in e){e.hasOwnProperty(t)&&(_s5[t]=r.Util.cloneObject(e[t]));}return _s5;}throw new Error("Unable to copy obj! Its type isn't supported.");},r.Util.lineIntersection=function(e,t,s,i){var a,n,o=null,l=(i.x-s.x)*(e.y-s.y)-(i.y-s.y)*(e.x-s.x),h=(t.x-e.x)*(e.y-s.y)-(t.y-e.y)*(e.x-s.x),u=(i.y-s.y)*(t.x-e.x)-(i.x-s.x)*(t.y-e.y);if(0!=u)n=h/u,o=(a=l/u)>=0&&n<=1&&a<=1&&n>=0?new r.Geometry.Point(e.x+a*(t.x-e.x),e.y+a*(t.y-e.y)):"No Intersection";else if(0==l&&0==h){var c=Math.max(e.y,t.y),d=Math.min(e.y,t.y),p=Math.max(e.x,t.x),m=Math.min(e.x,t.x);o=(s.y>=d&&s.y<=c||i.y>=d&&i.y<=c)&&s.x>=m&&s.x<=p||i.x>=m&&i.x<=p?"Coincident":"Parallel";}else o="Parallel";return o;},r.Util.getTextBounds=function(e,t,s){document.body.appendChild(s),s.style.width="auto",s.style.height="auto",e.fontSize&&(s.style.fontSize=e.fontSize),e.fontFamily&&(s.style.fontFamily=e.fontFamily),e.fontWeight&&(s.style.fontWeight=e.fontWeight),s.style.position="relative",s.style.visibility="hidden",s.style.display="inline-block",s.innerHTML=t;var r=s.clientWidth,i=s.clientHeight;return document.body.removeChild(s),{textWidth:r,textHeight:i};};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var d=r.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function element(e){return e.target||e.srcElement;},isSingleTouch:function isSingleTouch(e){return e.touches&&1===e.touches.length;},isMultiTouch:function isMultiTouch(e){return e.touches&&e.touches.length>1;},isLeftClick:function isLeftClick(e){return e.which&&1===e.which||e.button&&1===e.button;},isRightClick:function isRightClick(e){return e.which&&3===e.which||e.button&&2===e.button;},stop:function stop(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;},findElement:function findElement(e,t){for(var s=r.Event.element(e);s.parentNode&&(!s.tagName||s.tagName.toUpperCase()!=t.toUpperCase());){s=s.parentNode;}return s;},observe:function observe(e,t,s,r){var i=c.getElement(e);if(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var a="eventCacheID_";i.id&&(a=i.id+"_"+a),i._eventCacheID=c.createUniqueID(a);}var n=i._eventCacheID;this.observers[n]||(this.observers[n]=[]),this.observers[n].push({element:i,name:t,observer:s,useCapture:r}),i.addEventListener?"mousewheel"===t?i.addEventListener(t,s,{useCapture:r,passive:!1}):i.addEventListener(t,s,r):i.attachEvent&&i.attachEvent("on"+t,s);},stopObservingElement:function stopObservingElement(e){var t=c.getElement(e)._eventCacheID;this._removeElementObservers(r.Event.observers[t]);},_removeElementObservers:function _removeElementObservers(e){if(e)for(var t=e.length-1;t>=0;t--){var s=e[t],i=new Array(s.element,s.name,s.observer,s.useCapture);r.Event.stopObserving.apply(this,i);}},stopObserving:function stopObserving(e,t,s,i){i=i||!1;var a=c.getElement(e),n=a._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)&&(t="keydown");var o=!1,l=r.Event.observers[n];if(l)for(var h=0;!o&&h<l.length;){var u=l[h];if(u.name===t&&u.observer===s&&u.useCapture===i){l.splice(h,1),0==l.length&&delete r.Event.observers[n],o=!0;break;}h++;}return o&&(a.removeEventListener?a.removeEventListener(t,s,i):a&&a.detachEvent&&a.detachEvent("on"+t,s)),o;},unloadCache:function unloadCache(){if(r.Event&&r.Event.observers){for(var e in r.Event.observers){var t=r.Event.observers[e];r.Event._removeElementObservers.apply(this,[t]);}r.Event.observers=!1;}},CLASS_NAME:"SuperMap.Event"};r.Event=d,r.Event.observe(window,"unload",r.Event.unloadCache,!1);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var p=/*#__PURE__*/function(){function p(e,t,s,r,i){_classCallCheck(this,p);if(this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=r,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,c.extend(this,i),null!=s)for(var a=0,n=s.length;a<n;a++){this.addEventType(s[a]);}null!=t&&this.attachToElement(t),this.CLASS_NAME="SuperMap.Events";}_createClass(p,[{key:"destroy",value:function destroy(){for(var e in this.extensions){"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();}this.extensions=null,this.element&&(d.stopObservingElement(this.element),this.element.hasScrollEvent&&d.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null;}},{key:"addEventType",value:function addEventType(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[]);}},{key:"attachToElement",value:function attachToElement(e){this.element?d.stopObservingElement(this.element):(this.eventHandler=u.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=u.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,s=this.BROWSER_EVENTS.length;t<s;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),d.observe(e,r,this.eventHandler);}d.observe(e,"dragstart",d.stop);}},{key:"on",value:function on(e){for(var t in e){"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t]);}}},{key:"register",value:function register(e,t,s,r){if(e in p&&!this.extensions[e]&&(this.extensions[e]=new p[e](this)),null!=s&&-1!==c.indexOf(this.eventTypes,e)){null==t&&(t=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:t,func:s};r?(i.splice(this.extensionCount[e],0,a),"object"==_typeof(r)&&r.extension&&this.extensionCount[e]++):i.push(a);}}},{key:"registerPriority",value:function registerPriority(e,t,s){this.register(e,t,s,!0);}},{key:"un",value:function un(e){for(var t in e){"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t]);}}},{key:"unregister",value:function unregister(e,t,s){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var i=0,a=r.length;i<a;i++){if(r[i].obj===t&&r[i].func===s){r.splice(i,1);break;}}}},{key:"remove",value:function remove(e){null!=this.listeners[e]&&(this.listeners[e]=[]);}},{key:"triggerEvent",value:function triggerEvent(e,t){var s=this.listeners[e];if(s&&0!=s.length){var r;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var i=0,a=(s=s.slice()).length;i<a;i++){var n=s[i];if(void 0!=(r=n.func.apply(n.obj,[t]))&&!1===r)break;}return this.fallThrough||d.stop(t,!0),r;}}},{key:"handleBrowserEvent",value:function handleBrowserEvent(e){var t=e.type,s=this.listeners[t];if(s&&0!=s.length){var r=e.touches;if(r&&r[0]){for(var i,a=0,n=0,o=r.length,l=0;l<o;++l){a+=(i=r[l]).clientX,n+=i.clientY;}e.clientX=a/o,e.clientY=n/o;}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e);}}},{key:"clearMouseCache",value:function clearMouseCache(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null);}},{key:"getMousePosition",value:function getMousePosition(e){if(this.includeXY?this.element.hasScrollEvent||(d.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=c.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop];}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=c.pagePosition(this.element)),new i(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1]);}}]);return p;}();r.Events=p,r.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var m=s(4),f=s.n(m);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var y=/*#__PURE__*/function(){function y(e,t){_classCallCheck(this,y);t=t||{},this.url=e,this.client=new f.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new p(this,null,this.EVENT_TYPES),this.eventListeners=null,c.extend(this,t),this.eventListeners instanceof Object&&this.events.on(this.eventListeners);}_createClass(y,[{key:"setGeoFence",value:function setGeoFence(e){this.geoFence=e;}},{key:"bulk",value:function bulk(e,t){return this.client.bulk(e,t);}},{key:"clearScroll",value:function clearScroll(e,t){return this.client.clearScroll(e,t);}},{key:"count",value:function count(e,t){return this.client.count(e,t);}},{key:"create",value:function create(e,t){return this.client.create(e,t);}},{key:"delete",value:function _delete(e,t){return this.client["delete"](e,t);}},{key:"deleteByQuery",value:function deleteByQuery(e,t){return this.client.deleteByQuery(e,t);}},{key:"deleteScript",value:function deleteScript(e,t){return this.client.deleteScript(e,t);}},{key:"deleteTemplate",value:function deleteTemplate(e,t){return this.client.deleteTemplate(e,t);}},{key:"exists",value:function exists(e,t){return this.client.exists(e,t);}},{key:"existsSource",value:function existsSource(e,t){return this.client.existsSource(e,t);}},{key:"explain",value:function explain(e,t){return this.client.explain(e,t);}},{key:"fieldCaps",value:function fieldCaps(e,t){return this.client.fieldCaps(e,t);}},{key:"get",value:function get(e,t){return this.client.get(e,t);}},{key:"getScript",value:function getScript(e,t){return this.client.getScript(e,t);}},{key:"getSource",value:function getSource(e,t){return this.client.getSource(e,t);}},{key:"getTemplate",value:function getTemplate(e,t){return this.client.getTemplate(e,t);}},{key:"index",value:function index(e,t){return this.client.index(e,t);}},{key:"info",value:function info(e,t){return this.client.info(e,t);}},{key:"mget",value:function mget(e,t){return this.client.mget(e,t);}},{key:"msearch",value:function msearch(e,t){var s=this;return s.client.msearch(e).then(function(e){return s._update(e.responses,t),e;},function(e){return t(e),s.events.triggerEvent("error",{error:e}),e;});}},{key:"msearchTemplate",value:function msearchTemplate(e,t){return this.client.msearchTemplate(e,t);}},{key:"mtermvectors",value:function mtermvectors(e,t){return this.client.mtermvectors(e,t);}},{key:"ping",value:function ping(e,t){return this.client.ping(e,t);}},{key:"putScript",value:function putScript(e,t){return this.client.putScript(e,t);}},{key:"putTemplate",value:function putTemplate(e,t){return this.client.putTemplate(e,t);}},{key:"reindex",value:function reindex(e,t){return this.client.reindex(e,t);}},{key:"reindexRessrottle",value:function reindexRessrottle(e,t){return this.client.reindexRessrottle(e,t);}},{key:"renderSearchTemplate",value:function renderSearchTemplate(e,t){return this.client.renderSearchTemplate(e,t);}},{key:"scroll",value:function scroll(e,t){return this.client.scroll(e,t);}},{key:"search",value:function search(e,t){var s=this;return s.client.search(e).then(function(e){return s._update(e.responses,t),e;},function(e){return t(e),s.events.triggerEvent("error",{error:e}),e;});}},{key:"searchShards",value:function searchShards(e,t){return this.client.searchShards(e,t);}},{key:"searchTemplate",value:function searchTemplate(e,t){return this.client.searchTemplate(e,t);}},{key:"suggest",value:function suggest(e,t){return this.client.suggest(e,t);}},{key:"termvectors",value:function termvectors(e,t){return this.client.termvectors(e,t);}},{key:"update",value:function update(e,t){return this.client.update(e,t);}},{key:"updateByQuery",value:function updateByQuery(e,t){return this.client.updateByQuery(e,t);}},{key:"_update",value:function _update(e,t){var s=this;e&&(s.data=e,s.openGeoFence&&s.geoFence&&s._validateDatas(e),s.events.triggerEvent("change",{data:s.data}),s.change?s.change&&s.change(e):t&&t(void 0,{responses:e}));}},{key:"_validateDatas",value:function _validateDatas(e){if(e){e instanceof Array||(e=[e]);var t,s=e.length;for(t=0;t<s;t++){this._validateData(e[t]);}}}},{key:"_validateData",value:function _validateData(e){var t=this;e.hits.hits.map(function(s){var r=s._source,i=t._getMeterPerMapUnit(t.geoFence.unit),a=t.geoFence.center[0]*i,n=t.geoFence.center[1]*i,o=r.x*i,l=r.y*i;return t._distance(o,l,a,n)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),s;});}},{key:"_distance",value:function _distance(e,t,s,r){return Math.sqrt((e-s)*(e-s)+(t-r)*(t-r));}},{key:"_getMeterPerMapUnit",value:function _getMeterPerMapUnit(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t;}}]);return y;}();r.ElasticSearch=y;s(7),s(11);var g=s(2),v=s.n(g);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var S=window.fetch;r.setCORS=function(e){r.CORS=e;};var b=r.isCORS=function(){return void 0!=r.CORS?r.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest();},x=(r.setRequestTimeout=function(e){return r.RequestTimeout=e;},r.getRequestTimeout=function(){return r.RequestTimeout||45e3;}),C=r.FetchRequest={commit:function commit(e,t,s,r){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,s,r);case"POST":return this.post(t,s,r);case"PUT":return this.put(t,s,r);case"DELETE":return this["delete"](t,s,r);default:return this.get(t,s,r);}},supportDirectRequest:function supportDirectRequest(e,t){return!!c.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:b()||t.proxy);},get:function get(e,t,s){s=s||{};if(e=c.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,s),!this.supportDirectRequest(e,s)){var i={url:e=e.replace(".json",".jsonp"),data:t};return r.Util.RequestJSONPPromise.GET(i);}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,s):this._fetch(e,t,s,"GET");},"delete":function _delete(e,t,s){s=s||{};if(e=c.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,s),!this.supportDirectRequest(e,s)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=DELETE",data:t};return r.Util.RequestJSONPPromise.DELETE(i);}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,s):this._fetch(e,t,s,"DELETE");},post:function post(e,t,s){if(s=s||{},!this.supportDirectRequest(e,s)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=POST",data:t};return r.Util.RequestJSONPPromise.POST(i);}return this._fetch(this._processUrl(e,s),t,s,"POST");},put:function put(e,t,s){if(s=s||{},e=this._processUrl(e,s),!this.supportDirectRequest(e,s)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=PUT",data:t};return r.Util.RequestJSONPPromise.PUT(i);}return this._fetch(e,t,s,"PUT");},urlIsLong:function urlIsLong(e){for(var t=0,s=null,r=0,i=e.length;r<i;r++){(s=e.charCodeAt(r))<127?t++:128<=s&&s<=2047?t+=2:2048<=s&&s<=65535&&(t+=3);}return!(t<2e3);},_postSimulatie:function _postSimulatie(e,t,s,r){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof s&&(s=JSON.stringify(s)),this.post(t,s,r);},_processUrl:function _processUrl(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var s=e.split("?");2===s.length&&(e=s[0]+".json?"+s[1]);}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e;},_fetch:function _fetch(e,t,s,r){return(s=s||{}).headers=s.headers||{},s.headers["Content-Type"]||(s.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),s.timeout?this._timeout(s.timeout,S(e,{method:r,headers:s.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:s.withCredentials?"include":"omit",mode:"cors",timeout:x()}).then(function(e){return e;})):S(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:s.headers,credentials:s.withCredentials?"include":"omit",mode:"cors",timeout:x()}).then(function(e){return e;});},_fetchJsonp:function _fetchJsonp(e,t){return t=t||{},v()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e;});},_timeout:function _timeout(e,t){return new Promise(function(s,r){setTimeout(function(){r(new Error("timeout"));},e),t.then(s,r);});},_getParameterString:function _getParameterString(e){var t=[];for(var s in e){var r=e[s];if(null!=r&&"function"!=typeof r){var i;if("object"==_typeof(r)&&r.constructor===Array){for(var a,n=[],o=0,l=r.length;o<l;o++){a=r[o],n.push(encodeURIComponent(null===a||void 0===a?"":a));}i="["+n.join(",")+"]";}else i=encodeURIComponent(r);t.push(encodeURIComponent(s)+"="+i);}}return t.join("&");},_isMVTRequest:function _isMVTRequest(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1;}};r.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function addQueryStrings(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=r.Util.toJSON(e[t]));var s=encodeURIComponent(e[t]);this.queryValues.push(s);}},issue:function issue(e){for(var t=this,s=t.getUid(),r=e.url,i=[],a=new Promise(function(e){t.supermap_callbacks[s]=function(r){delete t.supermap_callbacks[s],e(r);};}),n=r,o=0,l=t.queryKeys?t.queryKeys.length:0,h=0;h<l;h++){if(n.length+t.queryKeys[h].length+2>=t.limitLength){if(0==o)return!1;i.push(n),n=r,o=0,h--;}else if(n.length+t.queryKeys[h].length+2+t.queryValues[h].length>t.limitLength)for(var u=t.queryValues[h];u.length>0;){var c=t.limitLength-n.length-t.queryKeys[h].length-2;n.indexOf("?")>-1?n+="&":n+="?";var d=u.substring(0,c);"%"===d.substring(c-1,c)?(c-=1,d=u.substring(0,c)):"%"===d.substring(c-2,c-1)&&(c-=2,d=u.substring(0,c)),n+=t.queryKeys[h]+"="+d,u=u.substring(c),d.length>0&&(i.push(n),n=r,o=0);}else o++,n.indexOf("?")>-1?n+="&":n+="?",n+=t.queryKeys[h]+"="+t.queryValues[h];}return i.push(n),t.send(i,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+s+"]",e&&e.proxy),a;},getUid:function getUid(){return 1e3*new Date().getTime()+Math.floor(1e17*Math.random());},send:function send(e,t,s){var r=e.length;if(r>0)for(var i=new Date().getTime(),a=0;a<r;a++){var n=e[a];n.indexOf("?")>-1?n+="&":n+="?",n+="sectionCount="+r,n+="&sectionIndex="+a,n+="&jsonpUserID="+i,s&&(n=decodeURIComponent(n),n=s+encodeURIComponent(n)),v()(n,{jsonpCallbackFunction:t,timeout:3e4});}},GET:function GET(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e);},POST:function POST(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e);},PUT:function PUT(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e);},DELETE:function DELETE(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e);}};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _=/*#__PURE__*/function(){function _(){_classCallCheck(this,_);}_createClass(_,null,[{key:"generateToken",value:function generateToken(e,t){var s=this.servers[e];if(s)return C.post(s.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text();});}},{key:"registerServers",value:function registerServers(e){this.servers=this.servers||{},c.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var s=e[t];this.servers[s.server]=s;}}},{key:"registerToken",value:function registerToken(e,t){if(this.tokens=this.tokens||{},e&&t){var s=this._getTokenStorageKey(e);this.tokens[s]=t;}}},{key:"registerKey",value:function registerKey(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=c.isArray(e)?e:[e];for(var s=0;s<e.length;s++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t;}}}},{key:"getServerInfo",value:function getServerInfo(e){return this.servers=this.servers||{},this.servers[e];}},{key:"getToken",value:function getToken(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t];}}},{key:"getKey",value:function getKey(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t];}},{key:"loginiServer",value:function loginiServer(e,t,s,r){e+="/"===e.substr(e.length-1,1)?"services/security/login.json":"/services/security/login.json";var i={username:t&&t.toString(),password:s&&s.toString(),rememberme:r};i=JSON.stringify(i);return C.post(e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json();});}},{key:"logoutiServer",value:function logoutiServer(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return C.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0;})["catch"](function(){return!1;});}},{key:"loginOnline",value:function loginOnline(e,t){var s=_.SSO+"/login?service="+e;this._open(s,t);}},{key:"loginiPortal",value:function loginiPortal(e,t,s){e+="/"===e.substr(e.length-1,1)?"web/login.json":"/web/login.json";var r={username:t&&t.toString(),password:s&&s.toString()};r=JSON.stringify(r);return C.post(e,r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json();});}},{key:"logoutiPortal",value:function logoutiPortal(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return C.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0;})["catch"](function(){return!1;});}},{key:"loginManager",value:function loginManager(e,t,s){if(c.isInTheSameDomain(e)){var r="/"===e.substr(e.length-1,1)?e+"icloud/security/tokens.json":e+"/icloud/security/tokens.json",i=t||{},a={username:i.userName&&i.userName.toString(),password:i.password&&i.password.toString()};a=JSON.stringify(a);var n=this;return C.post(r,a,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return n.imanagerToken=e,e;});});}var o=!s||s.isNewTab;this._open(e,o);}},{key:"destroyAllCredentials",value:function destroyAllCredentials(){this.keys=null,this.tokens=null,this.servers=null;}},{key:"destroyToken",value:function destroyToken(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t];}}},{key:"destroyKey",value:function destroyKey(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t];}}},{key:"_open",value:function _open(e,t){t=null==t||t;var s=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+s+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",i);}},{key:"_getTokenStorageKey",value:function _getTokenStorageKey(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e;}},{key:"_getUrlRestString",value:function _getUrlRestString(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e;}}]);return _;}();_.INNER_WINDOW_WIDTH=600,_.INNER_WINDOW_HEIGHT=600,_.SSO="https://sso.supermap.com",_.ONLINE="https://www.supermapol.com",r.SecurityManager=_;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var T=r.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},E=r.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},A=r.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN"},w=r.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},N=(r.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},r.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"}),P=(r.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},r.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"}),O=r.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},L=r.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},M=(r.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},r.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"}),I=r.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},R=r.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},D=r.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},F=r.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},k=(r.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},r.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"}),B=r.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},G=(r.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},r.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"}),U=r.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},H=r.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},j=(r.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},r.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},r.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},r.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},r.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"}),J=r.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},V=r.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},q=r.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},W=r.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},z=r.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Y=r.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},X=r.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},Q=r.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},K=(r.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},r.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},r.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},r.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},r.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},r.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},r.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},r.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},r.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"}),Z=r.Exponent={EXP1:"EXP1",EXP2:"EXP2"},$=r.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},ee=(r.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},r.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"}),te=r.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},se=r.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},re=r.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},ie=r.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},ae=r.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},ne=r.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},oe=r.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},le=(r.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},r.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"});r.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},r.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},r.OrderType={ASC:"ASC",DESC:"DESC"},r.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},r.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},r.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},r.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var he=/*#__PURE__*/function(){function he(e){_classCallCheck(this,he);this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo";}_createClass(he,[{key:"destroy",value:function destroy(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null;}}]);return he;}();r.DatasourceConnectionInfo=he;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ue=/*#__PURE__*/function(){function ue(e){_classCallCheck(this,ue);this.type=V.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",c.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting";}_createClass(ue,[{key:"destroy",value:function destroy(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof he&&(e.datasourceInfo.destroy(),e.datasourceInfo=null);}}]);return ue;}();r.OutputSetting=ue;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ce=/*#__PURE__*/function(){function ce(e){_classCallCheck(this,ce);this.items=null,this.numericPrecision=1,this.rangeMode=F.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=k.YELLOW_RED,c.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters";}_createClass(ce,[{key:"destroy",value:function destroy(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items){e.items[t].destroy(),e.items[t]=null;}e.items=null;}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null;}}]);return ce;}();r.MappingParameters=ce;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var de=/*#__PURE__*/function(){function de(e){_classCallCheck(this,de);e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=se.METER,this.radiusUnit=se.METER,this.areaUnit=te.SQUAREMILE,this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter");}_createClass(de,[{key:"destroy",value:function destroy(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"output"!==s?(t.analyst=t.analyst||{},"query"===s&&e[s]?t.analyst[s]=e[s].toBBOX():t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return de;}();r.KernelDensityJobParameter=de;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pe=/*#__PURE__*/function(){function pe(e){_classCallCheck(this,pe);e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=N.CONTAIN,this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter");}_createClass(pe,[{key:"destroy",value:function destroy(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"output"!==s?(t.analyst=t.analyst||{},t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return pe;}();r.SingleObjectQueryJobsParameter=pe;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var me=/*#__PURE__*/function(){function me(e){_classCallCheck(this,me);e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter");}_createClass(me,[{key:"destroy",value:function destroy(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"output"!==s?(t.analyst=t.analyst||{},t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return me;}();r.SummaryAttributesJobsParameter=me;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fe=/*#__PURE__*/function(){function fe(e){_classCallCheck(this,fe);e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=re.AVERAGE,this.fields="",this.type=ie.SUMMARYMESH,this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter");}_createClass(fe,[{key:"destroy",value:function destroy(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"type"!==s?"output"!==s?("SUMMARYMESH"===e.type&&"regionDataset"!==s||"SUMMARYREGION"===e.type&&!r(["meshType","resolution","query"],s))&&(t.analyst=t.analyst||{},"query"===s&&e[s]?t.analyst[s]=e[s].toBBOX():t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):t.type=e[s]:(t.input=t.input||{},t.input[s]=e[s]);}function r(e,t){for(var s=e.length;s--;){if(e[s]===t)return!0;}return!1;}}}]);return fe;}();r.SummaryMeshJobParameter=fe;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ye=/*#__PURE__*/function(){function ye(e){_classCallCheck(this,ye);e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=se.METER,this.type=ie.SUMMARYMESH,this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter");}_createClass(ye,[{key:"destroy",value:function destroy(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"type"!==s&&"type"!==s?"output"!==s?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==s)&&(t.analyst=t.analyst||{},"query"===s&&e[s]?t.analyst[s]=e[s].toBBOX():t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):t.type=e[s]:(t.input=t.input||{},t.input[s]=e[s]);}}}]);return ye;}();r.SummaryRegionJobParameter=ye;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ge=/*#__PURE__*/function(){function ge(e){_classCallCheck(this,ge);e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter");}_createClass(ge,[{key:"destroy",value:function destroy(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!=s?"output"!==s?(t.analyst=t.analyst||{},t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return ge;}();r.OverlayGeoJobParameter=ge;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ve=/*#__PURE__*/function(){function ve(e){_classCallCheck(this,ve);if(this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=se.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;c.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter";}_createClass(ve,[{key:"destroy",value:function destroy(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"output"!==s?(t.analyst=t.analyst||{},"bounds"===s&&e[s]?t.analyst[s]=e[s].toBBOX():t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return ve;}();r.BuffersAnalystJobsParameter=ve;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Se=/*#__PURE__*/function(){function Se(e){_classCallCheck(this,Se);e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=ae.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter");}_createClass(Se,[{key:"destroy",value:function destroy(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"output"!==s?(t.analyst=t.analyst||{},t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return Se;}();r.TopologyValidatorJobsParameter=Se;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var be=/*#__PURE__*/function(){function be(e){_classCallCheck(this,be);if(e.filters){var _t5=[];e.filters.split(",").map(function(e){return _t5.push('"'+e+'"'),e;}),e.filters=_t5;}this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,c.extend(this,e);}_createClass(be,[{key:"destroy",value:function destroy(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null;}}]);return be;}();r.GeoCodingParameter=be;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xe=/*#__PURE__*/function(){function xe(e){_classCallCheck(this,xe);if(e.filters){var _t6=[];e.filters.split(",").map(function(e){return _t6.push('"'+e+'"'),e;}),e.filters=_t6;}this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,c.extend(this,e);}_createClass(xe,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null;}}]);return xe;}();r.GeoDecodingParameter=xe;var Ce=window.SuperMap=window.SuperMap||{};Ce.REST=Ce.REST||{};var _e=s(1);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Te=/*#__PURE__*/function(){function Te(e,t){_classCallCheck(this,Te);this.w=e?parseFloat(e):0,this.h=e?parseFloat(t):0,this.CLASS_NAME="SuperMap.Size";}_createClass(Te,[{key:"toString",value:function toString(){return"w="+this.w+",h="+this.h;}},{key:"clone",value:function clone(){return new Te(this.w,this.h);}},{key:"equals",value:function equals(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t;}},{key:"destroy",value:function destroy(){this.w=null,this.h=null;}}]);return Te;}();r.Size=Te;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ee=/*#__PURE__*/function(){function Ee(e,t){_classCallCheck(this,Ee);c.isArray(e)&&(t=e[1],e=e[0]),this.lon=e?c.toFloat(e):0,this.lat=t?c.toFloat(t):0,this.CLASS_NAME="SuperMap.LonLat";}_createClass(Ee,[{key:"toString",value:function toString(){return"lon="+this.lon+",lat="+this.lat;}},{key:"toShortString",value:function toShortString(){return this.lon+","+this.lat;}},{key:"clone",value:function clone(){return new Ee(this.lon,this.lat);}},{key:"add",value:function add(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new Ee(this.lon+c.toFloat(e),this.lat+c.toFloat(t));}},{key:"equals",value:function equals(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t;}},{key:"wrapDateLine",value:function wrapDateLine(e){var t=this.clone();if(e){for(;t.lon<e.left;){t.lon+=e.getWidth();}for(;t.lon>e.right;){t.lon-=e.getWidth();}}return t;}},{key:"destroy",value:function destroy(){this.lon=null,this.lat=null;}}],[{key:"fromString",value:function fromString(e){var t=e.split(",");return new Ee(t[0],t[1]);}},{key:"fromArray",value:function fromArray(e){var t=c.isArray(e),s=t&&e[0],r=t&&e[1];return new Ee(s,r);}}]);return Ee;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ae=/*#__PURE__*/function(){function Ae(e,t,s,r){_classCallCheck(this,Ae);c.isArray(e)&&(r=e[3],s=e[2],t=e[1],e=e[0]),this.left=null!=e?c.toFloat(e):this.left,this.bottom=null!=t?c.toFloat(t):this.bottom,this.right=null!=s?c.toFloat(s):this.right,this.top=null!=r?c.toFloat(r):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds";}_createClass(Ae,[{key:"clone",value:function clone(){return new Ae(this.left,this.bottom,this.right,this.top);}},{key:"equals",value:function equals(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t;}},{key:"toString",value:function toString(){return[this.left,this.bottom,this.right,this.top].join(",");}},{key:"toArray",value:function toArray(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top];}},{key:"toBBOX",value:function toBBOX(e,t){null==e&&(e=6);var s=Math.pow(10,e),r=Math.round(this.left*s)/s,i=Math.round(this.bottom*s)/s,a=Math.round(this.right*s)/s,n=Math.round(this.top*s)/s;return!0===t?i+","+r+","+n+","+a:r+","+i+","+a+","+n;}},{key:"getWidth",value:function getWidth(){return this.right-this.left;}},{key:"getHeight",value:function getHeight(){return this.top-this.bottom;}},{key:"getSize",value:function getSize(){return new Te(this.getWidth(),this.getHeight());}},{key:"getCenterPixel",value:function getCenterPixel(){return new i((this.left+this.right)/2,(this.bottom+this.top)/2);}},{key:"getCenterLonLat",value:function getCenterLonLat(){return this.centerLonLat||(this.centerLonLat=new Ee((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat;}},{key:"scale",value:function scale(e,t){var s,r;e=e||1,null==t&&(t=this.getCenterLonLat()),"SuperMap.LonLat"===t.CLASS_NAME?(s=t.lon,r=t.lat):(s=t.x,r=t.y);var i=(this.left-s)*e+s,a=(this.bottom-r)*e+r,n=(this.right-s)*e+s,o=(this.top-r)*e+r;return new Ae(i,a,n,o);}},{key:"add",value:function add(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new Ae(this.left+e,this.bottom+t,this.right+e,this.top+t);}},{key:"extend",value:function extend(e){var t=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":t=new Ae(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":t=new Ae(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":t=e;}t&&(this.centerLonLat=null,(null==this.left||t.left<this.left)&&(this.left=t.left),(null==this.bottom||t.bottom<this.bottom)&&(this.bottom=t.bottom),(null==this.right||t.right>this.right)&&(this.right=t.right),(null==this.top||t.top>this.top)&&(this.top=t.top));}}},{key:"containsLonLat",value:function containsLonLat(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var s=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;if(r&&!s){var i=r.getWidth(),a=(r.left+r.right)/2,n=Math.round((e.lon-a)/i);s=this.containsLonLat({lon:e.lon-n*i,lat:e.lat},{inclusive:t.inclusive});}return s;}},{key:"containsPixel",value:function containsPixel(e,t){return this.contains(e.x,e.y,t);}},{key:"contains",value:function contains(e,t,s){if(null==s&&(s=!0),null==e||null==t)return!1;return s?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top;}},{key:"intersectsBounds",value:function intersectsBounds(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var s=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds);}else s=this;null==t.inclusive&&(t.inclusive=!0);var r=!1,i=s.left===e.right||s.right===e.left||s.top===e.bottom||s.bottom===e.top;if(t.inclusive||!i){var a=e.bottom>=s.bottom&&e.bottom<=s.top||s.bottom>=e.bottom&&s.bottom<=e.top,n=e.top>=s.bottom&&e.top<=s.top||s.top>e.bottom&&s.top<e.top,o=e.left>=s.left&&e.left<=s.right||s.left>=e.left&&s.left<=e.right,l=e.right>=s.left&&e.right<=s.right||s.right>=e.left&&s.right<=e.right;r=(a||n)&&(o||l);}if(t.worldBounds&&!r){var h=t.worldBounds,u=h.getWidth(),c=!h.containsBounds(s),d=!h.containsBounds(e);c&&!d?(e=e.add(-u,0),r=s.intersectsBounds(e,{inclusive:t.inclusive})):d&&!c&&(s=s.add(-u,0),r=e.intersectsBounds(s,{inclusive:t.inclusive}));}return r;}},{key:"containsBounds",value:function containsBounds(e,t,s){null==t&&(t=!1),null==s&&(s=!0);var r=this.contains(e.left,e.bottom,s),i=this.contains(e.right,e.bottom,s),a=this.contains(e.left,e.top,s),n=this.contains(e.right,e.top,s);return t?r||i||a||n:r&&i&&a&&n;}},{key:"determineQuadrant",value:function determineQuadrant(e){var t="",s=this.getCenterLonLat();return t+=e.lat<s.lat?"b":"t",t+=e.lon<s.lon?"l":"r";}},{key:"wrapDateLine",value:function wrapDateLine(e,t){var s=(t=t||{}).leftTolerance||0,r=t.rightTolerance||0,i=this.clone();if(e){for(var a=e.getWidth();i.left<e.left&&i.right-r<=e.left;){i=i.add(a,0);}for(;i.left+s>=e.right&&i.right>e.right;){i=i.add(-a,0);}var n=i.left+s;n<e.right&&n>e.left&&i.right-r>e.right&&(i=i.add(-a,0));}return i;}},{key:"toServerJSONObject",value:function toServerJSONObject(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom};}},{key:"destroy",value:function destroy(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null;}}],[{key:"fromString",value:function fromString(e,t){var s=e.split(",");return Ae.fromArray(s,t);}},{key:"fromArray",value:function fromArray(e,t){return!0===t?new Ae(e[1],e[0],e[3],e[2]):new Ae(e[0],e[1],e[2],e[3]);}},{key:"fromSize",value:function fromSize(e){return new Ae(0,e.h,e.w,0);}},{key:"oppositeQuadrant",value:function oppositeQuadrant(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l";}}]);return Ae;}();r.Bounds=Ae;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var we=/*#__PURE__*/function(){function we(){_classCallCheck(this,we);this.CLASS_NAME="SuperMap.Geometry",this.id=c.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null;}_createClass(we,[{key:"destroy",value:function destroy(){this.id=null,this.bounds=null,this.SRID=null;}},{key:"clone",value:function clone(){return new we();}},{key:"setBounds",value:function setBounds(e){e&&(this.bounds=e.clone());}},{key:"clearBounds",value:function clearBounds(){this.bounds=null,this.parent&&this.parent.clearBounds();}},{key:"extendBounds",value:function extendBounds(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e);}},{key:"getBounds",value:function getBounds(){return null==this.bounds&&this.calculateBounds(),this.bounds;}},{key:"calculateBounds",value:function calculateBounds(){}},{key:"getVertices",value:function getVertices(e){}},{key:"getArea",value:function getArea(){return 0;}}]);return we;}();r.Geometry=we;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ne=/*#__PURE__*/function(_we){_inherits(Ne,_we);function Ne(e){var _this;_classCallCheck(this,Ne);_this=_possibleConstructorReturn(this,_getPrototypeOf(Ne).call(this)),_this.components=[],_this.componentTypes=null,null!=e&&_this.addComponents(e),_this.CLASS_NAME="SuperMap.Geometry.Collection",_this.geometryType="Collection";return _this;}_createClass(Ne,[{key:"destroy",value:function destroy(){this.components.length=0,this.components=null,_get(_getPrototypeOf(Ne.prototype),"destroy",this).call(this);}},{key:"clone",value:function clone(){for(var e=new Ne(),t=0,s=this.components.length;t<s;t++){e.addComponent(this.components[t].clone());}return c.applyDefaults(e,this),e;}},{key:"getComponentsString",value:function getComponentsString(){for(var e=[],t=0,s=this.components.length;t<s;t++){e.push(this.components[t].toShortString());}return e.join(",");}},{key:"calculateBounds",value:function calculateBounds(){this.bounds=null;var e=new Ae(),t=this.components;if(t)for(var s=0,r=t.length;s<r;s++){e.extend(t[s].getBounds());}null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e);}},{key:"addComponents",value:function addComponents(e){c.isArray(e)||(e=[e]);for(var t=0,s=e.length;t<s;t++){this.addComponent(e[t]);}}},{key:"addComponent",value:function addComponent(e,t){var s=!1;if(e&&(null==this.componentTypes||c.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var r=this.components.slice(0,t),i=this.components.slice(t,this.components.length);r.push(e),this.components=r.concat(i);}else this.components.push(e);e.parent=this,this.clearBounds(),s=!0;}return s;}},{key:"removeComponents",value:function removeComponents(e){var t=!1;c.isArray(e)||(e=[e]);for(var s=e.length-1;s>=0;--s){t=this.removeComponent(e[s])||t;}return t;}},{key:"removeComponent",value:function removeComponent(e){return c.removeItem(this.components,e),this.clearBounds(),!0;}},{key:"getArea",value:function getArea(){for(var e=0,t=0,s=this.components.length;t<s;t++){e+=this.components[t].getArea();}return e;}},{key:"equals",value:function equals(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME){if(c.isArray(e.components)&&e.components.length===this.components.length){for(var s=0,r=this.components.length;s<r;++s){if(!this.components[s].equals(e.components[s])){t=!1;break;}}}else t=!1;}else t=!1;return t;}},{key:"getVertices",value:function getVertices(e){for(var t=[],s=0,r=this.components.length;s<r;++s){Array.prototype.push.apply(t,this.components[s].getVertices(e));}return t;}}]);return Ne;}(we);r.Geometry.Collection=Ne;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pe=/*#__PURE__*/function(_Ne){_inherits(Pe,_Ne);function Pe(e){var _this2;_classCallCheck(this,Pe);_this2=_possibleConstructorReturn(this,_getPrototypeOf(Pe).call(this,e)),_this2.componentTypes=["SuperMap.Geometry.Point"],_this2.CLASS_NAME="SuperMap.Geometry.MultiPoint",_this2.geometryType="MultiPoint";return _this2;}_createClass(Pe,[{key:"addPoint",value:function addPoint(e,t){this.addComponent(e,t);}},{key:"removePoint",value:function removePoint(e){this.removeComponent(e);}}]);return Pe;}(Ne);r.Geometry.MultiPoint=Pe;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Oe=/*#__PURE__*/function(_Pe){_inherits(Oe,_Pe);function Oe(e){var _this3;_classCallCheck(this,Oe);_this3=_possibleConstructorReturn(this,_getPrototypeOf(Oe).call(this,e)),_this3.componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],_this3.CLASS_NAME="SuperMap.Geometry.Curve",_this3.geometryType="Curve";return _this3;}return Oe;}(Pe);r.Geometry.Curve=Oe;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Le=/*#__PURE__*/function(_we2){_inherits(Le,_we2);function Le(e,t,s,r){var _this4;_classCallCheck(this,Le);_this4=_possibleConstructorReturn(this,_getPrototypeOf(Le).call(this,e,t,s,r)),_this4.x=parseFloat(e),_this4.y=parseFloat(t),_this4.tag=r||0==r?parseFloat(r):null,_this4.type=s||"Point",_this4.CLASS_NAME="SuperMap.Geometry.Point",_this4.geometryType="Point";return _this4;}_createClass(Le,[{key:"clone",value:function clone(e){return null==e&&(e=new Le(this.x,this.y)),c.applyDefaults(e,this),e;}},{key:"calculateBounds",value:function calculateBounds(){this.bounds=new Ae(this.x,this.y,this.x,this.y);}},{key:"equals",value:function equals(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t;}},{key:"move",value:function move(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds();}},{key:"toShortString",value:function toShortString(){return this.x+", "+this.y;}},{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.tag=null,_get(_getPrototypeOf(Le.prototype),"destroy",this).call(this);}},{key:"getVertices",value:function getVertices(e){return[this];}}]);return Le;}(we);r.Geometry.Point=Le;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Me=/*#__PURE__*/function(_Oe){_inherits(Me,_Oe);function Me(e){var _this5;_classCallCheck(this,Me);_this5=_possibleConstructorReturn(this,_getPrototypeOf(Me).call(this,e)),_this5.CLASS_NAME="SuperMap.Geometry.LineString",_this5.geometryType="LineString";return _this5;}_createClass(Me,[{key:"removeComponent",value:function removeComponent(e){var t=this.components&&this.components.length>2;return t&&_get(_getPrototypeOf(Me.prototype),"removeComponent",this).apply(this,arguments),t;}},{key:"getSortedSegments",value:function getSortedSegments(){for(var e,t,s=this.components.length-1,r=new Array(s),i=0;i<s;++i){e=this.components[i],t=this.components[i+1],e.x<t.x?r[i]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:r[i]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};}return r.sort(function(e,t){return e.x1-t.x1;});}},{key:"getVertices",value:function getVertices(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice();}}],[{key:"calculateCircle",value:function calculateCircle(e){if(e.length<3)return e;var t={},s=e[0],r=e[1],i=e[2],a=0,n=0,o=!0,l=0,h=0,u=0,c=[],d=(i.y-s.y)/(i.x-s.x),p=i.y-d*i.x;if(i.x!=s.x&&i.y!=s.y&&r.y==d*r.x+p||i.x==s.x&&r.x==s.x||i.y==s.y&&r.y==s.y||i.x==s.x&&i.y==s.y||i.x==r.x&&i.y==r.y||s.x==r.x&&s.y==r.y)c.push(s),c.push(r),c.push(i);else{var m=(r.x*r.x+r.y*r.y-(s.x*s.x+s.y*s.y))*(2*(i.y-s.y))-(i.x*i.x+i.y*i.y-(s.x*s.x+s.y*s.y))*(2*(r.y-s.y)),f=2*(r.x-s.x)*(i.x*i.x+i.y*i.y-(s.x*s.x+s.y*s.y))-2*(i.x-s.x)*(r.x*r.x+r.y*r.y-(s.x*s.x+s.y*s.y)),y=4*((r.x-s.x)*(i.y-s.y)-(i.x-s.x)*(r.y-s.y));t.x=m/y,t.y=f/y;var g=(2*(a=Math.sqrt((s.x-t.x)*(s.x-t.x)+(s.y-t.y)*(s.y-t.y)))*a-((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)))/(2*a*a);g=(g=g>=1?1:g)<=-1?-1:g,u=180*Math.acos(g)/Math.PI,n=(u=i.x==s.x?t.x>s.x&&r.x>s.x||t.x<s.x&&r.x<s.x?360-u:u:t.y>d*t.x+p&&r.y>d*r.x+p||t.y<d*t.x+p&&r.y<d*r.x+p?360-u:u)/72,i.y!=s.y?i.x==s.x?i.y>s.y?r.x<s.x&&(o=!1):r.x>s.x&&(o=!1):i.x<s.x?r.y<d*r.x+p&&(o=!1):r.y>d*r.x+p&&(o=!1):i.x>s.x?r.y>s.y&&(o=!1):r.y<s.y&&(o=!1);var v=(s.y-t.y)/(s.x-t.x),S=v>=0?180*Math.atan(v)/Math.PI:Math.abs(180*Math.atan(v)/Math.PI)+90,b=Math.abs(t.y);s.y==b&&b==i.y&&s.x<i.x&&(S+=180);var x=s.y-t.y;c.push(s);for(var C=1;C<72;C++){l=n*C,h=S,o?x>=0?v>=0?h+=l:h=180-(h-90)+l:h=v>0?h-180+l:90-h+l:x>=0?v>=0?h-=l:h=180-(h-90)-l:h=v>=0?h-180-l:90-h-l,h=h*Math.PI/180;var _=t.x+a*Math.cos(h),T=t.y+a*Math.sin(h);c.push(new Le(_,T));}c.push(i);}return c;}},{key:"createLineEPS",value:function createLineEPS(e){var t=[],s=e.length;if(s<2)return e;for(var r=0;r<s;){if("LTypeArc"==e[r].type){var i=Me.createLineArc(t,r,s,e);t=i[0],r=i[1];}else t.push(e[r]),r++;}return t;}},{key:"createLineArc",value:function createLineArc(e,t,s,r){if(0==t){var _i3=Me.addPointEPS(r,t,s,"LTypeArc");Array.prototype.push.apply(e,_i3[0]),t=_i3[1]+1;}else if(t==s-1){var i=[r[t-1],r[t]],a=Me.calculateCircle(i);Array.prototype.push.apply(e,a),t++;}else{var _i4=Me.addPointEPS(r,t,s,"LTypeArc");e.pop(),Array.prototype.push.apply(e,_i4[0]),t=_i4[1]+1;}return[e,t];}},{key:"addPointEPS",value:function addPointEPS(e,t,s,r){var i,a=[],n=t+1;return 0==t?Array.prototype.push.apply(a,[e[t],e[t+1]]):t==s-1?Array.prototype.push.apply(a,[e[t-1],e[t]]):Array.prototype.push.apply(a,[e[t-1],e[t],e[t+1]]),"LTypeCurve"==r?i=Me.calculatePointsFBZN(a):"LTypeArc"==r&&(i=Me.calculateCircle(a)),[i,n];}}]);return Me;}(Oe);r.Geometry.LineString=Me;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ie=/*#__PURE__*/function(_we3){_inherits(Ie,_we3);function Ie(e,t,s){var _this6;_classCallCheck(this,Ie);_this6=_possibleConstructorReturn(this,_getPrototypeOf(Ie).call(this,e,t,s)),_this6.x=parseFloat(e),_this6.y=parseFloat(t),_this6.text=s.toString(),_this6.bsInfo={h:null,w:null},_this6.element=document.createElement("span"),_this6.CLASS_NAME="SuperMap.Geometry.GeoText",_this6.geometryType="GeoText";return _this6;}_createClass(Ie,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ie.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null;}},{key:"getCentroid",value:function getCentroid(){return new Le(this.x,this.y);}},{key:"clone",value:function clone(e){return null==e&&(e=new Ie(this.x,this.y,this.text)),c.applyDefaults(e,this),e;}},{key:"calculateBounds",value:function calculateBounds(){this.bounds=new Ae(this.x,this.y,this.x,this.y);}},{key:"getLabelPxBoundsByLabel",value:function getLabelPxBoundsByLabel(e,t,s,r){var i,a,n,o,l=c.cloneObject(e),h=(r.label||this.text).split("\n").length;if(t=parseFloat(t),s=parseFloat(s),h>1&&(s=parseFloat(s)*h),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":l.x+=t/2,l.y+=s/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=s/2;break;case"ct":l.y+=s/2;break;case"cb":l.y-=s/2;break;case"rt":l.x-=t/2,l.y+=s/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=s/2;}return this.bsInfo.h=s,this.bsInfo.w=t,i=l.x-parseFloat(t)/2,a=l.y+parseFloat(s)/2,o=l.x+parseFloat(t)/2,n=l.y-parseFloat(s)/2,new Ae(i,a,o,n);}},{key:"getLabelPxBoundsByText",value:function getLabelPxBoundsByText(e,t){var s,r,i,a,n=this.getLabelPxSize(t),o=c.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":o.x+=n.w/2,o.y+=n.h/2;break;case"lm":o.x+=n.w/2;break;case"lb":o.x+=n.w/2,o.y-=n.h/2;break;case"ct":o.y+=n.h/2;break;case"cb":o.y-=n.h/2;break;case"rt":o.x-=n.w/2,o.y+=n.h/2;break;case"rm":o.x-=n.w/2;break;case"rb":o.x-=n.w/2,o.y-=n.h/2;}return this.bsInfo.h=n.h,this.bsInfo.w=n.w,s=o.x-n.w/2,r=o.y+n.h/2,a=t.fontStyle&&"italic"===t.fontStyle?o.x+n.w/2+parseInt(parseFloat(t.fontSize)/2):o.x+n.w/2,i=o.y-n.h/2,new Ae(s,r,a,i);}},{key:"getLabelPxSize",value:function getLabelPxSize(e){var t,s,r,i,a=parseFloat(e.strokeWidth);t=e.label||this.text,s=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var n=t.split("\n"),o=n.length;i=o>1?s*o+o+a+.2*s:s+a+.2*s+1,r=0,this.labelWTmp&&r<this.labelWTmp&&(r=this.labelWTmp);for(var l=0;l<o;l++){var h=this.getTextCount(n[l]),u=this.labelWTmp=c.getTextBounds(e,n[l],this.element).textWidth+1*h.textC+a;r<u&&(r=u);}var d=new Object();return d.h=i,d.w=r,d;}},{key:"getTextCount",value:function getTextCount(e){for(var t={},s=0,r=0,i=0;i<e.length;i++){e.charCodeAt(i)>255?s++:r++;}return t.cnC=s,t.enC=r,t.textC=e.length,t;}}]);return Ie;}(we);r.Geometry.GeoText=Ie;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Re=/*#__PURE__*/function(_Me){_inherits(Re,_Me);function Re(e){var _this7;_classCallCheck(this,Re);_this7=_possibleConstructorReturn(this,_getPrototypeOf(Re).call(this,e)),_this7.componentTypes=["SuperMap.Geometry.Point"],_this7.CLASS_NAME="SuperMap.Geometry.LinearRing",_this7.geometryType="LinearRing";return _this7;}_createClass(Re,[{key:"addComponent",value:function addComponent(e,t){var s=!1,r=this.components.pop();null==t&&e.equals(r)||(s=_get(_getPrototypeOf(Re.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return _get(_getPrototypeOf(Re.prototype),"addComponent",this).apply(this,[i]),s;}},{key:"removeComponent",value:function removeComponent(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),_get(_getPrototypeOf(Re.prototype),"removeComponent",this).apply(this,arguments);var s=this.components[0];_get(_getPrototypeOf(Re.prototype),"addComponent",this).apply(this,[s]);}return t;}},{key:"getArea",value:function getArea(){var e=0;if(this.components&&this.components.length>2){for(var t=0,s=0,r=this.components.length;s<r-1;s++){var i=this.components[s],a=this.components[s+1];t+=(i.x+a.x)*(a.y-i.y);}e=-t/2;}return e;}},{key:"getVertices",value:function getVertices(e){return!0===e?[]:this.components.slice(0,this.components.length-1);}}]);return Re;}(Me);r.Geometry.LinearRing=Re;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var De=/*#__PURE__*/function(_Ne2){_inherits(De,_Ne2);function De(e){var _this8;_classCallCheck(this,De);_this8=_possibleConstructorReturn(this,_getPrototypeOf(De).call(this,e)),_this8.componentTypes=["SuperMap.Geometry.LineString"],_this8.CLASS_NAME="SuperMap.Geometry.MultiLineString",_this8.geometryType="MultiLineString";return _this8;}return De;}(Ne);r.Geometry.MultiLineString=De;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Fe=/*#__PURE__*/function(_Ne3){_inherits(Fe,_Ne3);function Fe(e){var _this9;_classCallCheck(this,Fe);_this9=_possibleConstructorReturn(this,_getPrototypeOf(Fe).call(this,e)),_this9.componentTypes=["SuperMap.Geometry.Polygon"],_this9.CLASS_NAME="SuperMap.Geometry.MultiPolygon",_this9.geometryType="MultiPolygon";return _this9;}return Fe;}(Ne);r.Geometry.MultiPolygon=Fe;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ke=/*#__PURE__*/function(_Ne4){_inherits(ke,_Ne4);function ke(e){var _this10;_classCallCheck(this,ke);_this10=_possibleConstructorReturn(this,_getPrototypeOf(ke).call(this,e)),_this10.componentTypes=["SuperMap.Geometry.LinearRing"],_this10.CLASS_NAME="SuperMap.Geometry.Polygon",_this10.geometryType="Polygon";return _this10;}_createClass(ke,[{key:"getArea",value:function getArea(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,s=this.components.length;t<s;t++){e-=Math.abs(this.components[t].getArea());}}return e;}}]);return ke;}(Ne);r.Geometry.Polygon=ke;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Be=/*#__PURE__*/function(_we4){_inherits(Be,_we4);function Be(e,t,s,r){var _this11;_classCallCheck(this,Be);_this11=_possibleConstructorReturn(this,_getPrototypeOf(Be).call(this,e,t,s,r)),_this11.x=e,_this11.y=t,_this11.width=s,_this11.height=r,_this11.CLASS_NAME="SuperMap.Geometry.Rectangle",_this11.geometryType="Rectangle";return _this11;}_createClass(Be,[{key:"calculateBounds",value:function calculateBounds(){this.bounds=new Ae(this.x,this.y,this.x+this.width,this.y+this.height);}},{key:"getArea",value:function getArea(){return this.width*this.height;}}]);return Be;}(we);r.Geometry.Rectangle=Be;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ge=/*#__PURE__*/function(){function Ge(e,t){_classCallCheck(this,Ge);this.value=e||"",this.name=t||"token",this.CLASS_NAME="SuperMap.Credential";}_createClass(Ge,[{key:"getUrlParameters",value:function getUrlParameters(){return this.name+"="+this.value;}},{key:"getValue",value:function getValue(){return this.value;}},{key:"destroy",value:function destroy(){this.value=null,this.name=null;}}]);return Ge;}();Ge.CREDENTIAL=null,r.Credential=Ge;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString();};{var _e5=function _e5(e,t){for(var s=e+"";s.length<t;){s="0"+s;}return s;};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+_e5(t.getUTCMonth()+1,2)+"-"+_e5(t.getUTCDate(),2)+"T"+_e5(t.getUTCHours(),2)+":"+_e5(t.getUTCMinutes(),2)+":"+_e5(t.getUTCSeconds(),2)+"."+_e5(t.getUTCMilliseconds(),3)+"Z";};}}(),parse:function parse(e){var t,s=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(s&&(s[1]||s[7])){var r=parseInt(s[1],10)||0,i=parseInt(s[2],10)-1||0,a=parseInt(s[3],10)||1;t=new Date(Date.UTC(r,i,a));var n=s[7];if(n){var o=parseInt(s[4],10),l=parseInt(s[5],10),h=parseFloat(s[6]),u=0|h,c=Math.round(1e3*(h-u));if(t.setUTCHours(o,l,u,c),"Z"!==n){var d=-1e3*(60*parseInt(n,10)*60+60*(parseInt(s[8],10)||0));t=new Date(t.getTime()+d);}}}else t=new Date("invalid");return t;}};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ue=/*#__PURE__*/function(){function Ue(e,t,s){_classCallCheck(this,Ue);this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=c.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=t,this.data=null!=s?s:{};}_createClass(Ue,[{key:"destroy",value:function destroy(){this.id=null,this.lonlat=null,this.data=null;}}]);return Ue;}();r.Feature=Ue;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var He=/*#__PURE__*/function(_Ue){_inherits(He,_Ue);function He(e,t,s){var _this12;_classCallCheck(this,He);_this12=_possibleConstructorReturn(this,_getPrototypeOf(He).call(this,null,null,t)),_this12.fid=null,_this12.geometry=e||null,_this12.attributes={},t&&(_this12.attributes=c.extend(_this12.attributes,t)),_this12.bounds=null,_this12.state=null,_this12.style=s||null,_this12.url=null,_this12.lonlat=null,_this12.CLASS_NAME="SuperMap.Feature.Vector",r.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},He.style={"default":{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}};return _this12;}_createClass(He,[{key:"destroy",value:function destroy(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,_get(_getPrototypeOf(He.prototype),"destroy",this).call(this);}},{key:"clone",value:function clone(){return new He(this.geometry?this.geometry.clone():null,this.attributes,this.style);}},{key:"toState",value:function toState(e){if(e===r.State.UPDATE)switch(this.state){case r.State.UNKNOWN:case r.State.DELETE:this.state=e;break;case r.State.UPDATE:case r.State.INSERT:}else if(e===r.State.INSERT)switch(this.state){case r.State.UNKNOWN:break;default:this.state=e;}else if(e===r.State.DELETE)switch(this.state){case r.State.INSERT:case r.State.DELETE:break;case r.State.UNKNOWN:case r.State.UPDATE:this.state=e;}else e===r.State.UNKNOWN&&(this.state=e);}}]);return He;}(Ue);r.Feature.Vector=He;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var je=/*#__PURE__*/function(){function je(e){_classCallCheck(this,je);this.data=null,this.keepData=!1,c.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format";}_createClass(je,[{key:"destroy",value:function destroy(){}},{key:"read",value:function read(e){}},{key:"write",value:function write(e){}}]);return je;}();r.Format=je;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Je=/*#__PURE__*/function(_je){_inherits(Je,_je);function Je(e){var _this13;_classCallCheck(this,Je);_this13=_possibleConstructorReturn(this,_getPrototypeOf(Je).call(this,e)),_this13.indent="    ",_this13.space=" ",_this13.newline="\n",_this13.level=0,_this13.pretty=!1,_this13.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),_this13.CLASS_NAME="SuperMap.Format.JSON",_this13.serialize={object:function object(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,s,r,i=["{"];this.level+=1;var a=!1;for(t in e){e.hasOwnProperty(t)&&(s=this.write.apply(this,[t,this.pretty]),r=this.write.apply(this,[e[t],this.pretty]),null!=s&&null!=r&&(a&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),s,":",this.writeSpace(),r),a=!0));}return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("");},array:function array(e){var t,s=["["];this.level+=1;for(var r=0,i=e.length;r<i;++r){null!=(t=this.write.apply(this,[e[r],this.pretty]))&&(r>0&&s.push(","),s.push(this.writeNewline(),this.writeIndent(),t));}return this.level-=1,s.push(this.writeNewline(),this.writeIndent(),"]"),s.join("");},string:function string(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return /["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,s){var r=t[s];return r||(r=s.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16));})+'"':'"'+e+'"';},number:function number(e){return isFinite(e)?String(e):"null";},"boolean":function boolean(e){return String(e);},date:function date(e){function t(e){return e<10?"0"+e:e;}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"';}};return _this13;}_createClass(Je,[{key:"read",value:function read(e,t){var s;if(this.nativeJSON)try{s=JSON.parse(e,t);}catch(e){}return this.keepData&&(this.data=s),s;}},{key:"write",value:function write(e,t){this.pretty=!!t;var s=null,r=_typeof(e);if(this.serialize[r])try{s=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e]);}catch(e){}return s;}},{key:"writeIndent",value:function writeIndent(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t){e.push(this.indent);}return e.join("");}},{key:"writeNewline",value:function writeNewline(){return this.pretty?this.newline:"";}},{key:"writeSpace",value:function writeSpace(){return this.pretty?this.space:"";}}]);return Je;}(je);r.Format.JSON=Je;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ve=/*#__PURE__*/function(){function Ve(e,t,s){_classCallCheck(this,Ve);this.red=e||0==e?e:255,this.green=t||0,this.blue=s||0,this.CLASS_NAME="SuperMap.ServerColor";}_createClass(Ve,[{key:"destroy",value:function destroy(){this.red=null,this.green=null,this.blue=null;}}],[{key:"fromJson",value:function fromJson(e){if(e){var t=new Ve(),s=255;null!==e.red&&(s=Number(e.red)),t.red=s;var r=0;null!==e.green&&(r=Number(e.green)),t.green=r;var i=0;return null!==e.blue&&(i=Number(e.blue)),t.blue=i,t;}}}]);return Ve;}();r.ServerColor=Ve;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qe=/*#__PURE__*/function(){function qe(e){_classCallCheck(this,qe);this.fillBackColor=new Ve(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new Ve(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new Ve(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle";}_createClass(qe,[{key:"destroy",value:function destroy(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return e=c.copyAttributes(e,this);}}],[{key:"fromJson",value:function fromJson(e){if(e)return new qe({fillBackColor:Ve.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:Ve.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:Ve.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID});}}]);return qe;}();r.ServerStyle=qe;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var We=/*#__PURE__*/function(_Le){_inherits(We,_Le);function We(e){var _this14;_classCallCheck(this,We);_this14=_possibleConstructorReturn(this,_getPrototypeOf(We).call(this,e)),_this14.measure=null,e&&c.extend(_assertThisInitialized(_this14),e),_this14.CLASS_NAME="SuperMap.PointWithMeasure";return _this14;}_createClass(We,[{key:"equals",value:function equals(e){var t=!1;if(null!=e){var s=this.x===e.x&&this.y===e.y&&this.measure===e.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),i=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=s||r&&i;}return t;}},{key:"toJson",value:function toJson(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}";}},{key:"destroy",value:function destroy(){this.measure=null,this.x=null,this.y=null;}}],[{key:"fromJson",value:function fromJson(e){if(e)return new We({x:e.x,y:e.y,measure:e.measure});}}]);return We;}(Le);r.PointWithMeasure=We;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ze=/*#__PURE__*/function(_Ne5){_inherits(ze,_Ne5);function ze(e,t){var _this15;_classCallCheck(this,ze);_this15=_possibleConstructorReturn(this,_getPrototypeOf(ze).call(this,e,t)),_this15.id=null,_this15.center=null,_this15.style=null,_this15.length=null,_this15.maxM=null,_this15.minM=null,_this15.parts=null,_this15.points=null,_this15.type=null,_this15.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&c.extend(_assertThisInitialized(_this15),t),_this15.CLASS_NAME="SuperMap.Route",_this15.geometryType="LINEM";return _this15;}_createClass(ze,[{key:"toJson",value:function toJson(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++){e+=","+this.parts[t];}e+="],";}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var s=0,r=this.components.length;s<r;s++){for(var i=0,a=this.components[s].components.length;i<a;i++){e+=this.components[s].components[i].toJson()+",";}}e=e.replace(/,$/g,""),e+="]";}return e=e.replace(/,$/g,""),e+="}";}},{key:"destroy",value:function destroy(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null;}}],[{key:"fromJson",value:function fromJson(e){if(e){var t=e.parts||[],s=e.points||[],r=t.length,i=[];if(!(r>0))return null;for(var a=0,n=0,o=[];a<r;a++){for(var l=0;l<t[a];l++){o.push(We.fromJson(s[n+l]));}n+=t[a],o[0].equals(o[t[a]-1])?i.push(new Re(o)):i.push(new Me(o)),o=[];}return new ze(i,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts});}}}]);return ze;}(Ne);r.Route=ze;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ye=/*#__PURE__*/function(){function Ye(e){_classCallCheck(this,Ye);this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry";}_createClass(Ye,[{key:"destroy",value:function destroy(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null;}},{key:"toGeometry",value:function toGeometry(){var e=this;switch(e.type.toUpperCase()){case A.POINT:return e.toGeoPoint();case A.LINE:return e.toGeoLine();case A.LINEM:return e.toGeoLinem();case A.REGION:return e.toGeoRegion();case A.POINTEPS:return e.toGeoPoint();case A.LINEEPS:return e.toGeoLineEPS();case A.REGIONEPS:return e.toGeoRegionEPS();}}},{key:"toGeoPoint",value:function toGeoPoint(){var e=this.parts||[],t=this.points||[],s=e.length;if(s>0){if(1===s)return new Le(t[0].x,t[0].y);var r=[];for(var _e6=0;_e6<s;_e6++){r.push(new Le(t[_e6].x,t[_e6].y));}return new Pe(r);}return null;}},{key:"toGeoLine",value:function toGeoLine(){var e=this.parts||[],t=this.points||[],s=e.length;if(s>0){if(1===s){var _s6=[];for(var _r2=0;_r2<e[0];_r2++){_s6.push(new Le(t[_r2].x,t[_r2].y));}return _s6[0].equals(_s6[e[0]-1])?new Re(_s6):new Me(_s6);}{var _r3=[];for(var _i5=0;_i5<s;_i5++){var _s7=[];for(var _r4=0;_r4<e[_i5];_r4++){_s7.push(new Le(t[_r4].x,t[_r4].y));}_r3.push(new Me(_s7)),t.splice(0,e[_i5]);}return new De(_r3);}}return null;}},{key:"toGeoLineEPS",value:function toGeoLineEPS(){var e,t,s,r,i,a=this.parts||[],n=this.points||[],o=a.length;if(o>0){if(1===o){for(e=0,s=[];e<a[0];e++){s.push(new Le(n[e].x,n[e].y,n[e].type));}return s[0].equals(s[a[0]-1])?(i=Me.createLineEPS(s),new Re(i)):(i=Me.createLineEPS(s),new Me(i));}for(e=0,r=[];e<o;e++){for(t=0,s=[];t<a[e];t++){s.push(new Le(n[t].x,n[t].y));}i=Me.createLineEPS(s),r.push(new Me(i)),n.splice(0,a[e]);}return new De(r);}return null;}},{key:"toGeoLinem",value:function toGeoLinem(){return ze.fromJson(this);}},{key:"toGeoRegion",value:function toGeoRegion(){var e=this.parts||[],t=this.partTopo||[],s=this.points||[],r=e.length;if(r<=0)return null;var i=[],a=[];if(1==r){for(var _e7=0;_e7<s.length;_e7++){a.push(new Le(s[_e7].x,s[_e7].y));}return i.push(new ke([new Re(a)])),new Fe(i);}var n=[],o=[],l=[],h=[],u=[];for(var _i6=0,_n=0;_i6<r;_i6++){for(var _t7=0;_t7<e[_i6];_t7++){a.push(new Le(s[_n+_t7].x,s[_n+_t7].y));}_n+=e[_i6];var c=new ke([new Re(a)]);a=[],l.push(c),0===t.length&&h.push(c.getBounds()),u.push(1),o.push(c.getArea());}if(Ye.bubbleSort(o,l,t,h),0===t.length){var d=[];for(var _e8=1;_e8<l.length;_e8++){for(var _t8=_e8-1;_t8>=0;_t8--){if(d[_e8]=-1,h[_t8].containsBounds(h[_e8])){u[_e8]=-1*u[_t8],u[_e8]<0&&(d[_e8]=_t8);break;}}}for(var _e9=0;_e9<l.length;_e9++){u[_e9]>0?i.push(l[_e9]):(i[d[_e9]].components=i[d[_e9]].components.concat(l[_e9].components),i.push(""));}}else{i=new Array();for(var _e10=0;_e10<l.length;_e10++){if(t[_e10]&&-1==t[_e10]?n=n.concat(l[_e10].components):(n.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(n),n=[]),i.push(l[_e10])),_e10==r-1){var p=i.length;if(p)i[p-1].components=i[p-1].components.concat(n);else for(var _e11=0,_t9=n.length;_e11<_t9;_e11++){i.push(new ke(n));}}}}return new Fe(i);}},{key:"toGeoRegionEPS",value:function toGeoRegionEPS(){var e=this.parts||[],t=this.partTopo||[],s=this.points||[],r=e.length;if(r<=0)return null;var i,a=[],n=[];if(1==r){for(var o=0;o<s.length;o++){n.push(new Le(s[o].x,s[o].y));}return i=Me.createLineEPS(n),a.push(new ke([new Re(i)])),new Fe(a);}var l=[],h=[],u=[],c=[],d=[];for(var _a=0,_o=0;_a<r;_a++){for(var _t10=0;_t10<e[_a];_t10++){n.push(new Le(s[_o+_t10].x,s[_o+_t10].y));}_o+=e[_a],i=Me.createLineEPS(n);var p=new ke([new Re(i)]);n=[],u.push(p),0===t.length&&c.push(p.getBounds()),d.push(1),h.push(p.getArea());}if(Ye.bubbleSort(h,u,t,c),0===t.length){var m=[];for(var _e12=1;_e12<u.length;_e12++){for(var _t11=_e12-1;_t11>=0;_t11--){if(m[_e12]=-1,c[_t11].containsBounds(c[_e12])){d[_e12]=-1*d[_t11],d[_e12]<0&&(m[_e12]=_t11);break;}}}for(var _e13=0;_e13<u.length;_e13++){d[_e13]>0?a.push(u[_e13]):(a[m[_e13]].components=a[m[_e13]].components.concat(u[_e13].components),a.push(""));}}else{a=new Array();for(var _e14=0;_e14<u.length;_e14++){if(t[_e14]&&-1==t[_e14]?l=l.concat(u[_e14].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(u[_e14])),_e14==r-1){var f=a.length;if(f)a[f-1].components=a[f-1].components.concat(l);else for(var _e15=0,_t12=l.length;_e15<_t12;_e15++){a.push(new ke(l));}}}}return new Fe(a);}}],[{key:"fromJson",value:function fromJson(e){if(e)return new Ye({id:e.id,style:qe.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type});}},{key:"fromGeometry",value:function fromGeometry(e){if(e){var t=0,s=[],r=[],i=null,a=e.components,n=e.CLASS_NAME,o={epsgCode:e.SRID};if(isNaN(e.id)||(t=e.id),"SuperMap.Geometry.LinearRing"!=n&&"SuperMap.Geometry.LineString"!=n&&(e instanceof Pe||e instanceof De)){var _e16=a.length;for(var _t13=0;_t13<_e16;_t13++){var _e17=a[_t13].getVertices().length;s.push(_e17);for(var _s8=0;_s8<_e17;_s8++){r.push(new Le(a[_t13].getVertices()[_s8].x,a[_t13].getVertices()[_s8].y));}}i="SuperMap.Geometry.MultiPoint"==n?A.POINT:A.LINE;}else if(e instanceof Fe){var _e18=a.length;for(var _t14=0;_t14<_e18;_t14++){var _e19=a[_t14].components,_i7=_e19.length;for(var _t15=0;_t15<_i7;_t15++){var _i8=_e19[_t15].getVertices().length+1;s.push(_i8);for(var _s9=0;_s9<_i8-1;_s9++){r.push(new Le(_e19[_t15].getVertices()[_s9].x,_e19[_t15].getVertices()[_s9].y));}r.push(new Le(_e19[_t15].getVertices()[0].x,_e19[_t15].getVertices()[0].y));}}i=A.REGION;}else if(e instanceof ke){var _e20=a.length;for(var _t16=0;_t16<_e20;_t16++){var _e21=a[_t16].getVertices().length+1;s.push(_e21);for(var _s10=0;_s10<_e21-1;_s10++){r.push(new Le(a[_t16].getVertices()[_s10].x,a[_t16].getVertices()[_s10].y));}r.push(new Le(a[_t16].getVertices()[0].x,a[_t16].getVertices()[0].y));}i=A.REGION;}else{var _t17=e.getVertices().length;for(var _s11=0;_s11<_t17;_s11++){r.push(new Le(e.getVertices()[_s11].x,e.getVertices()[_s11].y));}e instanceof Re&&(r.push(new Le(e.getVertices()[0].x,e.getVertices()[0].y)),_t17++),s.push(_t17),i=e instanceof Le?A.POINT:A.LINE;}return new Ye({id:t,style:null,parts:s,points:r,type:i,prjCoordSys:o});}}},{key:"IsClockWise",value:function IsClockWise(e){var t=e.length;if(t<3)return 0;var s=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var r=1;r<t;r++){s+=e[r].y*(e[r-1].x-e[r+1].x);}return .5*s;}},{key:"bubbleSort",value:function bubbleSort(e,t,s,r){for(var i=0;i<e.length;i++){for(var a=0;a<e.length;a++){if(e[i]>e[a]){var n=e[a];e[a]=e[i],e[i]=n;var o=t[a];if(t[a]=t[i],t[i]=o,s&&s.length>0){var l=s[a];s[a]=s[i],s[i]=l;}if(r&&r.length>0){var h=r[a];r[a]=r[i],r[i]=h;}}}}}}]);return Ye;}();r.ServerGeometry=Ye;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xe=/*#__PURE__*/function(_Je){_inherits(Xe,_Je);function Xe(e){var _this16;_classCallCheck(this,Xe);_this16=_possibleConstructorReturn(this,_getPrototypeOf(Xe).call(this,e)),_this16.ignoreExtraDims=!0,_this16.CLASS_NAME="SuperMap.Format.GeoJSON",_this16.parseCoords={point:function point(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new Le(e[0],e[1]);},multipoint:function multipoint(e){for(var t=[],s=null,r=0,i=e.length;r<i;++r){try{s=this.parseCoords.point.apply(this,[e[r]]);}catch(e){throw e;}t.push(s);}return new Pe(t);},linestring:function linestring(e){for(var t=[],s=null,r=0,i=e.length;r<i;++r){try{s=this.parseCoords.point.apply(this,[e[r]]);}catch(e){throw e;}t.push(s);}return new Me(t);},multilinestring:function multilinestring(e){for(var t=[],s=null,r=0,i=e.length;r<i;++r){try{s=this.parseCoords.linestring.apply(this,[e[r]]);}catch(e){throw e;}t.push(s);}return new De(t);},polygon:function polygon(e){for(var t,s,r=[],i=0,a=e.length;i<a;++i){try{s=this.parseCoords.linestring.apply(this,[e[i]]);}catch(e){throw e;}t=new Re(s.components),r.push(t);}return new ke(r);},multipolygon:function multipolygon(e){for(var t=[],s=null,r=0,i=e.length;r<i;++r){try{s=this.parseCoords.polygon.apply(this,[e[r]]);}catch(e){throw e;}t.push(s);}return new Fe(t);},box:function box(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new ke([new Re([new Le(e[0][0],e[0][1]),new Le(e[1][0],e[0][1]),new Le(e[1][0],e[1][1]),new Le(e[0][0],e[1][1]),new Le(e[0][0],e[0][1])])]);}},_this16.extract={feature:function feature(e){var t=this.extract.geometry.apply(this,[e.geometry]),s={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(s.properties.texts=e.geometry.texts,s.properties.textStyle=e.geometry.textStyle),e.fid&&(s.id=e.fid),e.ID&&(s.id=e.ID),s;},geometry:function geometry(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,s=new Ye(e).toGeometry()||e,r=s.geometryType||s.type;return"LinearRing"===r&&(r="LineString"),"LINEM"===r&&(r="MultiLineString"),t=this.extract[r.toLowerCase()].apply(this,[s]),"Collection"===(r="TEXT"===r?"Point":r)?{type:"GeometryCollection",geometries:t}:{type:r,coordinates:t};},point:function point(e){var t=[e.x,e.y];for(var s in e){"x"===s||"y"===s||null===e[s]||isNaN(e[s])||t.push(e[s]);}return t;},text:function text(e){return[e.points[0].x,e.points[0].y];},multipoint:function multipoint(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extract.point.apply(this,[e.components[s]]));}return t;},linestring:function linestring(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extract.point.apply(this,[e.components[s]]));}return t;},multilinestring:function multilinestring(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extract.linestring.apply(this,[e.components[s]]));}return t;},polygon:function polygon(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extract.linestring.apply(this,[e.components[s]]));}return t;},multipolygon:function multipolygon(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extract.polygon.apply(this,[e.components[s]]));}return t;},collection:function collection(e){for(var t=e.components.length,s=new Array(t),r=0;r<t;++r){s[r]=this.extract.geometry.apply(this,[e.components[r]]);}return s;}};return _this16;}_createClass(Xe,[{key:"read",value:function read(e,t,s){t=t||"FeatureCollection";var r=null,i=null;if(i="string"==typeof e?_get(_getPrototypeOf(Xe.prototype),"read",this).call(this,e,s):e){if("string"!=typeof i.type);else if(this.isValidType(i,t))switch(t){case"Geometry":try{r=this.parseGeometry(i);}catch(e){}break;case"Feature":try{(r=this.parseFeature(i)).type="Feature";}catch(e){}break;case"FeatureCollection":switch(r=[],i.type){case"Feature":try{r.push(this.parseFeature(i));}catch(e){r=null;}break;case"FeatureCollection":for(var a=0,n=i.features.length;a<n;++a){try{r.push(this.parseFeature(i.features[a]));}catch(e){r=null;}}break;default:try{var o=this.parseGeometry(i);r.push(new He(o));}catch(e){r=null;}}}}else;return r;}},{key:"write",value:function write(e,t){return _get(_getPrototypeOf(Xe.prototype),"write",this).call(this,this.toGeoJSON(e),t);}},{key:"fromGeoJSON",value:function fromGeoJSON(e,t,s){var _this17=this;var r=this.read(e,t,s);return c.isArray(r)?r.map(function(e){return _this17._toiSevrerFeature(e);}):this._toiSevrerFeature(r);}},{key:"toGeoJSON",value:function toGeoJSON(e){var t={type:null};if(c.isArray(e)){t.type="FeatureCollection";var s=e.length;t.features=new Array(s);for(var r=0;r<s;++r){var i=e[r];if(a(i)){var _e22={};_e22.geometry=i,t.features[r]=this.extract.feature.apply(this,[_e22]);}else t.features[r]=this.extract.feature.apply(this,[i]);}}else if(a(e)){var _s12={};_s12.geometry=e,t=this.extract.feature.apply(this,[_s12]);}else t=this.extract.feature.apply(this,[e]);function a(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points");}return t;}},{key:"isValidType",value:function isValidType(e,t){var s=!1;switch(t){case"Geometry":-1==c.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(s=!0);break;case"FeatureCollection":s=!0;break;default:e.type==t&&(s=!0);}return s;}},{key:"parseFeature",value:function parseFeature(e){var t,s,r,i;r=e.properties?e.properties:{},i=e.geometry&&e.geometry.bbox||e.bbox;try{s=this.parseGeometry(e.geometry);}catch(e){throw e;}return t=new He(s,r),i&&(t.bounds=Ae.fromArray(i)),e.id&&(t.fid=e.id),t;}},{key:"parseGeometry",value:function parseGeometry(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!c.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var s=e.geometries.length,r=new Array(s),i=0;i<s;++i){r[i]=this.parseGeometry.apply(this,[e.geometries[i]]);}t=new Ne(r);}else{if(!c.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates]);}catch(e){throw e;}}return t;}},{key:"createCRSObject",value:function createCRSObject(e){var t=e.layer.projection.toString(),s={};if(t.match(/epsg:/i)){var r=parseInt(t.substring(t.indexOf(":")+1));s=4326==r?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+r}};}return s;}},{key:"_toiSevrerFeature",value:function _toiSevrerFeature(e){var t=e.attributes,s=[],r=[];for(var i in t){s.push(i),r.push(t[i]);}var a={fieldNames:s,fieldValues:r,geometry:Ye.fromGeometry(e.geometry)};return a.geometry.id=e.fid,a;}},{key:"createAttributes",value:function createAttributes(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var s=e.fieldNames,r=e.fieldValues;for(var i in s){t[s[i]]=r[i];}}(e,t);var s=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in e){s.indexOf(r)>-1||(t[r]=e[r]);}return t;}}]);return Xe;}(Je);r.Format.GeoJSON=Xe;r.Format.WKT=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_je2){_inherits(_class,_je2);function _class(e){var _this18;_classCallCheck(this,_class);_this18=_possibleConstructorReturn(this,_getPrototypeOf(_class).call(this,e)),_this18.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},_this18.CLASS_NAME="SuperMap.Format.WKT",_this18.extract={point:function point(e){return e.x+" "+e.y;},multipoint:function multipoint(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push("("+this.extract.point.apply(this,[e.components[s]])+")");}return t.join(",");},linestring:function linestring(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extract.point.apply(this,[e.components[s]]));}return t.join(",");},multilinestring:function multilinestring(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push("("+this.extract.linestring.apply(this,[e.components[s]])+")");}return t.join(",");},polygon:function polygon(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push("("+this.extract.linestring.apply(this,[e.components[s]])+")");}return t.join(",");},multipolygon:function multipolygon(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push("("+this.extract.polygon.apply(this,[e.components[s]])+")");}return t.join(",");},collection:function collection(e){for(var t=[],s=0,r=e.components.length;s<r;++s){t.push(this.extractGeometry.apply(this,[e.components[s]]));}return t.join(",");}},_this18.parse={point:function point(e){var t=a.trim(e).split(this.regExes.spaces);return new He(new Le(t[0],t[1]));},multipoint:function multipoint(e){for(var t,s=a.trim(e).split(","),r=[],i=0,n=s.length;i<n;++i){t=s[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]).geometry);}return new He(new Pe(r));},linestring:function linestring(e){for(var t=a.trim(e).split(","),s=[],r=0,i=t.length;r<i;++r){s.push(this.parse.point.apply(this,[t[r]]).geometry);}return new He(new Me(s));},multilinestring:function multilinestring(e){for(var t,s=a.trim(e).split(this.regExes.parenComma),r=[],i=0,n=s.length;i<n;++i){t=s[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]).geometry);}return new He(new De(r));},polygon:function polygon(e){for(var t,s,r,i=a.trim(e).split(this.regExes.parenComma),n=[],o=0,l=i.length;o<l;++o){t=i[o].replace(this.regExes.trimParens,"$1"),s=this.parse.linestring.apply(this,[t]).geometry,r=new Re(s.components),n.push(r);}return new He(new ke(n));},multipolygon:function multipolygon(e){for(var t,s=a.trim(e).split(this.regExes.doubleParenComma),r=[],i=0,n=s.length;i<n;++i){t=s[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]).geometry);}return new He(new Fe(r));},geometrycollection:function geometrycollection(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=a.trim(e).split("|"),s=[],r=0,i=t.length;r<i;++r){s.push(this.read(t[r]));}return s;}};return _this18;}_createClass(_class,[{key:"read",value:function read(e){var t,s,r;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);return i&&(s=i[1].toLowerCase(),r=i[2],this.parse[s]&&(t=this.parse[s].apply(this,[r]))),t;}},{key:"write",value:function write(e){var t,s,r;e.constructor===Array?(t=e,r=!0):(t=[e],r=!1);var i=[];r&&i.push("GEOMETRYCOLLECTION(");for(var a=0,n=t.length;a<n;++a){r&&a>0&&i.push(","),s=t[a].geometry,i.push(this.extractGeometry(s));}return r&&i.push(")"),i.join("");}},{key:"extractGeometry",value:function extractGeometry(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null;}}]);return _class;}(je);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qe=/*#__PURE__*/function(){function Qe(e){_classCallCheck(this,Qe);var t=this;e=e||{},this.speed=e.speed&&e.speed>=0?e.speed:1,this.frequency=e.speed&&e.frequency>=0?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=t.startTime?e.endTime:+new Date(),this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],t.events=new p(this,null,this.EVENT_TYPES),t.speed=Number(t.speed),t.frequency=Number(t.frequency),t.startTime=Number(t.startTime),t.endTime=Number(t.endTime),t.startTime=Date.parse(new Date(t.startTime)),t.endTime=Date.parse(new Date(t.endTime)),t.currentTime=t.startTime,this.CLASS_NAME="SuperMap.TimeControlBase";}_createClass(Qe,[{key:"updateOptions",value:function updateOptions(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse);}},{key:"start",value:function start(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime));}},{key:"pause",value:function pause(){this.running=!1,this.events.triggerEvent("pause",this.currentTime);}},{key:"stop",value:function stop(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime);}},{key:"toggle",value:function toggle(){this.running?this.pause():this.start();}},{key:"setSpeed",value:function setSpeed(e){return e>=0&&(this.speed=e,!0);}},{key:"getSpeed",value:function getSpeed(){return this.speed;}},{key:"setFrequency",value:function setFrequency(e){return e>=0&&(this.frequency=e,!0);}},{key:"getFrequency",value:function getFrequency(){return this.frequency;}},{key:"setStartTime",value:function setStartTime(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0);}},{key:"getStartTime",value:function getStartTime(){return this.startTime;}},{key:"setEndTime",value:function setEndTime(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0);}},{key:"getEndTime",value:function getEndTime(){return this.endTime;}},{key:"setCurrentTime",value:function setCurrentTime(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0);}},{key:"getCurrentTime",value:function getCurrentTime(){return this.currentTime;}},{key:"setRepeat",value:function setRepeat(e){this.repeat=e;}},{key:"getRepeat",value:function getRepeat(){return this.repeat;}},{key:"setReverse",value:function setReverse(e){this.reverse=e;}},{key:"getReverse",value:function getReverse(){return this.reverse;}},{key:"getRunning",value:function getRunning(){return this.running;}},{key:"destroy",value:function destroy(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null;}},{key:"tick",value:function tick(){}}]);return Qe;}();r.TimeControlBase=Qe;r.TimeFlowControl=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Qe){_inherits(_class2,_Qe);function _class2(e,t){var _this19;_classCallCheck(this,_class2);_this19=_possibleConstructorReturn(this,_getPrototypeOf(_class2).call(this,t));var s=_assertThisInitialized(_this19);s.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),s=this,r=function r(){},i=function i(){return s.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)));};return r.prototype=this.prototype,i.prototype=new r(),i;}),s.update=s.update.bind(s),s.oldTime=s.currentTime,s.CLASS_NAME="SuperMap.TimeFlowControl";return _this19;}_createClass(_class2,[{key:"updateOptions",value:function updateOptions(e){e=e||{},_get(_getPrototypeOf(_class2.prototype),"updateOptions",this).call(this,e);}},{key:"start",value:function start(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick());}},{key:"stop",value:function stop(){_get(_getPrototypeOf(_class2.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId);}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class2.prototype),"destroy",this).call(this),this.oldTime=null,this.callback=null;}},{key:"tick",value:function tick(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency);}},{key:"update",value:function update(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime;}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime);}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start();}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime);}}}]);return _class2;}(Qe);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ke=/*#__PURE__*/function(){function Ke(e,t){_classCallCheck(this,Ke);if(e){var s=e.substr(e.length-1,1);this.serviceUrl="/"===s?e.substr(0,e.length-2):e;}this.options=t||{},this.CLASS_NAME="SuperMap.iManagerServiceBase";}_createClass(Ke,[{key:"request",value:function request(e,t,s,r){(r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(r.withCredentials=!0),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers;var i=_.imanagerToken;return i&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=i),s&&(s=JSON.stringify(s)),C.commit(e,t,s,r).then(function(e){return e.json();});}}]);return Ke;}();r.iManagerServiceBase=Ke;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ze=function Ze(e){_classCallCheck(this,Ze);e=e||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",c.extend(this,e);};r.iManagerCreateNodeParam=Ze;r.iManager=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ke){_inherits(_class3,_Ke);function _class3(e){_classCallCheck(this,_class3);return _possibleConstructorReturn(this,_getPrototypeOf(_class3).call(this,e));}_createClass(_class3,[{key:"load",value:function load(){return this.request("GET",this.serviceUrl+"/web/api/service.json");}},{key:"createIServer",value:function createIServer(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new Ze(e));}},{key:"createIPortal",value:function createIPortal(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new Ze(e));}},{key:"iServerList",value:function iServerList(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json");}},{key:"iPortalList",value:function iPortalList(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json");}},{key:"startNodes",value:function startNodes(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e);}},{key:"stopNodes",value:function stopNodes(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e);}}]);return _class3;}(Ke);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $e=/*#__PURE__*/function(){function $e(e,t){_classCallCheck(this,$e);t=t||{},this.serviceUrl=e,this.serverType=E.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=t.withCredentials||!1,this.crossOrigin=t.crossOrigin,this.headers=t.headers;}_createClass($e,[{key:"request",value:function request(e,t,s){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=this.createCredentialUrl(t),C.commit(e,t,s,r).then(function(e){return e.json();});}},{key:"createCredentialUrl",value:function createCredentialUrl(e){var t=e,s=this.getCredential();if(s){var r=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===r?t+=s.getUrlParameters():t.indexOf("?")>-1&&"?"!==r?t+="&"+s.getUrlParameters():t+="?"+s.getUrlParameters();}return t;}},{key:"getCredential",value:function getCredential(){var e,t=_.getToken(this.serviceUrl);return(e=t?new Ge(t,"token"):null)||(e=(t=this.getKey())?new Ge(t,"key"):null),e;}},{key:"getKey",value:function getKey(){}}]);return $e;}();r.iPortalServiceBase=$e;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var et=function et(e){_classCallCheck(this,et);e=e||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],c.extend(this,e);};r.iPortalQueryParam=et;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var tt=function tt(e){_classCallCheck(this,tt);e=e||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,c.extend(this,e);};r.iPortalQueryResult=tt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var st=/*#__PURE__*/function(_$e){_inherits(st,_$e);function st(e,t){var _this20;_classCallCheck(this,st);_this20=_possibleConstructorReturn(this,_getPrototypeOf(st).call(this,e)),t=t||{},_this20.authorizeSetting=[],_this20.bounds="",_this20.bounds4326="",_this20.checkStatus="",_this20.createTime=0,_this20.description=null,_this20.dirId=null,_this20.epsgCode=0,_this20.heatLevel=0,_this20.id=0,_this20.name="",_this20.personalDirId=null,_this20.resourceId=0,_this20.resourceSubType=null,_this20.resourceType=null,_this20.serviceRootUrlId=null,_this20.tags=null,_this20.thumbnail=null,_this20.updateTime=0,_this20.userName="",_this20.sourceJSON={},c.extend(_assertThisInitialized(_this20),t),_this20.resourceUrl=e+"/web/"+_this20.resourceType.replace("_","").toLowerCase()+"s/"+_this20.resourceId,_this20.withCredentials&&(_this20.resourceUrl=e+"/web/mycontent/"+_this20.resourceType.replace("_","").toLowerCase()+"s/"+_this20.resourceId);return _this20;}_createClass(st,[{key:"load",value:function load(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t;});}},{key:"update",value:function update(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var s={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(s);}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});}}]);return st;}($e);r.iPortalResource=st;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var rt=function rt(e){_classCallCheck(this,rt);e=e||{},this.ids=[],this.entities=[],this.resourceType="",c.extend(this,e);};r.iPortalShareParam=rt;r.iPortal=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_$e2){_inherits(_class4,_$e2);function _class4(e,t){var _this21;_classCallCheck(this,_class4);_this21=_possibleConstructorReturn(this,_getPrototypeOf(_class4).call(this,e,t)),_this21.iportalUrl=e,t=t||{},_this21.withCredentials=t.withCredentials||!1;return _this21;}_createClass(_class4,[{key:"load",value:function load(){return C.get(this.iportalUrl+"/web");}},{key:"queryResources",value:function queryResources(e){if(!(e instanceof et))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !");});var t=this,s=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=new Date().getTime(),this.request("GET",s,e).then(function(e){var s=[];e.content.forEach(function(e){s.push(new st(t.iportalUrl,e));});var r=new tt();return r.content=s,r.total=e.total,r.currentPage=e.currentPage,r.pageSize=e.pageSize,r.aggregations=e.aggregations,r;});}},{key:"updateResourcesShareSetting",value:function updateResourcesShareSetting(e){if(!(e instanceof rt))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !");});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var s={ids:e.ids,entities:e.entities},r=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",r,JSON.stringify(s)).then(function(e){return e;});}}]);return _class4;}($e);r.iPortalShareEntity=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class5(e){_classCallCheck(this,_class5);e=e||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,c.extend(this,e);}return _class5;}();r.iPortalUser=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_$e3){_inherits(_class6,_$e3);function _class6(e){var _this22;_classCallCheck(this,_class6);_this22=_possibleConstructorReturn(this,_getPrototypeOf(_class6).call(this,e)),_this22.iportalUrl=e;return _this22;}_createClass(_class6,[{key:"deleteResources",value:function deleteResources(e){var t=e.resourceType.replace("_","").toLowerCase(),s=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(s=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",s,JSON.stringify(e.ids))):this.request("DELETE",s);}}]);return _class6;}($e);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var it=/*#__PURE__*/function(){function it(e,t){_classCallCheck(this,it);var s=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,c.isArray(e)?(s.urls=e,s.length=e.length,s.totalTimes=s.length,1===s.length?s.url=e[0]:(s.index=parseInt(Math.random()*s.length),s.url=e[s.index])):(s.totalTimes=1,s.url=e),c.isArray(e)&&!s.isServiceSupportPolling()&&(s.url=e[0],s.totalTimes=1),s.serverType=s.serverType||E.ISERVER,t=t||{},this.crossOrigin=t.crossOrigin,this.headers=t.headers,c.extend(this,t),s.isInTheSameDomain=c.isInTheSameDomain(s.url),s.events=new p(s,null,s.EVENT_TYPES,!0),s.eventListeners instanceof Object&&s.events.on(s.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase";}_createClass(it,[{key:"destroy",value:function destroy(){var e=this;c.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null);}},{key:"request",value:function request(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:t.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain;var s=this.getCredential(e.url);if(s){var _t18=e.url.substring(e.url.length-1,e.url.length);e.url.indexOf("?")>-1&&"?"===_t18?e.url+=s.getUrlParameters():e.url.indexOf("?")>-1&&"?"!==_t18?e.url+="&"+s.getUrlParameters():e.url+="?"+s.getUrlParameters();}t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options);}},{key:"getCredential",value:function getCredential(e){var t,s,r=e;switch(this.serverType){case E.IPORTAL:(t=(s=_.getToken(r))?new Ge(s,"token"):null)||(t=(s=_.getKey(r))?new Ge(s,"key"):null);break;case E.ONLINE:t=(s=_.getKey(r))?new Ge(s,"key"):null;break;default:t=(s=_.getToken(r))?new Ge(s,"token"):null;}return t;}},{key:"getUrlCompleted",value:function getUrlCompleted(e){this._processSuccess(e);}},{key:"getUrlFailed",value:function getUrlFailed(e){var t=this;t.totalTimes>0?(t.totalTimes--,t.ajaxPolling()):t._processFailed(e);}},{key:"ajaxPolling",value:function ajaxPolling(){var e=this,t=e.options.url,s=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(s,s.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=c.isInTheSameDomain(t),e._commit(e.options);}},{key:"calculatePollingTimes",value:function calculatePollingTimes(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--;}},{key:"isServiceSupportPolling",value:function isServiceSupportPolling(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME);}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){e=c.transformResult(e),this.events.triggerEvent("processCompleted",{result:e});}},{key:"serviceProcessFailed",value:function serviceProcessFailed(e){var t=(e=c.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t});}},{key:"_commit",value:function _commit(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=c.urlAppend(e.url,c.getParameterString(e.params||{}))),e.params=e.data),C.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e;}).then(function(t){var s=t;("string"==typeof t&&(s=new Je().read(t)),(!s||s.error||s.code>=300&&304!==s.code)&&(s=s&&s.error?{error:s.error}:{error:s}),s.error)?(e.scope?u.bind(e.failure,e.scope):e.failure)(s):(s.succeed=void 0==s.succeed||s.succeed,(e.scope?u.bind(e.success,e.scope):e.success)(s));})["catch"](function(t){(e.scope?u.bind(e.failure,e.scope):e.failure)(t);});}}]);return it;}();r.CommonServiceBase=it;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var at=/*#__PURE__*/function(_it){_inherits(at,_it);function at(e,t){var _this23;_classCallCheck(this,at);_this23=_possibleConstructorReturn(this,_getPrototypeOf(at).call(this,e,t)),_this23.options=t||{},_this23.CLASS_NAME="SuperMap.AddressMatchService";return _this23;}_createClass(at,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(at.prototype),"destroy",this).call(this);}},{key:"code",value:function code(e,t){t instanceof be&&this.processAsync(e,t);}},{key:"decode",value:function decode(e,t){t instanceof xe&&this.processAsync(e,t);}},{key:"processAsync",value:function processAsync(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed});}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){e.succeed&&delete e.succeed,_get(_getPrototypeOf(at.prototype),"serviceProcessCompleted",this).call(this,e);}},{key:"serviceProcessFailed",value:function serviceProcessFailed(e){_get(_getPrototypeOf(at.prototype),"serviceProcessFailed",this).call(this,e);}}]);return at;}(it);r.AddressMatchService=at;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nt=/*#__PURE__*/function(){function nt(e){_classCallCheck(this,nt);this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",c.extend(this,e);}_createClass(nt,[{key:"destroy",value:function destroy(){this.name=null,this.queryType=null;}}]);return nt;}();r.AggQueryBuilderParameter=nt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ot=/*#__PURE__*/function(){function ot(e){_classCallCheck(this,ot);this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",c.extend(this,e);}_createClass(ot,[{key:"destroy",value:function destroy(){var e=this;e.aggName=null,e.aggFieldName=null,e.aggType=null,e.subAgg&&(e.subAgg=null);}}]);return ot;}();r.AggregationParameter=ot;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lt=/*#__PURE__*/function(){function lt(e){_classCallCheck(this,lt);this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters";}_createClass(lt,[{key:"destroy",value:function destroy(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0;}}],[{key:"toObject",value:function toObject(e,t){var s={};for(var r in e){if("dataset"!==r)"latitude"===r||"timeMode"===r||"dayStart"===r||"dayEnd"===r||"hourStart"===r||"hourEnd"===r||"transmittance"===r||"hourInterval"===r||"dayInterval"===r?s[r]=e[r]:t[r]=e[r];}t.parameter=s;}}]);return lt;}();r.AreaSolarRadiationParameters=lt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ht=/*#__PURE__*/function(_it2){_inherits(ht,_it2);function ht(e,t){var _this24;_classCallCheck(this,ht);_this24=_possibleConstructorReturn(this,_getPrototypeOf(ht).call(this,e,t)),_this24.format=T.GEOJSON,_this24.CLASS_NAME="SuperMap.SpatialAnalystBase";return _this24;}_createClass(ht,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ht.prototype),"destroy",this).call(this),this.format=null;}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){var t,s=this;if((e=c.transformResult(e))&&s.format===T.GEOJSON&&"function"==typeof s.toGeoJSONResult)if(c.isArray(e)){for(var r=0;r<e.length;r++){e[r]=s.toGeoJSONResult(e[r]);}t=e;}else t=s.toGeoJSONResult(e);t||(t=e),s.events.triggerEvent("processCompleted",{result:t});}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new Xe();if(e.recordsets)for(var s=0,r=e.recordsets,i=r.length;s<i;s++){r[s].features&&(r[s].features=t.toGeoJSON(r[s].features));}else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e;}}]);return ht;}(it);r.SpatialAnalystBase=ht;r.AreaSolarRadiationService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht){_inherits(_class7,_ht);function _class7(e,t){var _this25;_classCallCheck(this,_class7);_this25=_possibleConstructorReturn(this,_getPrototypeOf(_class7).call(this,e,t)),_this25.CLASS_NAME="SuperMap.AreaSolarRadiationService";return _this25;}_createClass(_class7,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class7.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof lt){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var s={};e instanceof lt&&(t.url+="datasets/"+e.dataset+"/solarradiation"),lt.toObject(e,s);var r=c.toJSON(s);t.url+=".json?returnContent=true",t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}}]);return _class7;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ut=/*#__PURE__*/function(){function ut(e){_classCallCheck(this,ut);this.exp=null,this.value=100,c.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance";}_createClass(ut,[{key:"destroy",value:function destroy(){this.exp=null,this.value=null;}}]);return ut;}();r.BufferDistance=ut;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ct=/*#__PURE__*/function(){function ct(e){_classCallCheck(this,ct);this.endType=j.FLAT,this.leftDistance=new ut(),this.rightDistance=new ut(),this.semicircleLineSegment=4,this.radiusUnit=L.METER,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting";}_createClass(ct,[{key:"destroy",value:function destroy(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null;}}]);return ct;}();r.BufferSetting=ct;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dt=/*#__PURE__*/function(){function dt(e){_classCallCheck(this,dt);this.bufferSetting=new ct(),c.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters";}_createClass(dt,[{key:"destroy",value:function destroy(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null);}}]);return dt;}();r.BufferAnalystParameters=dt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pt=/*#__PURE__*/function(){function pt(e){_classCallCheck(this,pt);this.expectCount=1e3,this.dataset=null,this.dataReturnMode=z.RECORDSET_ONLY,this.deleteExistResultDataset=!0,c.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption";}_createClass(pt,[{key:"destroy",value:function destroy(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null;}}]);return pt;}();r.DataReturnOption=pt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mt=/*#__PURE__*/function(){function mt(e){_classCallCheck(this,mt);this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem";}_createClass(mt,[{key:"destroy",value:function destroy(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return e=c.copyAttributes(e,this);}}]);return mt;}();r.JoinItem=mt;r.LinkItem=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class8(e){_classCallCheck(this,_class8);this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem";}_createClass(_class8,[{key:"destroy",value:function destroy(){var e=this;e.datasourceConnectionInfo instanceof he&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null;}}]);return _class8;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ft=/*#__PURE__*/function(){function ft(e){_classCallCheck(this,ft);this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter";}_createClass(ft,[{key:"destroy",value:function destroy(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var _t19=0,_s13=e.joinItems,_r5=_s13.length;_t19<_r5;_t19++){_s13[_t19].destroy();}e.joinItems=null;}if(e.linkItems){for(var _t20=0,_s14=e.linkItems,_r6=_s14.length;_t20<_r6;_t20++){_s14[_t20].destroy();}e.linkItems=null;}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null;}}]);return ft;}();r.FilterParameter=ft;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var yt=/*#__PURE__*/function(_dt){_inherits(yt,_dt);function yt(e){var _this26;_classCallCheck(this,yt);_this26=_possibleConstructorReturn(this,_getPrototypeOf(yt).call(this,e)),_this26.dataset=null,_this26.filterQueryParameter=new ft(),_this26.resultSetting=new pt(),_this26.isAttributeRetained=!0,_this26.isUnion=!1,c.extend(_assertThisInitialized(_this26),e),_this26.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters";return _this26;}_createClass(yt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(yt.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("bufferSetting"===s)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===s)t.dataReturnOption=e.resultSetting;else{if("dataset"===s)continue;t[s]=e[s];}}}}]);return yt;}(dt);r.DatasetBufferAnalystParameters=yt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var gt=/*#__PURE__*/function(_dt2){_inherits(gt,_dt2);function gt(e){var _this27;_classCallCheck(this,gt);_this27=_possibleConstructorReturn(this,_getPrototypeOf(gt).call(this,e)),_this27.sourceGeometry=null,_this27.sourceGeometrySRID=null,e&&c.extend(_assertThisInitialized(_this27),e),_this27.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters";return _this27;}_createClass(gt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(gt.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("bufferSetting"===s){var r={};for(var i in e.bufferSetting){r[i]=e.bufferSetting[i];}t.analystParameter=r;}else"sourceGeometry"===s?t.sourceGeometry=Ye.fromGeometry(e.sourceGeometry):t[s]=e[s];}}}]);return gt;}(dt);r.GeometryBufferAnalystParameters=gt;r.BufferAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht2){_inherits(_class9,_ht2);function _class9(e,t){var _this28;_classCallCheck(this,_class9);_this28=_possibleConstructorReturn(this,_getPrototypeOf(_class9).call(this,e,t)),_this28.mode=null,t&&c.extend(_assertThisInitialized(_this28),t),_this28.CLASS_NAME="SuperMap.BufferAnalystService";return _this28;}_createClass(_class9,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class9.prototype),"destroy",this).call(this),this.mode=null;}},{key:"processAsync",value:function processAsync(e){var t={},s=this;"/"!==s.url.substr(s.url.length-1,1)&&(s.url+="/"),e instanceof yt?(s.mode="datasets",s.url+="datasets/"+e.dataset+"/buffer",yt.toObject(e,t)):e instanceof gt&&(s.mode="geometry",s.url+="geometry/buffer",gt.toObject(e,t));var r=c.toJSON(t);s.url+=".json?returnContent=true",s.request({method:"POST",data:r,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}]);return _class9;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vt=/*#__PURE__*/function(_it3){_inherits(vt,_it3);function vt(e,t){var _this29;_classCallCheck(this,vt);(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],_this29=_possibleConstructorReturn(this,_getPrototypeOf(vt).call(this,e,t)),_this29.CLASS_NAME="SuperMap.ProcessingServiceBase";return _this29;}_createClass(vt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(vt.prototype),"destroy",this).call(this);}},{key:"getJobs",value:function getJobs(e){var t=this;C.get(t._processUrl(e),null,{proxy:t.proxy}).then(function(e){return e.json();}).then(function(e){t.events.triggerEvent("processCompleted",{result:e});})["catch"](function(e){t.eventListeners.processFailed({error:e});});}},{key:"addJob",value:function addJob(e,t,s,r){var i=this,a=null;t&&t instanceof s&&(a=new Object(),s.toObject(t,a));var n=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},i.headers||{});var o={proxy:i.proxy,headers:n,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,isInTheSameDomain:i.isInTheSameDomain};C.post(i._processUrl(e),JSON.stringify(a),o).then(function(e){return e.json();}).then(function(e){e.succeed?i.serviceProcessCompleted(e,r):i.serviceProcessFailed(e);})["catch"](function(e){i.serviceProcessFailed({error:e});});}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e,t){e=c.transformResult(e),t=t||1e3;var s=this;if(e)var r=setInterval(function(){C.get(s._processUrl(e.newResourceLocation),{_t:new Date().getTime()}).then(function(e){return e.json();}).then(function(e){s.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(r),s.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(r),s.events.triggerEvent("processCompleted",{result:e}));})["catch"](function(e){clearInterval(r),s.events.triggerEvent("processFailed",{error:e});});},t);}},{key:"serviceProcessFailed",value:function serviceProcessFailed(e){_get(_getPrototypeOf(vt.prototype),"serviceProcessFailed",this).call(this,e);}},{key:"_processUrl",value:function _processUrl(e){return-1===e.indexOf(".json")&&(e+=".json"),_.getToken(e)&&(e+="?token="+_.getToken(e)),e;}}]);return vt;}(it);r.ProcessingServiceBase=vt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var St=/*#__PURE__*/function(_vt){_inherits(St,_vt);function St(e,t){var _this30;_classCallCheck(this,St);_this30=_possibleConstructorReturn(this,_getPrototypeOf(St).call(this,e,t)),_this30.url+="/spatialanalyst/buffers",_this30.CLASS_NAME="SuperMap.BuffersAnalystJobsService";return _this30;}_createClass(St,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(St.prototype),"destroy",this).call(this);}},{key:"getBuffersJobs",value:function getBuffersJobs(){_get(_getPrototypeOf(St.prototype),"getJobs",this).call(this,this.url);}},{key:"getBuffersJob",value:function getBuffersJob(e){_get(_getPrototypeOf(St.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addBuffersJob",value:function addBuffersJob(e,t){_get(_getPrototypeOf(St.prototype),"addJob",this).call(this,this.url,e,ve,t);}}]);return St;}(vt);r.BuffersAnalystJobsService=St;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bt=/*#__PURE__*/function(){function bt(e){_classCallCheck(this,bt);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters";}_createClass(bt,[{key:"destroy",value:function destroy(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null;}}]);return bt;}();r.BurstPipelineAnalystParameters=bt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xt=/*#__PURE__*/function(_it4){_inherits(xt,_it4);function xt(e,t){var _this31;_classCallCheck(this,xt);_this31=_possibleConstructorReturn(this,_getPrototypeOf(xt).call(this,e,t)),_this31.format=T.GEOJSON,_this31.CLASS_NAME="SuperMap.NetworkAnalystServiceBase";return _this31;}_createClass(xt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(xt.prototype),"destroy",this).call(this),this.format=null;}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){var t;(e=c.transformResult(e))&&this.format===T.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t});}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){return null;}}]);return xt;}(it);r.NetworkAnalystServiceBase=xt;r.BurstPipelineAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt){_inherits(_class10,_xt);function _class10(e,t){var _this32;_classCallCheck(this,_class10);_this32=_possibleConstructorReturn(this,_getPrototypeOf(_class10).call(this,e,t)),_this32.CLASS_NAME="SuperMap.BurstPipelineAnalystService";return _this32;}_createClass(_class10,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class10.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(!(e instanceof bt))return null;var t,s=this,r=s.url.substr(s.url.length-1,1);if(s.url=s.url+("/"===r?"burstAnalyse":"/burstAnalyse")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}]);return _class10;}(xt);r.ChartFeatureInfoSpecsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it5){_inherits(_class11,_it5);function _class11(e,t){var _this33;_classCallCheck(this,_class11);_this33=_possibleConstructorReturn(this,_getPrototypeOf(_class11).call(this,e,t)),_this33.CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService";return _this33;}_createClass(_class11,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class11.prototype),"destroy",this).call(this),c.reset(this);}},{key:"processAsync",value:function processAsync(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="chartFeatureInfoSpecs.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed});}}]);return _class11;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ct=/*#__PURE__*/function(){function Ct(e){_classCallCheck(this,Ct);this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,c.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter";}_createClass(Ct,[{key:"destroy",value:function destroy(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null;}},{key:"toJson",value:function toJson(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}";}}]);return Ct;}();r.ChartQueryFilterParameter=Ct;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _t=/*#__PURE__*/function(){function _t(e){_classCallCheck(this,_t);this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,c.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters";}_createClass(_t,[{key:"destroy",value:function destroy(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null;}},{key:"getVariablesJson",value:function getVariablesJson(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],s=this.chartLayerNames.length,r=0;r<s;r++){t.push('"'+this.chartLayerNames[r]+'"');}e+='"chartLayerNames":'+("["+t.join(",")+"]")+",";}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var i=[],a=this.chartQueryFilterParameters.length,n=0;n<a;n++){var o=this.chartQueryFilterParameters[n];o instanceof Ct&&i.push(o.toJson());}var l="["+i.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}");}return e="{"+e+"}";}}]);return _t;}();r.ChartQueryParameters=_t;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Tt=/*#__PURE__*/function(){function Tt(e){_classCallCheck(this,Tt);e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=A.LINE,this.queryOption=w.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters");}_createClass(Tt,[{key:"destroy",value:function destroy(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,s=e.queryParams,r=s.length;t<r;t++){s[t].destroy();}e.queryParams=null;}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null;}}]);return Tt;}();r.QueryParameters=Tt;r.ChartQueryService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it6){_inherits(_class12,_it6);function _class12(e,t){var _this34;_classCallCheck(this,_class12);_this34=_possibleConstructorReturn(this,_getPrototypeOf(_class12).call(this,e,t)),t=t||{},_this34.returnContent=null,_this34.format=T.GEOJSON,c.extend(_assertThisInitialized(_this34),t);var s,r=_assertThisInitialized(_this34);t.format&&(r.format=t.format.toUpperCase()),r.url&&(s=r.url.substr(r.url.length-1,1),r.url+="/"===s?"queryResults.json?":"/queryResults.json?",_this34.CLASS_NAME="SuperMap.ChartQueryService");return _this34;}_createClass(_class12,[{key:"destroy",value:function destroy(){it.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null;}},{key:"processAsync",value:function processAsync(e){if(e instanceof _t){var t,s=this;s.returnContent=e.returnContent,t=e.getVariablesJson(),s.returnContent&&(s.url+="returnContent="+s.returnContent),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){if((e=c.transformResult(e))&&e.recordsets&&this.format===T.GEOJSON)for(var t=0,s=e.recordsets,r=s.length;t<r;t++){if(s[t].features){var i=new Xe();s[t].features=i.toGeoJSON(s[t].features);}}this.events.triggerEvent("processCompleted",{result:e});}},{key:"getQueryParameters",value:function getQueryParameters(e){return new Tt({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent});}}]);return _class12;}(it);r.ClipParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class13(e){_classCallCheck(this,_class13);this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter";}_createClass(_class13,[{key:"destroy",value:function destroy(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null;}},{key:"toJSON",value:function toJSON(){return c.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Ye.fromGeometry(this.clipRegion)});}}]);return _class13;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Et=/*#__PURE__*/function(){function Et(e){_classCallCheck(this,Et);e=e||{},this.elevation=null,this.color=null,c.extend(this,e);var t=this.color;t&&(this.color=new Ve(t.red,t.green,t.blue)),this.CLASS_NAME="SuperMap.ColorDictionary";}_createClass(Et,[{key:"destroy",value:function destroy(){c.reset(this);}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return e=c.copyAttributes(e,this);}}]);return Et;}();r.ColorDictionary=Et;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var At=/*#__PURE__*/function(){function At(e){_classCallCheck(this,At);e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting");}_createClass(At,[{key:"destroy",value:function destroy(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null;}}]);return At;}();r.TransportationAnalystResultSetting=At;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wt=/*#__PURE__*/function(){function wt(e){_classCallCheck(this,wt);e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new At(),c.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter");}_createClass(wt,[{key:"destroy",value:function destroy(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints){e.barrierPoints[t].destroy();}e.barrierPoints=null;}}]);return wt;}();r.TransportationAnalystParameter=wt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nt=/*#__PURE__*/function(){function Nt(e){_classCallCheck(this,Nt);this.isAnalyzeById=!1,this.nodes=null,this.parameter=new wt(),c.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters";}_createClass(Nt,[{key:"destroy",value:function destroy(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null);}}]);return Nt;}();r.ComputeWeightMatrixParameters=Nt;r.ComputeWeightMatrixService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt2){_inherits(_class14,_xt2);function _class14(e,t){var _this35;_classCallCheck(this,_class14);_this35=_possibleConstructorReturn(this,_getPrototypeOf(_class14).call(this,e,t)),_this35.CLASS_NAME="SuperMap.ComputeWeightMatrixService";return _this35;}_createClass(_class14,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class14.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Nt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"weightmatrix":"/weightmatrix")+".json?",t={parameter:c.toJSON(e.parameter),nodes:s.getJson(e.isAnalyzeById,e.nodes)},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJson",value:function getJson(e,t){var s="[",r=t?t.length:0;if(!1===e)for(var _e23=0;_e23<r;_e23++){_e23>0&&(s+=","),s+='{"x":'+t[_e23].x+',"y":'+t[_e23].y+"}";}else if(!0===e)for(var _e24=0;_e24<r;_e24++){_e24>0&&(s+=","),s+=t[_e24];}return s+="]";}}]);return _class14;}(xt);r.DataFlowService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it7){_inherits(_class15,_it7);function _class15(e,t){var _this36;_classCallCheck(this,_class15);(t=t||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],_this36=_possibleConstructorReturn(this,_getPrototypeOf(_class15).call(this,e,t)),_this36.geometry=null,_this36.prjCoordSys=null,_this36.excludeField=null,"/"!==_this36.url.substr(_this36.url.length-1,1)&&(_this36.url+="/"),c.extend(_assertThisInitialized(_this36),t),_this36.CLASS_NAME="SuperMap.DataFlowService";return _this36;}_createClass(_class15,[{key:"initBroadcast",value:function initBroadcast(){var e=this;return this.broadcastWebSocket=this._connect(e.url+"broadcast"),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t);},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket.isOpen=!1,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t);},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t);},this;}},{key:"broadcast",value:function broadcast(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed");}},{key:"initSubscribe",value:function initSubscribe(){var e=this;return this.subscribeWebSocket=this._connect(this.url+"subscribe"),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t);},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t);},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t);},this;}},{key:"setExcludeField",value:function setExcludeField(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this;}},{key:"setGeometry",value:function setGeometry(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this;}},{key:"unSubscribe",value:function unSubscribe(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null);}},{key:"unBroadcast",value:function unBroadcast(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null);}},{key:"destroy",value:function destroy(){it.prototype.destroy.apply(this,arguments),this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe();}},{key:"_getFilterParams",value:function _getFilterParams(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return c.toJSON(e);}},{key:"_onMessage",value:function _onMessage(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e);}var s=JSON.parse(e.data);e.featureResult=s,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e);}},{key:"_connect",value:function _connect(e){return e=this._appendCredentials(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null);}},{key:"_appendCredentials",value:function _appendCredentials(e){var t=_.getToken(e);return t&&(e+="?token="+t),e;}}]);return _class15;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pt=/*#__PURE__*/function(){function Pt(e){_classCallCheck(this,Pt);e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,c.extend(this,e);var t=this.bounds;t&&(this.bounds=new Ae(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo";}_createClass(Pt,[{key:"destroy",value:function destroy(){c.reset(this);}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e;}}]);return Pt;}();r.DatasetInfo=Pt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ot=/*#__PURE__*/function(){function Ot(e){_classCallCheck(this,Ot);this.operation=J.UNION,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters";}_createClass(Ot,[{key:"destroy",value:function destroy(){this.operation=null;}}]);return Ot;}();r.OverlayAnalystParameters=Ot;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Lt=/*#__PURE__*/function(_Ot){_inherits(Lt,_Ot);function Lt(e){var _this37;_classCallCheck(this,Lt);_this37=_possibleConstructorReturn(this,_getPrototypeOf(Lt).call(this,e)),_this37.operateDataset=null,_this37.operateDatasetFields=[],_this37.operateDatasetFilter=new ft(),_this37.operateRegions=[],_this37.sourceDataset=null,_this37.sourceDatasetFields=[],_this37.sourceDatasetFilter=new ft(),_this37.tolerance=0,_this37.resultSetting=new pt(),c.extend(_assertThisInitialized(_this37),e),_this37.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters";return _this37;}_createClass(Lt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Lt.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var t=0,s=e.operateRegions,r=s.length;t<r;t++){s[t].destroy();}e.operateRegions=null;}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("sourceDataset"!==s)if("operateRegions"===s){t.operateRegions=[];var r=e.operateRegions;for(var i in r){r.hasOwnProperty(i)&&(t.operateRegions[i]=Ye.fromGeometry(r[i]));}}else"resultSetting"===s?t.dataReturnOption=e.resultSetting:t[s]=e[s];}}}]);return Lt;}(Ot);r.DatasetOverlayAnalystParameters=Lt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Mt=/*#__PURE__*/function(){function Mt(e){_classCallCheck(this,Mt);this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=q.BSPLINE,this.smoothness=0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting";}_createClass(Mt,[{key:"destroy",value:function destroy(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null;}},{key:"toJSON",value:function toJSON(){var e="'datumValue':"+c.toJSON(this.datumValue);if(e+=",'interval':"+c.toJSON(this.interval),e+=",'resampleTolerance':"+c.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+c.toJSON(this.smoothMethod),e+=",'smoothness':"+c.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+c.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof we&&this.clipRegion.components&&(t=Ye.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+c.toJSON(t);}return"{"+e+"}";}}]);return Mt;}();r.SurfaceAnalystParametersSetting=Mt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var It=/*#__PURE__*/function(){function It(e){_classCallCheck(this,It);this.resolution=0,this.extractParameter=new Mt(),this.resultSetting=new pt(),this.surfaceAnalystMethod=W.ISOLINE,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters";}_createClass(It,[{key:"destroy",value:function destroy(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null;}}]);return It;}();r.SurfaceAnalystParameters=It;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Rt=/*#__PURE__*/function(_It){_inherits(Rt,_It);function Rt(e){var _this38;_classCallCheck(this,Rt);_this38=_possibleConstructorReturn(this,_getPrototypeOf(Rt).call(this,e)),_this38.dataset=null,_this38.filterQueryParameter=new ft(),_this38.zValueFieldName=null,e&&c.extend(_assertThisInitialized(_this38),e),_this38.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters";return _this38;}_createClass(Rt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Rt.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("filterQueryParameter"===s&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===s)e.extractParameter.clipRegion instanceof we&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=Ye.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===s)continue;if("surfaceAnalystMethod"===s)continue;t[s]=e[s];}}}}]);return Rt;}(It);r.DatasetSurfaceAnalystParameters=Rt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Dt=/*#__PURE__*/function(){function Dt(e){_classCallCheck(this,Dt);e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,c.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters");}_createClass(Dt,[{key:"destroy",value:function destroy(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null;}}]);return Dt;}();r.ThiessenAnalystParameters=Dt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ft=/*#__PURE__*/function(_Dt){_inherits(Ft,_Dt);function Ft(e){var _this39;_classCallCheck(this,Ft);_this39=_possibleConstructorReturn(this,_getPrototypeOf(Ft).call(this,e)),_this39.filterQueryParameter=null,_this39.dataset=null,e&&c.extend(_assertThisInitialized(_this39),e),_this39.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters";return _this39;}_createClass(Ft,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ft.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"clipRegion"===s?t.clipRegion=Ye.fromGeometry(e.clipRegion):t[s]=e[s];}}}]);return Ft;}(Dt);r.DatasetThiessenAnalystParameters=Ft;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var kt=/*#__PURE__*/function(){function kt(e){_classCallCheck(this,kt);this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters";}_createClass(kt,[{key:"destroy",value:function destroy(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"dataset"!==s&&(t[s]=e[s]);}}}]);return kt;}();r.DensityKernelAnalystParameters=kt;r.DensityAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht3){_inherits(_class16,_ht3);function _class16(e,t){var _this40;_classCallCheck(this,_class16);_this40=_possibleConstructorReturn(this,_getPrototypeOf(_class16).call(this,e,t)),_this40.mode=null,t&&c.extend(_assertThisInitialized(_this40),t),_this40.CLASS_NAME="SuperMap.DensityAnalystService";return _this40;}_createClass(_class16,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class16.prototype),"destroy",this).call(this),this.mode=null;}},{key:"processAsync",value:function processAsync(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var s=new Object();e instanceof kt&&(t.url+="datasets/"+e.dataset+"/densityanalyst/kernel",t.mode="kernel"),kt.toObject(e,s);var r=c.toJSON(s);t.url+=".json?returnContent=true",t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}]);return _class16;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Bt=/*#__PURE__*/function(){function Bt(e){_classCallCheck(this,Bt);this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Y.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters";}_createClass(Bt,[{key:"destroy",value:function destroy(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null;}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t,s,r;if(e.editType===Y.DELETE){if(null===e.IDs)return;r={ids:e.IDs};}else if(r=[],e.features){s=e.features.length;for(var i=0;i<s;i++){(t=e.features[i]).geometry=Ye.fromGeometry(t.geometry),r.push(t);}}return c.toJSON(r);}}]);return Bt;}();r.EditFeaturesParameters=Bt;r.EditFeaturesService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it8){_inherits(_class17,_it8);function _class17(e,t){var _this41;_classCallCheck(this,_class17);var s;_this41=_possibleConstructorReturn(this,_getPrototypeOf(_class17).call(this,e,t)),_this41.returnContent=!1,_this41.isUseBatch=!1,t&&c.extend(_assertThisInitialized(_this41),t),s=_this41.url.substr(_this41.url.length-1,1),_this41.url+="/"==s?"features.json?":"/features.json?",_this41.CLASS_NAME="SuperMap.EditFeaturesService";return _this41;}_createClass(_class17,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class17.prototype),"destroy",this).call(this),this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null;}},{key:"processAsync",value:function processAsync(e){if(e instanceof Bt){var t=this,s="POST",r="",i=e.editType,a=null;t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,a=Bt.toJsonParameters(e),i===Y.DELETE?(r=c.toJSON(e.IDs),t.url+="ids="+r,s="DELETE",a=r):i===Y.UPDATE?s="PUT":(t.isUseBatch&&(t.url+="isUseBatch="+t.isUseBatch,t.returnContent=!1),t.returnContent&&(t.url+="returnContent="+t.returnContent,s="POST")),t.request({method:s,data:a,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}}]);return _class17;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gt=/*#__PURE__*/function(){function Gt(e){_classCallCheck(this,Gt);this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters";}_createClass(Gt,[{key:"destroy",value:function destroy(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null;}}]);return Gt;}();r.FacilityAnalyst3DParameters=Gt;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ut=/*#__PURE__*/function(_Gt){_inherits(Ut,_Gt);function Ut(e){var _this42;_classCallCheck(this,Ut);_this42=_possibleConstructorReturn(this,_getPrototypeOf(Ut).call(this,e)),_this42.CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters";return _this42;}_createClass(Ut,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ut.prototype),"destroy",this).call(this);}}]);return Ut;}(Gt);r.FacilityAnalystSinks3DParameters=Ut;r.FacilityAnalystSinks3DService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it9){_inherits(_class18,_it9);function _class18(e,t){var _this43;_classCallCheck(this,_class18);_this43=_possibleConstructorReturn(this,_getPrototypeOf(_class18).call(this,e,t)),_this43.CLASS_NAME="SuperMap.FacilityAnalystSinks3DService";return _this43;}_createClass(_class18,[{key:"destroy",value:function destroy(){it.prototype.destroy.apply(this,arguments);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Ut){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"sinks":"/sinks")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}}]);return _class18;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ht=/*#__PURE__*/function(_Gt2){_inherits(Ht,_Gt2);function Ht(e){var _this44;_classCallCheck(this,Ht);_this44=_possibleConstructorReturn(this,_getPrototypeOf(Ht).call(this,e)),_this44.CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters";return _this44;}_createClass(Ht,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ht.prototype),"destroy",this).call(this);}}]);return Ht;}(Gt);r.FacilityAnalystSources3DParameters=Ht;r.FacilityAnalystSources3DService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it10){_inherits(_class19,_it10);function _class19(e,t){var _this45;_classCallCheck(this,_class19);_this45=_possibleConstructorReturn(this,_getPrototypeOf(_class19).call(this,e,t)),_this45.CLASS_NAME="SuperMap.FacilityAnalystSources3DService";return _this45;}_createClass(_class19,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class19.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Ht){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"sources":"/sources")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}}]);return _class19;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var jt=/*#__PURE__*/function(){function jt(e){_classCallCheck(this,jt);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,c.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters";}_createClass(jt,[{key:"destroy",value:function destroy(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null;}}]);return jt;}();r.FacilityAnalystStreamParameters=jt;r.FacilityAnalystStreamService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt3){_inherits(_class20,_xt3);function _class20(e,t){var _this46;_classCallCheck(this,_class20);_this46=_possibleConstructorReturn(this,_getPrototypeOf(_class20).call(this,e,t)),_this46.CLASS_NAME="SuperMap.FacilityAnalystStreamService";return _this46;}_createClass(_class20,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class20.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof jt){var t,s=this,r=s.url.substr(s.url.length-1,1);if(0===e.queryType)s.url=s.url+("/"===r?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?";else{if(1!==e.queryType)return;s.url=s.url+("/"===r?"downstreamcirticalfaclilities":"/downstreamcirticalfaclilities")+".json?";}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed}));}}}]);return _class20;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Jt=/*#__PURE__*/function(_Gt3){_inherits(Jt,_Gt3);function Jt(e){var _this47;_classCallCheck(this,Jt);_this47=_possibleConstructorReturn(this,_getPrototypeOf(Jt).call(this,e)),_this47.CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters";return _this47;}_createClass(Jt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Jt.prototype),"destroy",this).call(this);}}]);return Jt;}(Gt);r.FacilityAnalystTracedown3DParameters=Jt;r.FacilityAnalystTracedown3DService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it11){_inherits(_class21,_it11);function _class21(e,t){var _this48;_classCallCheck(this,_class21);_this48=_possibleConstructorReturn(this,_getPrototypeOf(_class21).call(this,e,t)),_this48.CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService";return _this48;}_createClass(_class21,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class21.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Jt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"tracedownresult":"/tracedownresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}}]);return _class21;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Vt=/*#__PURE__*/function(_Gt4){_inherits(Vt,_Gt4);function Vt(e){var _this49;_classCallCheck(this,Vt);_this49=_possibleConstructorReturn(this,_getPrototypeOf(Vt).call(this,e)),_this49.CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters";return _this49;}_createClass(Vt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Vt.prototype),"destroy",this).call(this);}}]);return Vt;}(Gt);r.FacilityAnalystTraceup3DParameters=Vt;r.FacilityAnalystTraceup3DService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it12){_inherits(_class22,_it12);function _class22(e,t){var _this50;_classCallCheck(this,_class22);_this50=_possibleConstructorReturn(this,_getPrototypeOf(_class22).call(this,e,t)),_this50.CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService";return _this50;}_createClass(_class22,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class22.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Vt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"traceupresult":"/traceupresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}}]);return _class22;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qt=/*#__PURE__*/function(_Gt5){_inherits(qt,_Gt5);function qt(e){var _this51;_classCallCheck(this,qt);_this51=_possibleConstructorReturn(this,_getPrototypeOf(qt).call(this,e)),e=e||{},_this51.sourceNodeIDs=null,c.extend(_assertThisInitialized(_this51),e),_this51.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters";return _this51;}_createClass(qt,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(qt.prototype),"destroy",this).call(this),this.sourceNodeIDs=null;}}]);return qt;}(Gt);r.FacilityAnalystUpstream3DParameters=qt;r.FacilityAnalystUpstream3DService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it13){_inherits(_class23,_it13);function _class23(e,t){var _this52;_classCallCheck(this,_class23);_this52=_possibleConstructorReturn(this,_getPrototypeOf(_class23).call(this,e,t)),_this52.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService";return _this52;}_createClass(_class23,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class23.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof qt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}}]);return _class23;}(it);r.FilterAggParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ot){_inherits(_class24,_ot);function _class24(e){var _this53;_classCallCheck(this,_class24);_this53=_possibleConstructorReturn(this,_getPrototypeOf(_class24).call(this,e)),_this53.filterParam=null,_this53.aggType=ne.FILTER,_this53.CLASS_NAME="SuperMap.FilterAggParameter",c.extend(_assertThisInitialized(_this53),e);return _this53;}_createClass(_class24,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class24.prototype),"destroy",this).call(this),this.filterParam&&(this.filterParam=null);}}]);return _class24;}(ot);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Wt=/*#__PURE__*/function(){function Wt(e){_classCallCheck(this,Wt);this.datasource=null,this.dataset=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters";}_createClass(Wt,[{key:"destroy",value:function destroy(){this.datasource=null,this.dataset=null;}}]);return Wt;}();r.FieldParameters=Wt;r.FieldStatisticsParameters=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Wt){_inherits(_class25,_Wt);function _class25(e){var _this54;_classCallCheck(this,_class25);_this54=_possibleConstructorReturn(this,_getPrototypeOf(_class25).call(this,e)),_this54.fieldName=null,_this54.statisticMode=null,e&&c.extend(_assertThisInitialized(_this54),e),_this54.CLASS_NAME="SuperMap.FieldStatisticsParameters";return _this54;}_createClass(_class25,[{key:"destroy",value:function destroy(){this.fieldName=null,this.statisticMode=null;}}]);return _class25;}(Wt);r.FieldStatisticService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it14){_inherits(_class26,_it14);function _class26(e,t){var _this55;_classCallCheck(this,_class26);_this55=_possibleConstructorReturn(this,_getPrototypeOf(_class26).call(this,e,t)),_this55.datasource=null,_this55.dataset=null,_this55.field=null,_this55.statisticMode=null,t&&c.extend(_assertThisInitialized(_this55),t),_this55.CLASS_NAME="SuperMap.FieldStatisticService";return _this55;}_createClass(_class26,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class26.prototype),"destroy",this).call(this),this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null;}},{key:"processAsync",value:function processAsync(){var e=this,t=e.url.substr(e.url.length-1,1),s="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url+="/"==t?s+".json?":"/"+s+".json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed});}}]);return _class26;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var zt=/*#__PURE__*/function(){function zt(e){_classCallCheck(this,zt);this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new wt(),c.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters";}_createClass(zt,[{key:"destroy",value:function destroy(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null);}}]);return zt;}();r.FindClosestFacilitiesParameters=zt;r.FindClosestFacilitiesService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt4){_inherits(_class27,_xt4);function _class27(e,t){var _this56;_classCallCheck(this,_class27);_this56=_possibleConstructorReturn(this,_getPrototypeOf(_class27).call(this,e,t)),_this56.CLASS_NAME="SuperMap.FindClosestFacilitiesService";return _this56;}_createClass(_class27,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class27.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof zt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"closestfacility":"/closestfacility")+".json?",t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:c.toJSON(e.parameter),event:c.toJSON(e.event),facilities:s.getJson(e.isAnalyzeById,e.facilities)},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJson",value:function getJson(e,t){var s="[",r=t?t.length:0;if(!1===e)for(var _e25=0;_e25<r;_e25++){_e25>0&&(s+=","),s+='{"x":'+t[_e25].x+',"y":'+t[_e25].y+"}";}else if(!0===e)for(var _e26=0;_e26<r;_e26++){_e26>0&&(s+=","),s+=t[_e26];}return s+="]";}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e||!e.facilityPathList)return e;var t=new Xe();return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e;}),e;}}]);return _class27;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Yt=/*#__PURE__*/function(){function Yt(e){_classCallCheck(this,Yt);this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,c.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters";}_createClass(Yt,[{key:"destroy",value:function destroy(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,s=e.supplyCenters,r=s.length;t<r;t++){s[t].destroy();}e.supplyCenters=null;}}}]);return Yt;}();r.FindLocationParameters=Yt;r.FindLocationService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt5){_inherits(_class28,_xt5);function _class28(e,t){var _this57;_classCallCheck(this,_class28);_this57=_possibleConstructorReturn(this,_getPrototypeOf(_class28).call(this,e,t)),_this57.CLASS_NAME="SuperMap.FindLocationService";return _this57;}_createClass(_class28,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class28.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Yt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"location":"/location")+".json?",t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:c.toJSON(e.mapParameter),supplyCenters:s.getCentersJson(e.supplyCenters)},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getCentersJson",value:function getCentersJson(e){for(var t="[",s=e?e.length:0,r=0;r<s;r++){r>0&&(t+=","),t+=c.toJSON(e[r]);}return t+="]";}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e)return null;var t=new Xe();return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e;}}]);return _class28;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xt=/*#__PURE__*/function(){function Xt(e){_classCallCheck(this,Xt);this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new wt(),c.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters";}_createClass(Xt,[{key:"destroy",value:function destroy(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null);}}]);return Xt;}();r.FindMTSPPathsParameters=Xt;r.FindMTSPPathsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt6){_inherits(_class29,_xt6);function _class29(e,t){var _this58;_classCallCheck(this,_class29);_this58=_possibleConstructorReturn(this,_getPrototypeOf(_class29).call(this,e,t)),_this58.CLASS_NAME="SuperMap.FindMTSPPathsService";return _this58;}_createClass(_class29,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class29.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Xt){var t,s=this,r=s.getJson(e.isAnalyzeById,e.centers),i=s.getJson(e.isAnalyzeById,e.nodes);s.url=s.url+"/mtsppath.json?",t={centers:r,nodes:i,parameter:c.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJson",value:function getJson(e,t){var s="[",r=t?t.length:0;if(!1===e)for(var _e27=0;_e27<r;_e27++){_e27>0&&(s+=","),s+='{"x":'+t[_e27].x+',"y":'+t[_e27].y+"}";}else if(!0===e)for(var _e28=0;_e28<r;_e28++){_e28>0&&(s+=","),s+=t[_e28];}return s+="]";}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e||!e.pathList)return null;var t=new Xe();return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e;}),e;}}]);return _class29;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qt=/*#__PURE__*/function(){function Qt(e){_classCallCheck(this,Qt);this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new wt(),c.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters";}_createClass(Qt,[{key:"destroy",value:function destroy(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null);}}]);return Qt;}();r.FindPathParameters=Qt;r.FindPathService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt7){_inherits(_class30,_xt7);function _class30(e,t){var _this59;_classCallCheck(this,_class30);_this59=_possibleConstructorReturn(this,_getPrototypeOf(_class30).call(this,e,t)),_this59.CLASS_NAME="SuperMap.FindPathService";return _this59;}_createClass(_class30,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class30.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Qt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"path":"/path")+".json?",t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:c.toJSON(e.parameter),nodes:s.getJson(e.isAnalyzeById,e.nodes)},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJson",value:function getJson(e,t){var s="[",r=t?t.length:0;if(!1===e)for(var _e29=0;_e29<r;_e29++){_e29>0&&(s+=","),s+='{"x":'+t[_e29].x+',"y":'+t[_e29].y+"}";}else if(!0===e)for(var _e30=0;_e30<r;_e30++){_e30>0&&(s+=","),s+=t[_e30];}return s+="]";}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new Xe();return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures));}),e;}}]);return _class30;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Kt=/*#__PURE__*/function(){function Kt(e){_classCallCheck(this,Kt);this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new wt(),c.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters";}_createClass(Kt,[{key:"destroy",value:function destroy(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null);}}]);return Kt;}();r.FindServiceAreasParameters=Kt;r.FindServiceAreasService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt8){_inherits(_class31,_xt8);function _class31(e,t){var _this60;_classCallCheck(this,_class31);_this60=_possibleConstructorReturn(this,_getPrototypeOf(_class31).call(this,e,t)),_this60.CLASS_NAME="SuperMap.FindServiceAreasService";return _this60;}_createClass(_class31,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class31.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Kt){var t,s=this,r=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===r?"servicearea":"/servicearea")+".json?",t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:c.toJSON(e.parameter),centers:s.getJson(e.isAnalyzeById,e.centers),weights:s.getJson(!0,e.weights)},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJson",value:function getJson(e,t){var s="[",r=t?t.length:0;if(!1===e)for(var _e31=0;_e31<r;_e31++){_e31>0&&(s+=","),s+='{"x":'+t[_e31].x+',"y":'+t[_e31].y+"}";}else if(!0===e)for(var _e32=0;_e32<r;_e32++){_e32>0&&(s+=","),s+=t[_e32];}return s+="]";}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e||!e.serviceAreaList)return e;var t=new Xe();return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e;}),e;}}]);return _class31;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Zt=/*#__PURE__*/function(){function Zt(e){_classCallCheck(this,Zt);this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new wt(),c.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters";}_createClass(Zt,[{key:"destroy",value:function destroy(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null);}}]);return Zt;}();r.FindTSPPathsParameters=Zt;r.FindTSPPathsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt9){_inherits(_class32,_xt9);function _class32(e,t){var _this61;_classCallCheck(this,_class32);_this61=_possibleConstructorReturn(this,_getPrototypeOf(_class32).call(this,e,t)),_this61.CLASS_NAME="SuperMap.FindTSPPathsService";return _this61;}_createClass(_class32,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class32.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Zt){var t,s=this,i=s.url.substr(s.url.length-1,1);s.url=s.url+("/"===i?"tsppath":"/tsppath")+".json?",t={parameter:r.Util.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:s.getNodesJson(e)},s.request({method:"GET",params:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getNodesJson",value:function getNodesJson(e){var t,s,r,i,a="";if(!1===e.isAnalyzeById){for(t="[",s=0,r=(i=e.nodes).length;s<r;s++){s>0&&(t+=","),t+='{"x":'+i[s].x+',"y":'+i[s].y+"}";}a+=t+="]";}else if(!0===e.isAnalyzeById){var _t21="[",_s15=e.nodes,_r7=_s15.length;for(var _e33=0;_e33<_r7;_e33++){_e33>0&&(_t21+=","),_t21+=_s15[_e33];}a+=_t21+="]";}return a;}},{key:"toGeoJSONResult",value:function toGeoJSONResult(e){if(!e||!e.tspPathList)return null;var t=new Xe();return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures));}),e;}}]);return _class32;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $t=/*#__PURE__*/function(){function $t(e){_classCallCheck(this,$t);this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters";}_createClass($t,[{key:"destroy",value:function destroy(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null);}}]);return $t;}();r.GenerateSpatialDataParameters=$t;r.GenerateSpatialDataService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht4){_inherits(_class33,_ht4);function _class33(e,t){var _this62;_classCallCheck(this,_class33);_this62=_possibleConstructorReturn(this,_getPrototypeOf(_class33).call(this,e,t)),_this62.CLASS_NAME="SuperMap.GenerateSpatialDataService";return _this62;}_createClass(_class33,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class33.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof $t){var t,s=this;t=s.getJsonParameters(e),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJsonParameters",value:function getJsonParameters(e){var t,s="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?s+".json":"/"+s+".json",this.url+="?returnContent=true",c.toJSON(e);}}]);return _class33;}(ht);r.GeoBoundingBoxQueryBuilderParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_nt){_inherits(_class34,_nt);function _class34(e){var _this63;_classCallCheck(this,_class34);_this63=_possibleConstructorReturn(this,_getPrototypeOf(_class34).call(this,e)),_this63.bounds=null,_this63.queryType=oe.GEO_BOUNDING_BOX,_this63.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",c.extend(_assertThisInitialized(_this63),e);return _this63;}_createClass(_class34,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class34.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null;}}]);return _class34;}(nt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoHashGridAggParameter=/*#__PURE__*/function(_ot2){_inherits(_class35,_ot2);function _class35(e){var _this64;_classCallCheck(this,_class35);_this64=_possibleConstructorReturn(this,_getPrototypeOf(_class35).call(this,e)),_this64.precision=5,_this64.aggType=ne.GEOHASH_GRID,c.extend(_assertThisInitialized(_this64),e),_this64.CLASS_NAME="SuperMap.GeoHashGridAggParameter";return _this64;}_createClass(_class35,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class35.prototype),"destroy",this).call(this),this.aggType=null;}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return e.subAgg&&(t.subAgg=e.subAgg),c.toJson(t);}}]);return _class35;}(ot);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var es=/*#__PURE__*/function(_Ot2){_inherits(es,_Ot2);function es(e){var _this65;_classCallCheck(this,es);_this65=_possibleConstructorReturn(this,_getPrototypeOf(es).call(this,e)),e&&e.operateGeometry&&(_this65.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(_this65.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(_this65.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(_this65.sourceGeometries=e.sourceGeometries),e&&c.extend(_assertThisInitialized(_this65),e),_this65.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters";return _this65;}_createClass(es,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(es.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("sourceGeometry"===s)t.sourceGeometry=Ye.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===s){for(var r=[],i=0;i<e.sourceGeometries.length;i++){r.push(Ye.fromGeometry(e.sourceGeometries[i]));}t.sourceGeometries=r;}else if("operateGeometry"===s)t.operateGeometry=Ye.fromGeometry(e.operateGeometry);else if("operateGeometries"===s){for(var a=[],n=0;n<e.operateGeometries.length;n++){a.push(Ye.fromGeometry(e.operateGeometries[n]));}t.operateGeometries=a;}else t[s]=e[s];}}}]);return es;}(Ot);r.GeometryOverlayAnalystParameters=es;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ts=/*#__PURE__*/function(_It2){_inherits(ts,_It2);function ts(e){var _this66;_classCallCheck(this,ts);_this66=_possibleConstructorReturn(this,_getPrototypeOf(ts).call(this,e)),_this66.points=null,_this66.zValues=null,e&&c.extend(_assertThisInitialized(_this66),e),_this66.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters";return _this66;}_createClass(ts,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ts.prototype),"destroy",this).call(this);if(this.points){for(var e=0,t=this.points,s=t.length;e<s;e++){t[e].destroy();}this.points=null;}this.zValues=null;}}]);return ts;}(It);r.GeometrySurfaceAnalystParameters=ts;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ss=/*#__PURE__*/function(_Dt2){_inherits(ss,_Dt2);function ss(e){var _this67;_classCallCheck(this,ss);_this67=_possibleConstructorReturn(this,_getPrototypeOf(ss).call(this,e)),_this67.points=null,e&&c.extend(_assertThisInitialized(_this67),e),_this67.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters";return _this67;}_createClass(ss,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ss.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--){this.points[e].destroy();}this.points=null;}}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"clipRegion"===s?t.clipRegion=Ye.fromGeometry(e.clipRegion):t[s]=e[s];}}}]);return ss;}(Dt);r.GeometryThiessenAnalystParameters=ss;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var rs=/*#__PURE__*/function(){function rs(e){_classCallCheck(this,rs);this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters";}_createClass(rs,[{key:"destroy",value:function destroy(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null;}}]);return rs;}();r.GeoRelationAnalystParameters=rs;r.GeoRelationAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht5){_inherits(_class36,_ht5);function _class36(e,t){var _this68;_classCallCheck(this,_class36);_this68=_possibleConstructorReturn(this,_getPrototypeOf(_class36).call(this,e,t)),_this68.CLASS_NAME="SuperMap.GeoRelationAnalystService";return _this68;}_createClass(_class36,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class36.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof rs){var t=this,s=t.url.substr(t.url.length-1,1);t.url+="/"===s?"datasets/"+e.dataset+"/georelation":"/datasets/"+e.dataset+"/georelation";var i=r.Util.toJSON(e);t.url+=".json?returnContent=true",t.request({method:"POST",data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}}]);return _class36;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var is=/*#__PURE__*/function(){function is(e){_classCallCheck(this,is);this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,c.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase";}_createClass(is,[{key:"destroy",value:function destroy(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null);}}]);return is;}();r.GetFeaturesParametersBase=is;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var as=/*#__PURE__*/function(_is){_inherits(as,_is);function as(e){var _this69;_classCallCheck(this,as);_this69=_possibleConstructorReturn(this,_getPrototypeOf(as).call(this,e)),_this69.getFeatureMode=as.getFeatureMode.BOUNDS,_this69.bounds=null,_this69.fields=null,_this69.attributeFilter=null,_this69.spatialQueryMode=N.CONTAIN,c.extend(_assertThisInitialized(_this69),e),_this69.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters";return _this69;}_createClass(as,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(as.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;){e.fields.pop();}e.fields=null;}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null;}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t,s,r;return s={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},r={datasetNames:e.datasetNames,getFeatureMode:as.getFeatureMode.BOUNDS,bounds:s,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new ft()).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode=as.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),c.toJSON(r);}}]);return as;}(is);as.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},r.GetFeaturesByBoundsParameters=as;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ns=/*#__PURE__*/function(_it15){_inherits(ns,_it15);function ns(e,t){var _this70;_classCallCheck(this,ns);_this70=_possibleConstructorReturn(this,_getPrototypeOf(ns).call(this,e,t)),t=t||{},_this70.returnContent=!0,_this70.fromIndex=0,_this70.toIndex=19,_this70.maxFeatures=null,_this70.format=T.GEOJSON,c.extend(_assertThisInitialized(_this70),t);var s;t.format&&(_this70.format=t.format.toUpperCase()),s=_this70.url.substr(_this70.url.length-1,1),_this70.url+="/"==s?"featureResults.json?":"/featureResults.json?",_this70.CLASS_NAME="SuperMap.GetFeaturesServiceBase";return _this70;}_createClass(ns,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ns.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null;}},{key:"processAsync",value:function processAsync(e){if(e){var t,s=this,r=!0;s.returnContent=e.returnContent,s.fromIndex=e.fromIndex,s.toIndex=e.toIndex,s.maxFeatures=e.maxFeatures,s.returnContent&&(s.url+="returnContent="+s.returnContent,r=!1),null!=s.fromIndex&&null!=s.toIndex&&!isNaN(s.fromIndex)&&!isNaN(s.toIndex)&&s.fromIndex>=0&&s.toIndex>=0&&!r&&(s.url+="&fromIndex="+s.fromIndex+"&toIndex="+s.toIndex),e.returnCountOnly&&(s.url+="&returnCountOnly="+e.returnContent),t=s.getJsonParameters(e),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){if(e=c.transformResult(e),this.format===T.GEOJSON&&e.features){var t=new Xe();e.features=t.toGeoJSON(e.features);}this.events.triggerEvent("processCompleted",{result:e});}}]);return ns;}(it);r.GetFeaturesServiceBase=ns;r.GetFeaturesByBoundsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ns){_inherits(_class37,_ns);function _class37(e,t){var _this71;_classCallCheck(this,_class37);_this71=_possibleConstructorReturn(this,_getPrototypeOf(_class37).call(this,e,t)),_this71.CLASS_NAME="SuperMap.GetFeaturesByBoundsService";return _this71;}_createClass(_class37,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class37.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){return as.toJsonParameters(e);}}]);return _class37;}(ns);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var os=/*#__PURE__*/function(_is2){_inherits(os,_is2);function os(e){var _this72;_classCallCheck(this,os);_this72=_possibleConstructorReturn(this,_getPrototypeOf(os).call(this,e)),_this72.bufferDistance=null,_this72.attributeFilter=null,_this72.geometry=null,_this72.fields=null,c.extend(_assertThisInitialized(_this72),e),_this72.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters";return _this72;}_createClass(os,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(os.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;){e.fields.pop();}e.fields=null;}e.geometry&&(e.geometry.destroy(),e.geometry=null);}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t,s,r;return r=Ye.fromGeometry(e.geometry),s={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:r},e.fields&&((t=new ft()).name=e.datasetNames,t.fields=e.fields,s.queryParameter=t),e.attributeFilter&&(s.attributeFilter=e.attributeFilter,s.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(s.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(s.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(s.targetPrj=e.targetPrj),c.toJSON(s);}}]);return os;}(is);r.GetFeaturesByBufferParameters=os;r.GetFeaturesByBufferService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ns2){_inherits(_class38,_ns2);function _class38(e,t){var _this73;_classCallCheck(this,_class38);_this73=_possibleConstructorReturn(this,_getPrototypeOf(_class38).call(this,e,t)),_this73.CLASS_NAME="SuperMap.GetFeaturesByBufferService";return _this73;}_createClass(_class38,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class38.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){if(e instanceof os)return r.GetFeaturesByBufferParameters.toJsonParameters(e);}}]);return _class38;}(ns);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ls=/*#__PURE__*/function(_is3){_inherits(ls,_is3);function ls(e){var _this74;_classCallCheck(this,ls);_this74=_possibleConstructorReturn(this,_getPrototypeOf(ls).call(this,e)),_this74.getFeatureMode="SPATIAL",_this74.geometry=null,_this74.fields=null,_this74.attributeFilter=null,_this74.spatialQueryMode=N.CONTAIN,c.extend(_assertThisInitialized(_this74),e),_this74.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters";return _this74;}_createClass(ls,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ls.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;){e.fields.pop();}e.fields=null;}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null;}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t,s,r;return s=Ye.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:s,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new ft()).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),c.toJSON(r);}}]);return ls;}(is);r.GetFeaturesByGeometryParameters=ls;r.GetFeaturesByGeometryService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ns3){_inherits(_class39,_ns3);function _class39(e,t){var _this75;_classCallCheck(this,_class39);_this75=_possibleConstructorReturn(this,_getPrototypeOf(_class39).call(this,e,t)),_this75.CLASS_NAME="SuperMap.GetFeaturesByGeometryService";return _this75;}_createClass(_class39,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class39.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){return ls.toJsonParameters(e);}}]);return _class39;}(ns);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hs=/*#__PURE__*/function(_is4){_inherits(hs,_is4);function hs(e){var _this76;_classCallCheck(this,hs);_this76=_possibleConstructorReturn(this,_getPrototypeOf(hs).call(this,e)),_this76.getFeatureMode="ID",_this76.IDs=null,_this76.fields=null,c.extend(_assertThisInitialized(_this76),e),_this76.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters";return _this76;}_createClass(hs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(hs.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;){e.fields.pop();}e.fields=null;}}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t,s;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((s=new ft()).name=e.datasetNames,s.fields=e.fields,t.queryParameter=s),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),c.toJSON(t);}}]);return hs;}(is);r.GetFeaturesByIDsParameters=hs;r.GetFeaturesByIDsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ns4){_inherits(_class40,_ns4);function _class40(e,t){var _this77;_classCallCheck(this,_class40);_this77=_possibleConstructorReturn(this,_getPrototypeOf(_class40).call(this,e,t)),_this77.CLASS_NAME="SuperMap.GetFeaturesByIDsService";return _this77;}_createClass(_class40,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class40.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){return hs.toJsonParameters(e);}}]);return _class40;}(ns);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var us=/*#__PURE__*/function(_is5){_inherits(us,_is5);function us(e){var _this78;_classCallCheck(this,us);_this78=_possibleConstructorReturn(this,_getPrototypeOf(us).call(this,e)),_this78.getFeatureMode="SQL",_this78.queryParameter=null,c.extend(_assertThisInitialized(_this78),e),_this78.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters";return _this78;}_createClass(us,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(us.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null);}}],[{key:"toJsonParameters",value:function toJsonParameters(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),c.toJSON(t);}}]);return us;}(is);r.GetFeaturesBySQLParameters=us;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var cs=/*#__PURE__*/function(_ns5){_inherits(cs,_ns5);function cs(e,t){var _this79;_classCallCheck(this,cs);_this79=_possibleConstructorReturn(this,_getPrototypeOf(cs).call(this,e,t)),_this79.CLASS_NAME="SuperMap.GetFeaturesBySQLService";return _this79;}_createClass(cs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(cs.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){return us.toJsonParameters(e);}}]);return cs;}(ns);r.GetFeaturesBySQLService=cs;r.GetFieldsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it16){_inherits(_class41,_it16);function _class41(e,t){var _this80;_classCallCheck(this,_class41);_this80=_possibleConstructorReturn(this,_getPrototypeOf(_class41).call(this,e,t)),_this80.datasource=null,_this80.dataset=null,t&&c.extend(_assertThisInitialized(_this80),t),_this80.CLASS_NAME="SuperMap.GetFieldsService";return _this80;}_createClass(_class41,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class41.prototype),"destroy",this).call(this),this.datasource=null,this.dataset=null;}},{key:"processAsync",value:function processAsync(){var e=this,t=e.url.substr(e.url.length-1,1),s="datasources/"+e.datasource+"/datasets/"+e.dataset;e.url+="/"==t?s+"/fields.json?":"/"+s+"/fields.json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed});}}]);return _class41;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ds=/*#__PURE__*/function(){function ds(e){_classCallCheck(this,ds);this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,c.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters";}_createClass(ds,[{key:"destroy",value:function destroy(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null;}}]);return ds;}();r.GetGridCellInfosParameters=ds;r.GetGridCellInfosService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it17){_inherits(_class42,_it17);function _class42(e,t){var _this81;_classCallCheck(this,_class42);_this81=_possibleConstructorReturn(this,_getPrototypeOf(_class42).call(this,e,t)),_this81.datasetName=null,_this81.dataSourceName=null,_this81.datasetType=null,_this81.X=null,_this81.Y=null,t&&c.extend(_assertThisInitialized(_this81),t),_this81.CLASS_NAME="SuperMap.GetGridCellInfosService";return _this81;}_createClass(_class42,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class42.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null;}},{key:"processAsync",value:function processAsync(e){if(e instanceof ds){c.extend(this,e);var t=this,s=t.url.substr(t.url.length-1,1);t.url+="/"==s?"datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json":"/datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json",t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed);}}},{key:"queryRequest",value:function queryRequest(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t});}},{key:"getDatasetInfoCompleted",value:function getDatasetInfoCompleted(e){e=c.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos();}},{key:"queryGridInfos",value:function queryGridInfos(){var e=this,t=/\.json/.exec(e.url).index,s=e.url.substring(t),r=e.url.substring(0,e.url.length-s.length);"GRID"==e.datasetType?e.url=r+"/gridValue"+s:e.url=r+"/imageValue"+s,null!=e.X&&null!=e.Y&&(e.url+="?x="+e.X+"&y="+e.Y),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed);}},{key:"getDatasetInfoFailed",value:function getDatasetInfoFailed(e){this.serviceProcessFailed(e);}}]);return _class42;}(it);r.ThemeMemoryData=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class43(e,t){_classCallCheck(this,_class43);this.srcData=e,this.targetData=t,this.CLASS_NAME="SuperMap.ThemeMemoryData";}_createClass(_class43,[{key:"destroy",value:function destroy(){this.srcData=null,this.targetData=null;}},{key:"toJSON",value:function toJSON(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),s=0;s<t;s++){e+="'"+this.srcData[s]+"':'"+this.targetData[s]+"',";}return s>0&&(e=e.substring(0,e.length-1)),"{"+e+"}";}return null;}}]);return _class43;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ps=/*#__PURE__*/function(){function ps(e,t){_classCallCheck(this,ps);if(!e)return this;this.memoryData=null,this.type=e,t&&c.extend(this,t),this.CLASS_NAME="SuperMap.Theme";}_createClass(ps,[{key:"destroy",value:function destroy(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){}}]);return ps;}();r.Theme=ps;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ms=/*#__PURE__*/function(){function ms(e){_classCallCheck(this,ms);this.align=B.BASELINECENTER,this.backColor=new Ve(255,255,255),this.foreColor=new Ve(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle";}_createClass(ms,[{key:"destroy",value:function destroy(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null;}}],[{key:"fromObj",value:function fromObj(e){var t=new ms(e);return c.copy(t,e),t.backColor=Ve.fromJson(e.backColor),t.foreColor=Ve.fromJson(e.foreColor),t;}}]);return ms;}();r.ServerTextStyle=ms;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fs=/*#__PURE__*/function(){function fs(e){_classCallCheck(this,fs);this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new ms(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem";}_createClass(fs,[{key:"destroy",value:function destroy(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new fs();return c.copy(t,e),t;}}}]);return fs;}();r.ThemeLabelItem=fs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ys=/*#__PURE__*/function(){function ys(e){_classCallCheck(this,ys);this.caption=null,this.style=new qe(),this.unique=null,this.visible=!0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem";}_createClass(ys,[{key:"destroy",value:function destroy(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e;}}],[{key:"fromObj",value:function fromObj(e){var t=new ys();return c.copy(t,e),t.style=qe.fromJson(e.style),t;}}]);return ys;}();r.ThemeUniqueItem=ys;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var gs=/*#__PURE__*/function(){function gs(e){_classCallCheck(this,gs);this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new qe(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow";}_createClass(gs,[{key:"destroy",value:function destroy(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null);}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new gs();return c.copy(t,e),t.leaderLineStyle=qe.fromJson(e.leaderLineStyle),t;}}}]);return gs;}();r.ThemeFlow=gs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vs=/*#__PURE__*/function(){function vs(e){_classCallCheck(this,vs);this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset";}_createClass(vs,[{key:"destroy",value:function destroy(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new vs();return c.copy(t,e),t;}}}]);return vs;}();r.ThemeOffset=vs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ss=/*#__PURE__*/function(){function Ss(e){_classCallCheck(this,Ss);this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new ms(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle";}_createClass(Ss,[{key:"destroy",value:function destroy(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,s=e.styles,r=s.length;t<r;t++){s[t].destroy();}e.styles=null;}}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Ss(),s=e.styles;if(c.copy(t,e),t.defaultStyle=new ms(e.defaultStyle),s){t.styles=[];for(var r=0,i=s.length;r<i;r++){t.styles.push(new ms(s[r]));}}return t;}}}]);return Ss;}();r.LabelMixedTextStyle=Ss;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bs=/*#__PURE__*/function(){function bs(e){_classCallCheck(this,bs);this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new ms(),this.uniformMixedStyle=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText";}_createClass(bs,[{key:"destroy",value:function destroy(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null);}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new bs();return c.copy(t,e),t.uniformStyle=ms.fromObj(e.uniformStyle),t.uniformMixedStyle=Ss.fromObj(e.uniformMixedStyle),t;}}}]);return bs;}();r.ThemeLabelText=bs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xs=/*#__PURE__*/function(){function xs(e){_classCallCheck(this,xs);this.isAlongLine=!0,this.alongLineDirection=G.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine";}_createClass(xs,[{key:"destroy",value:function destroy(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new xs();return c.copy(t,e),t;}}}]);return xs;}();r.ThemeLabelAlongLine=xs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Cs=/*#__PURE__*/function(){function Cs(e){_classCallCheck(this,Cs);this.labelBackShape=U.NONE,this.backStyle=new qe(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground";}_createClass(Cs,[{key:"destroy",value:function destroy(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null);}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Cs();return t.labelBackShape=e.labelBackShape,t.backStyle=qe.fromJson(e.backStyle),t;}}}]);return Cs;}();r.ThemeLabelBackground=Cs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _s=/*#__PURE__*/function(_ps){_inherits(_s,_ps);function _s(e){var _this82;_classCallCheck(this,_s);_this82=_possibleConstructorReturn(this,_getPrototypeOf(_s).call(this,"LABEL",e)),_this82.alongLine=new xs(),_this82.background=new Cs(),_this82.flow=new gs(),_this82.items=null,_this82.uniqueItems=null,_this82.labelExpression=null,_this82.labelOverLengthMode=H.NONE,_this82.matrixCells=null,_this82.maxLabelLength=256,_this82.numericPrecision=0,_this82.offset=new vs(),_this82.overlapAvoided=!0,_this82.rangeExpression=null,_this82.uniqueExpression=null,_this82.smallGeometryLabeled=!1,_this82.text=new bs(),_this82.textSpace=0,e&&c.extend(_assertThisInitialized(_this82),e),_this82.CLASS_NAME="SuperMap.ThemeLabel";return _this82;}_createClass(_s,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_s.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.flow=null,e.items){for(var t=0,s=e.items,r=s.length;t<r;t++){s[t].destroy();}e.items=null;}if(e.uniqueItems){for(var i=0,a=e.uniqueItems,n=a.length;i<n;i++){a[i].destory();}e.uniqueItems=null;}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null;}},{key:"toJSON",value:function toJSON(){return c.toJSON(this.toServerJSONObject());}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new _s(),s=e.items,r=e.uniqueItems,i=e.matrixCells;if(e.matrixCells=null,c.copy(t,e),t.alongLine=xs.fromObj(e),t.background=Cs.fromObj(e),t.flow=new gs({flowEnabled:e.flowEnabled,leaderLineDisplayed:e.leaderLineDisplayed,leaderLineStyle:e.leaderLineStyle}),s){t.items=[];for(var a=0,n=s.length;a<n;a++){t.items.push(fs.fromObj(s[a]));}}if(r){t.uniqueItems=[];for(var _e34=0,_s16=r.length;_e34<_s16;_e34++){t.uniqueItems.push(ys.fromObj(r[_e34]));}}if(i){t.matrixCells=[];for(var _e35=0,_t22=i.length;_e35<_t22;_e35++){;}}return t.offset=vs.fromObj(e),t.text=bs.fromObj(e),t;}}}]);return _s;}(ps);r.ThemeLabel=_s;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ts=/*#__PURE__*/function(_ps2){_inherits(Ts,_ps2);function Ts(e){var _this83;_classCallCheck(this,Ts);_this83=_possibleConstructorReturn(this,_getPrototypeOf(Ts).call(this,"UNIQUE",e)),_this83.defaultStyle=new qe(),_this83.items=null,_this83.uniqueExpression=null,_this83.colorGradientType=k.YELLOW_RED,e&&c.extend(_assertThisInitialized(_this83),e),_this83.CLASS_NAME="SuperMap.ThemeUnique";return _this83;}_createClass(Ts,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ts.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var t in e.items){e.items[t].destroy(),e.items[t]=null;}e.items=null;}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null);}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};if((e=c.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],s=e.items.length,r=0;r<s;r++){t.push(e.items[r].toServerJSONObject());}e.items=t;}return e;}}],[{key:"fromObj",value:function fromObj(e){var t=new Ts(),s=e.items,r=s?s.length:0;c.extend(t,e),t.items=[],t.defaultStyle=qe.fromJson(e.defaultStyle);for(var i=0;i<r;i++){t.items.push(ys.fromObj(s[i]));}return t;}}]);return Ts;}(ps);r.ThemeUnique=Ts;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Es=/*#__PURE__*/function(){function Es(e){_classCallCheck(this,Es);this.axesColor=new Ve(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new ms(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes";}_createClass(Es,[{key:"destroy",value:function destroy(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null);}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Es();return c.copy(t,e),t.axesColor=Ve.fromJson(e.axesColor),t.axesTextStyle=ms.fromObj(e.axesTextStyle),t;}}}]);return Es;}();r.ThemeGraphAxes=Es;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var As=/*#__PURE__*/function(){function As(e){_classCallCheck(this,As);this.maxGraphSize=0,this.minGraphSize=0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize";}_createClass(As,[{key:"destroy",value:function destroy(){this.maxGraphSize=null,this.minGraphSize=null;}}],[{key:"fromObj",value:function fromObj(e){var t=new As();return c.copy(t,e),t;}}]);return As;}();r.ThemeGraphSize=As;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ws=/*#__PURE__*/function(){function ws(e){_classCallCheck(this,ws);this.graphTextDisplayed=!1,this.graphTextFormat=M.CAPTION,this.graphTextStyle=new ms(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText";}_createClass(ws,[{key:"destroy",value:function destroy(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null);}}],[{key:"fromObj",value:function fromObj(e){var t=new ws();return c.copy(t,e),t.graphTextStyle=ms.fromObj(e.graphTextStyle),t;}}]);return ws;}();r.ThemeGraphText=ws;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ns=/*#__PURE__*/function(){function Ns(e){_classCallCheck(this,Ns);this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new qe(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem";}_createClass(Ns,[{key:"destroy",value:function destroy(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Ns();return c.copy(t,e),t.uniformStyle=qe.fromJson(e.uniformStyle),t;}}}]);return Ns;}();r.ThemeGraphItem=Ns;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ps=/*#__PURE__*/function(_ps3){_inherits(Ps,_ps3);function Ps(e){var _this84;_classCallCheck(this,Ps);_this84=_possibleConstructorReturn(this,_getPrototypeOf(Ps).call(this,"GRAPH",e)),_this84.barWidth=0,_this84.flow=new gs(),_this84.graduatedMode=D.CONSTANT,_this84.graphAxes=new Es(),_this84.graphSize=new As(),_this84.graphSizeFixed=!1,_this84.graphText=new ws(),_this84.graphType=I.AREA,_this84.graphAxesTextDisplayMode=R.NONE,_this84.items=null,_this84.memoryKeys=null,_this84.negativeDisplayed=!1,_this84.offset=new vs(),_this84.overlapAvoided=!0,_this84.roseAngle=0,_this84.startAngle=0,e&&c.extend(_assertThisInitialized(_this84),e),_this84.CLASS_NAME="SuperMap.ThemeGraph";return _this84;}_createClass(Ps,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ps.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var t=0,s=e.items,r=s.length;t<r;t++){s[t].destroy();}e.items=null;}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null;}},{key:"toJSON",value:function toJSON(){return c.toJSON(this.toServerJSONObject());}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e;}}],[{key:"fromObj",value:function fromObj(e){var t=new Ps(),s=e.items,r=s?s.length:0;c.copy(t,e),t.items=[],t.flow=gs.fromObj(e),t.graphAxes=Es.fromObj(e),t.graphSize=As.fromObj(e),t.graphText=ws.fromObj(e),t.offset=vs.fromObj(e);for(var i=0;i<r;i++){t.items.push(Ns.fromObj(s[i]));}return t;}}]);return Ps;}(ps);r.ThemeGraph=Ps;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Os=/*#__PURE__*/function(_ps4){_inherits(Os,_ps4);function Os(e){var _this85;_classCallCheck(this,Os);_this85=_possibleConstructorReturn(this,_getPrototypeOf(Os).call(this,"DOTDENSITY",e)),_this85.dotExpression=null,_this85.style=new qe(),_this85.value=null,e&&c.extend(_assertThisInitialized(_this85),e),_this85.CLASS_NAME="SuperMap.ThemeDotDensity";return _this85;}_createClass(Os,[{key:"destroy",value:function destroy(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null);}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Os();return c.copy(t,e),t.style=qe.fromJson(e.style),t;}}}]);return Os;}(ps);r.ThemeDotDensity=Os;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ls=/*#__PURE__*/function(){function Ls(e){_classCallCheck(this,Ls);this.negativeDisplayed=!1,this.negativeStyle=new qe(),this.positiveStyle=new qe(),this.zeroDisplayed=!1,this.zeroStyle=new qe(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle";}_createClass(Ls,[{key:"destroy",value:function destroy(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Ls();return c.copy(t,e),t.negativeStyle=qe.fromJson(e.negativeStyle),t.positiveStyle=qe.fromJson(e.positiveStyle),t.zeroStyle=qe.fromJson(e.zeroStyle),t;}}}]);return Ls;}();r.ThemeGraduatedSymbolStyle=Ls;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ms=/*#__PURE__*/function(_ps5){_inherits(Ms,_ps5);function Ms(e){var _this86;_classCallCheck(this,Ms);_this86=_possibleConstructorReturn(this,_getPrototypeOf(Ms).call(this,"GRADUATEDSYMBOL",e)),_this86.baseValue=0,_this86.expression=null,_this86.flow=new gs(),_this86.graduatedMode=r.GraduatedMode.CONSTAN,_this86.offset=new vs(),_this86.style=new Ls(),e&&c.extend(_assertThisInitialized(_this86),e),_this86.CLASS_NAME="SuperMap.ThemeGraduatedSymbol";return _this86;}_createClass(Ms,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ms.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=D.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null);}},{key:"toJSON",value:function toJSON(){return c.toJSON(this.toServerJSONObject());}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new r.ThemeGraduatedSymbol();return c.copy(t,e),t.flow=gs.fromObj(e),t.offset=vs.fromObj(e),t.style=Ls.fromObj(e),t;}}}]);return Ms;}(ps);r.ThemeGraduatedSymbol=Ms;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Is=/*#__PURE__*/function(){function Is(e){_classCallCheck(this,Is);this.caption=null,this.end=0,this.start=0,this.style=new qe(),this.visible=!0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem";}_createClass(Is,[{key:"destroy",value:function destroy(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Is();return c.copy(t,e),t.style=qe.fromJson(e.style),t;}}}]);return Is;}();r.ThemeRangeItem=Is;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Rs=/*#__PURE__*/function(_ps6){_inherits(Rs,_ps6);function Rs(e){var _this87;_classCallCheck(this,Rs);_this87=_possibleConstructorReturn(this,_getPrototypeOf(Rs).call(this,"RANGE",e)),_this87.precision="1.0E-12",_this87.items=null,_this87.rangeExpression=null,_this87.rangeMode=F.EQUALINTERVAL,_this87.rangeParameter=0,_this87.colorGradientType=k.YELLOW_RED,e&&c.extend(_assertThisInitialized(_this87),e),_this87.CLASS_NAME="SuperMap.ThemeRange";return _this87;}_createClass(Rs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Rs.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items){e.items[t].destroy(),e.items[t]=null;}e.items=null;}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Rs();c.copy(t,e);var s=e.items,r=s?s.length:0;t.items=[];for(var i=0;i<r;i++){t.items.push(Is.fromObj(s[i]));}return t;}}}]);return Rs;}(ps);r.ThemeRange=Rs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ds=/*#__PURE__*/function(){function Ds(e){_classCallCheck(this,Ds);e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,c.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer";}_createClass(Ds,[{key:"destroy",value:function destroy(){c.reset(this);}},{key:"fromJson",value:function fromJson(e){e=e||{},c.extend(this,e);var t=this.bounds;t&&(this.bounds=new Ae(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y));}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e;}}]);return Ds;}();r.UGCLayer=Ds;r.OverlapDisplayedOptions=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class44(e){_classCallCheck(this,_class44);e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,c.extend(this,e),this.ugcLayer=new Ds(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions";}_createClass(_class44,[{key:"destroy",value:function destroy(){c.reset(this);}},{key:"fromJson",value:function fromJson(e){this.ugcLayer.fromJson.apply(this,[e]);}},{key:"toServerJSONObject",value:function toServerJSONObject(){return this.ugcLayer.toServerJSONObject.apply(this,arguments);}},{key:"toString",value:function toString(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var s in e){e.hasOwnProperty(s)&&(t+="'"+s+"':"+e[s]+",");}return t=t.substr(0,t.length-1),t+="}";}}]);return _class44;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Fs=/*#__PURE__*/function(_Ds){_inherits(Fs,_Ds);function Fs(e){var _this88;_classCallCheck(this,Fs);_this88=_possibleConstructorReturn(this,_getPrototypeOf(Fs).call(this,e=e||{})),_this88.completeLineSymbolDisplayed=null,_this88.maxScale=null,_this88.minScale=null,_this88.minVisibleGeometrySize=null,_this88.opaqueRate=null,_this88.symbolScalable=null,_this88.symbolScale=null,_this88.overlapDisplayed=null,_this88.overlapDisplayedOptions=null,_this88.CLASS_NAME="SuperMap.UGCMapLayer";return _this88;}_createClass(Fs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Fs.prototype),"destroy",this).call(this),c.reset(this);}},{key:"fromJson",value:function fromJson(e){_get(_getPrototypeOf(Fs.prototype),"fromJson",this).call(this,e);}},{key:"toServerJSONObject",value:function toServerJSONObject(){return _get(_getPrototypeOf(Fs.prototype),"toServerJSONObject",this).call(this);}}]);return Fs;}(Ds);r.UGCMapLayer=Fs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ks=/*#__PURE__*/function(_Fs){_inherits(ks,_Fs);function ks(e){var _this89;_classCallCheck(this,ks);_this89=_possibleConstructorReturn(this,_getPrototypeOf(ks).call(this,e=e||{})),_this89.datasetInfo=null,_this89.displayFilter=null,_this89.joinItems=null,_this89.representationField=null,_this89.ugcLayerType=null,_this89.CLASS_NAME="SuperMap.UGCSubLayer";return _this89;}_createClass(ks,[{key:"fromJson",value:function fromJson(e){if(_get(_getPrototypeOf(ks.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new Pt(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var t=[],s=0;s<this.joinItems.length;s++){t[s]=new mt(this.joinItems[s]);}this.joinItems=t;}}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ks.prototype),"destroy",this).call(this),c.reset(this);}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e=_get(_getPrototypeOf(ks.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var t=[],s=0;s<e.joinItems.length;s++){e.joinItems[s].toServerJSONObject&&(t[s]=e.joinItems[s].toServerJSONObject());}e.joinItems=t;}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e;}}]);return ks;}(Fs);r.UGCSubLayer=ks;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Bs=/*#__PURE__*/function(_ks){_inherits(Bs,_ks);function Bs(e){var _this90;_classCallCheck(this,Bs);_this90=_possibleConstructorReturn(this,_getPrototypeOf(Bs).call(this,e=e||{})),_this90.theme=null,_this90.themeElementPosition=null,_this90.CLASS_NAME="SuperMap.ServerTheme";return _this90;}_createClass(Bs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Bs.prototype),"destroy",this).call(this),c.reset(this);}},{key:"fromJson",value:function fromJson(e){_get(_getPrototypeOf(Bs.prototype),"fromJson",this).call(this,e);var t=this.theme;switch(t&&t.type){case"LABEL":this.theme=_s.fromObj(t);break;case"UNIQUE":this.theme=Ts.fromObj(t);break;case"GRAPH":this.theme=Ps.fromObj(t);break;case"DOTDENSITY":this.theme=Os.fromObj(t);break;case"GRADUATEDSYMBOL":this.theme=Ms.fromObj(t);break;case"RANGE":this.theme=Rs.fromObj(t);}this.themeElementPosition&&(this.themeElementPosition=new Ee(this.themeElementPosition.x,this.themeElementPosition.y));}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e=_get(_getPrototypeOf(Bs.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e;}}]);return Bs;}(ks);r.ServerTheme=Bs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gs=/*#__PURE__*/function(_ks2){_inherits(Gs,_ks2);function Gs(e){var _this91;_classCallCheck(this,Gs);_this91=_possibleConstructorReturn(this,_getPrototypeOf(Gs).call(this,e=e||{})),_this91.colorDictionarys=null,_this91.brightness=null,_this91.colorGradientType=null,_this91.colors=null,_this91.contrast=null,_this91.dashStyle=null,_this91.gridType=null,_this91.horizontalSpacing=null,_this91.sizeFixed=null,_this91.solidStyle=null,_this91.specialColor=null,_this91.specialValue=null,_this91.specialValueTransparent=null,_this91.verticalSpacing=null,_this91.CLASS_NAME="SuperMap.Grid";return _this91;}_createClass(Gs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Gs.prototype),"destroy",this).call(this),c.reset(this);}},{key:"fromJson",value:function fromJson(e){if(_get(_getPrototypeOf(Gs.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new Ve(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var t,s=[];for(var r in this.colors){t=this.colors[r],s.push(new Ve(t.red,t.green,t.blue));}this.colors=s;}if(this.dashStyle&&(this.dashStyle=new qe(this.dashStyle)),this.solidStyle&&(this.solidStyle=new qe(this.solidStyle)),this.colorDictionary){var i,a=[];for(var n in this.colorDictionary){i=this.colorDictionary[n],a.push(new Et({elevation:n,color:i}));}this.colorDictionarys=a;}delete this.colorDictionary;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e=_get(_getPrototypeOf(Gs.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e;}}]);return Gs;}(ks);r.Grid=Gs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Us=/*#__PURE__*/function(_ks3){_inherits(Us,_ks3);function Us(e){var _this92;_classCallCheck(this,Us);_this92=_possibleConstructorReturn(this,_getPrototypeOf(Us).call(this,e=e||{})),_this92.brightness=null,_this92.colorSpaceType=null,_this92.contrast=null,_this92.displayBandIndexes=null,_this92.transparent=null,_this92.transparentColor=null,_this92.transparentColorTolerance=null,_this92.CLASS_NAME="SuperMap.Image";return _this92;}_createClass(Us,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Us.prototype),"destroy",this).call(this),c.reset(this);}},{key:"fromJson",value:function fromJson(e){_get(_getPrototypeOf(Us.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new Ve(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue));}},{key:"toServerJSONObject",value:function toServerJSONObject(){return _get(_getPrototypeOf(Us.prototype),"toServerJSONObject",this).call(this);}}]);return Us;}(ks);r.Image=Us;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Hs=/*#__PURE__*/function(_ks4){_inherits(Hs,_ks4);function Hs(e){var _this93;_classCallCheck(this,Hs);_this93=_possibleConstructorReturn(this,_getPrototypeOf(Hs).call(this,e=e||{})),_this93.style=null,_this93.CLASS_NAME="SuperMap.Vector";return _this93;}_createClass(Hs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Hs.prototype),"destroy",this).call(this),c.reset(this);}},{key:"fromJson",value:function fromJson(e){_get(_getPrototypeOf(Hs.prototype),"fromJson",this).call(this,e);var t=this.style;t&&(this.style=new qe(t));}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e=r.toServerJSONObject();return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e;}}]);return Hs;}(ks);r.Vector=Hs;r.GetLayersInfoService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it18){_inherits(_class45,_it18);function _class45(e,t){var _this94;_classCallCheck(this,_class45);_this94=_possibleConstructorReturn(this,_getPrototypeOf(_class45).call(this,e,t)),_this94.isTempLayers=!1,t&&c.extend(_assertThisInitialized(_this94),t),_this94.CLASS_NAME="SuperMap.GetLayersInfoService";return _this94;}_createClass(_class45,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class45.prototype),"destroy",this).call(this),c.reset(this);}},{key:"processAsync",value:function processAsync(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="layers.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed});}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){var t,s;s=(t=(e=c.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(s,t),this.events.triggerEvent("processCompleted",{result:e[0]});}},{key:"handleLayers",value:function handleLayers(e,t){var s;if(e)for(var r=0;r<e;r++){if(t[r].subLayers&&t[r].subLayers.layers&&t[r].subLayers.layers.length>0)this.handleLayers(t[r].subLayers.layers.length,t[r].subLayers.layers);else switch(t[r].ugcLayerType){case"THEME":(s=new Bs()).fromJson(t[r]),t[r]=s;break;case"GRID":(s=new Gs()).fromJson(t[r]),t[r]=s;break;case"IMAGE":(s=new Us()).fromJson(t[r]),t[r]=s;break;case"VECTOR":(s=new Hs()).fromJson(t[r]),t[r]=s;}}}}]);return _class45;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var js=/*#__PURE__*/function(){function js(e){_classCallCheck(this,js);e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,c.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters");}_createClass(js,[{key:"destroy",value:function destroy(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("inputPoints"===s&&"geometry"===e.InterpolationAnalystType){for(var r=[],i=0;i<e.inputPoints.length;i++){var a=e.inputPoints[i],n={x:a.x,y:a.y,z:a.tag};r.push(n);}t[s]=r;}else t[s]=e[s];}}}]);return js;}();r.InterpolationAnalystParameters=js;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Js=/*#__PURE__*/function(_js){_inherits(Js,_js);function Js(e){var _this95;_classCallCheck(this,Js);_this95=_possibleConstructorReturn(this,_getPrototypeOf(Js).call(this,e)),_this95.smooth=.1,_this95.tension=40,_this95.searchMode=null,_this95.expectedCount=12,_this95.maxPointCountForInterpolation=200,_this95.maxPointCountInNode=50,e&&c.extend(_assertThisInitialized(_this95),e),_this95.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters";return _this95;}_createClass(Js,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Js.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){t[s]=e[s];}}}]);return Js;}(js);r.InterpolationRBFAnalystParameters=Js;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Vs=/*#__PURE__*/function(_js2){_inherits(Vs,_js2);function Vs(e){var _this96;_classCallCheck(this,Vs);_this96=_possibleConstructorReturn(this,_getPrototypeOf(Vs).call(this,e)),e&&c.extend(_assertThisInitialized(_this96),e),_this96.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters";return _this96;}_createClass(Vs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Vs.prototype),"destroy",this).call(this);}}]);return Vs;}(js);r.InterpolationDensityAnalystParameters=Vs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qs=/*#__PURE__*/function(_js3){_inherits(qs,_js3);function qs(e){var _this97;_classCallCheck(this,qs);_this97=_possibleConstructorReturn(this,_getPrototypeOf(qs).call(this,e)),_this97.power=2,_this97.searchMode=null,_this97.expectedCount=12,e&&c.extend(_assertThisInitialized(_this97),e),_this97.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters";return _this97;}_createClass(qs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(qs.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null;}}]);return qs;}(js);r.InterpolationIDWAnalystParameters=qs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ws=/*#__PURE__*/function(_js4){_inherits(Ws,_js4);function Ws(e){var _this98;_classCallCheck(this,Ws);_this98=_possibleConstructorReturn(this,_getPrototypeOf(Ws).call(this,e)),_this98.type=null,_this98.mean=null,_this98.angle=0,_this98.nugget=0,_this98.range=0,_this98.sill=0,_this98.variogramMode=K.SPHERICAL,_this98.exponent=Z.EXP1,_this98.searchMode=null,_this98.expectedCount=12,_this98.maxPointCountForInterpolation=200,_this98.maxPointCountInNode=50,e&&c.extend(_assertThisInitialized(_this98),e),_this98.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters";return _this98;}_createClass(Ws,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ws.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null;}}]);return Ws;}(js);r.InterpolationKrigingAnalystParameters=Ws;r.InterpolationAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht6){_inherits(_class46,_ht6);function _class46(e,t){var _this99;_classCallCheck(this,_class46);_this99=_possibleConstructorReturn(this,_getPrototypeOf(_class46).call(this,e,t)),_this99.mode=null,t&&c.extend(_assertThisInitialized(_this99),t);return _this99;}_createClass(_class46,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class46.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService";}},{key:"processAsync",value:function processAsync(e){var t={},s=this;"/"!==s.url.substr(s.url.length-1,1)&&(s.url+="/"),e instanceof Vs?(s.mode="Density","geometry"===e.InterpolationAnalystType?s.url+="geometry/interpolation/density":s.url+="datasets/"+e.dataset+"/interpolation/density"):e instanceof qs?(s.mode="IDW","geometry"===e.InterpolationAnalystType?s.url+="geometry/interpolation/idw":s.url+="datasets/"+e.dataset+"/interpolation/idw"):e instanceof Js?(s.mode="RBF","geometry"===e.InterpolationAnalystType?s.url+="geometry/interpolation/rbf":s.url+="datasets/"+e.dataset+"/interpolation/rbf"):e instanceof Ws&&(s.mode="Kriging","geometry"===e.InterpolationAnalystType?s.url+="geometry/interpolation/kriging":s.url+="datasets/"+e.dataset+"/interpolation/kriging"),js.toObject(e,t);var r=c.toJSON(t);s.url+=".json?returnContent=true",s.request({method:"POST",data:r,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}]);return _class46;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var zs=/*#__PURE__*/function(_vt2){_inherits(zs,_vt2);function zs(e,t){var _this100;_classCallCheck(this,zs);_this100=_possibleConstructorReturn(this,_getPrototypeOf(zs).call(this,e,t)),_this100.url+="/spatialanalyst/density",_this100.CLASS_NAME="SuperMap.KernelDensityJobsService";return _this100;}_createClass(zs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(zs.prototype),"destroy",this).call(this);}},{key:"getKernelDensityJobs",value:function getKernelDensityJobs(){_get(_getPrototypeOf(zs.prototype),"getJobs",this).call(this,this.url);}},{key:"getKernelDensityJob",value:function getKernelDensityJob(e){_get(_getPrototypeOf(zs.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addKernelDensityJob",value:function addKernelDensityJob(e,t){_get(_getPrototypeOf(zs.prototype),"addJob",this).call(this,this.url,e,de,t);}}]);return zs;}(vt);r.KernelDensityJobsService=zs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ys=function Ys(){_classCallCheck(this,Ys);this.CLASS_NAME="LabelMatrixCell";};r.LabelMatrixCell=Ys;r.LabelImageCell=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ys){_inherits(_class47,_Ys);function _class47(e){var _this101;_classCallCheck(this,_class47);_this101=_possibleConstructorReturn(this,_getPrototypeOf(_class47).call(this,e)),_this101.height=0,_this101.pathField=null,_this101.rotation=0,_this101.width=0,_this101.sizeFixed=!1,_this101.type="IMAGE",e&&c.extend(_assertThisInitialized(_this101),e),_this101.CLASS_NAME="SuperMap.LabelImageCell";return _this101;}_createClass(_class47,[{key:"destroy",value:function destroy(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null;}}]);return _class47;}(Ys);r.LabelSymbolCell=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ys2){_inherits(_class48,_Ys2);function _class48(e){var _this102;_classCallCheck(this,_class48);_this102=_possibleConstructorReturn(this,_getPrototypeOf(_class48).call(this,e)),_this102.style=new qe(),_this102.symbolIDField=null,_this102.type="SYMBOL",e&&c.extend(_assertThisInitialized(_this102),e),_this102.CLASS_NAME="SuperMap.LabelSymbolCell";return _this102;}_createClass(_class48,[{key:"destroy",value:function destroy(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null;}}]);return _class48;}(Ys);r.LabelThemeCell=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ys3){_inherits(_class49,_Ys3);function _class49(e){var _this103;_classCallCheck(this,_class49);_this103=_possibleConstructorReturn(this,_getPrototypeOf(_class49).call(this,e)),_this103.themeLabel=new _s(),_this103.type="THEME",e&&c.extend(_assertThisInitialized(_this103),e),_this103.CLASS_NAME=" SuperMap.LabelThemeCell";return _this103;}_createClass(_class49,[{key:"destroy",value:function destroy(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null);}}]);return _class49;}(Ys);r.LayerStatus=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class50(e){_classCallCheck(this,_class50);this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus";}_createClass(_class50,[{key:"destroy",value:function destroy(){this.layerName=null,this.isVisible=null,this.displayFilter=null;}},{key:"toJSON",value:function toJSON(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+c.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}";}}]);return _class50;}();r.MapService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it19){_inherits(_class51,_it19);function _class51(e,t){var _this104;_classCallCheck(this,_class51);if(_this104=_possibleConstructorReturn(this,_getPrototypeOf(_class51).call(this,e,t)),_this104.projection=null,_this104.CLASS_NAME="SuperMap.MapService",t&&c.extend(_assertThisInitialized(_this104),t),_this104.projection){var s=_this104.projection.split(":");s instanceof Array&&(2===s.length&&(_this104.url+='?prjCoordSys={"epsgCode":'+s[1]+"}"),1===s.length&&(_this104.url+='?prjCoordSys={"epsgCode":'+s[0]+"}"));}return _possibleConstructorReturn(_this104);}_createClass(_class51,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class51.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null);}},{key:"processAsync",value:function processAsync(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed});}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){var t=(e=c.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,s=e.code&&t;!e.code||s?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e});}}]);return _class51;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xs=/*#__PURE__*/function(){function Xs(e){_classCallCheck(this,Xs);e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters");}_createClass(Xs,[{key:"destroy",value:function destroy(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){if("dataset"!==s&&(t[s]=e[s]),"extractRegion"===s&&e[s]){for(var r=e[s].components[0].components,i={},a=[],n=r.length,o=0;o<n-1;o++){var l={};l.x=r[o].x,l.y=r[o].y,a.push(l);}i.points=a,i.type="REGION",t[s]=i;}}}}]);return Xs;}();r.MathExpressionAnalysisParameters=Xs;r.MathExpressionAnalysisService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht7){_inherits(_class52,_ht7);function _class52(e,t){var _this105;_classCallCheck(this,_class52);_this105=_possibleConstructorReturn(this,_getPrototypeOf(_class52).call(this,e,t)),_this105.CLASS_NAME="SuperMap.MathExpressionAnalysisService";return _this105;}_createClass(_class52,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class52.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var s={};e instanceof Xs&&(t.url+="datasets/"+e.dataset+"/mathanalyst"),Xs.toObject(e,s);var r=c.toJSON(s);t.url+=".json?returnContent=true",t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}]);return _class52;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qs=/*#__PURE__*/function(){function Qs(e,t){_classCallCheck(this,Qs);e&&(this.geometry=e,this.unit=O.METER,this.prjCoordSys=null,this.distanceMode=null,t&&c.extend(this,t),this.CLASS_NAME="SuperMap.MeasureParameters");}_createClass(Qs,[{key:"destroy",value:function destroy(){this.geometry=null,this.unit=null,this.prjCoordSys=null;}}]);return Qs;}();r.MeasureParameters=Qs;r.MeasureService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it20){_inherits(_class53,_it20);function _class53(e,t){var _this106;_classCallCheck(this,_class53);_this106=_possibleConstructorReturn(this,_getPrototypeOf(_class53).call(this,e,t)),_this106.measureMode=P.DISTANCE,t&&c.extend(_assertThisInitialized(_this106),t),_this106.CLASS_NAME="SuperMap.MeasureService";return _this106;}_createClass(_class53,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class53.prototype),"destroy",this).call(this),this.measureMode=null;}},{key:"processAsync",value:function processAsync(e){if(e instanceof Qs){var t,s,r,i=this,a=e.geometry;if(a){r=i.url.substr(i.url.length-1,1),i.measureMode===P.AREA?i.url+="/"===r?"area.json?":"/area.json?":i.url+="/"===r?"distance.json?":"/distance.json?";var n,o,l,h=Ye.fromGeometry(a);h&&(t=h.parts[0],s=h.points.splice(0,t),e.prjCoordSys?("object"==_typeof(e.prjCoordSys)?n='{"epsgCode"'+(o=e.prjCoordSys.projCode).substring(o.indexOf(":"),o.length)+"}":"string"==typeof e.prjCoordSys&&(n='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),l={point2Ds:c.toJSON(s),unit:e.unit,prjCoordSys:n}):l={point2Ds:c.toJSON(s),unit:e.unit},i.request({method:"GET",params:l,scope:i,success:i.serviceProcessCompleted,failure:i.serviceProcessFailed}));}}}}]);return _class53;}(it);r.OverlayAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht8){_inherits(_class54,_ht8);function _class54(e,t){var _this107;_classCallCheck(this,_class54);_this107=_possibleConstructorReturn(this,_getPrototypeOf(_class54).call(this,e,t)),_this107.mode=null,t&&c.extend(_assertThisInitialized(_this107),t),_this107.CLASS_NAME="SuperMap.OverlayAnalystService";return _this107;}_createClass(_class54,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class54.prototype),"destroy",this).call(this),this.mode=null;}},{key:"processAsync",value:function processAsync(e){var t={},s=this;"/"!==s.url.substr(s.url.length-1,1)&&(s.url+="/"),e instanceof Lt?(s.mode="datasets",s.url+="datasets/"+e.sourceDataset+"/overlay.json?returnContent=true",Lt.toObject(e,t)):e instanceof es&&(s.mode="geometry",e.operateGeometries&&e.sourceGeometries?s.url+="geometry/overlay/batch.json?returnContent=true&ignoreAnalystParam=true":s.url+="geometry/overlay.json?returnContent=true",es.toObject(e,t));var r=c.toJSON(t);s.request({method:"POST",data:r,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}]);return _class54;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ks=/*#__PURE__*/function(_vt3){_inherits(Ks,_vt3);function Ks(e,t){var _this108;_classCallCheck(this,Ks);_this108=_possibleConstructorReturn(this,_getPrototypeOf(Ks).call(this,e,t)),_this108.url+="/spatialanalyst/overlay",_this108.CLASS_NAME="SuperMap.OverlayGeoJobsService";return _this108;}_createClass(Ks,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ks.prototype),"destroy",this).call(this);}},{key:"getOverlayGeoJobs",value:function getOverlayGeoJobs(){_get(_getPrototypeOf(Ks.prototype),"getJobs",this).call(this,this.url);}},{key:"getOverlayGeoJob",value:function getOverlayGeoJob(e){_get(_getPrototypeOf(Ks.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addOverlayGeoJob",value:function addOverlayGeoJob(e,t){_get(_getPrototypeOf(Ks.prototype),"addJob",this).call(this,this.url,e,ge,t);}}]);return Ks;}(vt);r.OverlayGeoJobsService=Ks;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Zs=/*#__PURE__*/function(_Tt){_inherits(Zs,_Tt);function Zs(e){var _this109;_classCallCheck(this,Zs);e&&(_this109=_possibleConstructorReturn(this,_getPrototypeOf(Zs).call(this,e)),_this109.returnContent=!0,_this109.bounds=null,c.extend(_assertThisInitialized(_this109),e),_this109.CLASS_NAME="SuperMap.QueryByBoundsParameters");return _this109;}_createClass(Zs,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Zs.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null);}}]);return Zs;}(Tt);r.QueryByBoundsParameters=Zs;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $s=/*#__PURE__*/function(_it21){_inherits($s,_it21);function $s(e,t){var _this110;_classCallCheck(this,$s);_this110=_possibleConstructorReturn(this,_getPrototypeOf($s).call(this,e,t)),_this110.returnContent=!1,_this110.format=T.GEOJSON,_this110.returnFeatureWithFieldCaption=!1,t&&c.extend(_assertThisInitialized(_this110),t),_this110.CLASS_NAME="SuperMap.QueryService";var s,r=_assertThisInitialized(_this110);r.url&&(t&&t.format&&(r.format=t.format.toUpperCase()),s=r.url.substr(r.url.length-1,1),r.url+="/"===s?"queryResults.json?":"/queryResults.json?");return _this110;}_createClass($s,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf($s.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null;}},{key:"processAsync",value:function processAsync(e){if(e instanceof Tt){var t,s=this,r=null;s.returnContent=e.returnContent,t=s.getJsonParameters(e),s.returnContent?s.url+="returnContent="+s.returnContent:(r=e.returnCustomResult)&&(s.url+="returnCustomResult="+r),s.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){e=c.transformResult(e);var t=new Xe();if(e&&e.recordsets)for(var s=0,r=e.recordsets,i=r.length;s<i;s++){r[s].features&&(!0===this.returnFeatureWithFieldCaption&&r[s].features.map(function(e){return e.fieldNames=r[s].fieldCaptions,e;}),this.format===T.GEOJSON&&(r[s].features=t.toGeoJSON(r[s].features)));}this.events.triggerEvent("processCompleted",{result:e});}},{key:"getQueryParameters",value:function getQueryParameters(e){return new Tt({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime});}}]);return $s;}(it);r.QueryService=$s;r.QueryByBoundsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_$s){_inherits(_class55,_$s);function _class55(e,t){var _this111;_classCallCheck(this,_class55);_this111=_possibleConstructorReturn(this,_getPrototypeOf(_class55).call(this,e,t)),_this111.CLASS_NAME="SuperMap.QueryByBoundsService";return _this111;}_createClass(_class55,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class55.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){if(!(e instanceof Zs))return null;var t,s="",r=e.bounds;return t=this.getQueryParameters(e),s+="'queryMode':'BoundsQuery','queryParameters':",s+=c.toJSON(t),s="{"+(s+=",'bounds': {'rightTop':{'y':"+r.top+",'x':"+r.right+"},'leftBottom':{'y':"+r.bottom+",'x':"+r.left+"}}")+"}";}}]);return _class55;}($s);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var er=/*#__PURE__*/function(_Tt2){_inherits(er,_Tt2);function er(e){var _this112;_classCallCheck(this,er);e&&(_this112=_possibleConstructorReturn(this,_getPrototypeOf(er).call(this,e)),_this112.distance=0,_this112.geometry=null,_this112.isNearest=null,_this112.returnContent=!0,c.extend(_assertThisInitialized(_this112),e),_this112.CLASS_NAME="SuperMap.QueryByDistanceParameters");return _this112;}_createClass(er,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(er.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null);}}]);return er;}(Tt);r.QueryByDistanceParameters=er;r.QueryByDistanceService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_$s2){_inherits(_class56,_$s2);function _class56(e,t){var _this113;_classCallCheck(this,_class56);_this113=_possibleConstructorReturn(this,_getPrototypeOf(_class56).call(this,e,t)),_this113.CLASS_NAME="SuperMap.QueryByDistanceService";return _this113;}_createClass(_class56,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class56.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){if(e instanceof er){var t="",s=this.getQueryParameters(e),r=Ye.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=c.toJSON(s),t="{"+(t+=",'geometry':"+c.toJSON(r)+",'distance':"+e.distance)+"}";}}}]);return _class56;}($s);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var tr=/*#__PURE__*/function(_Tt3){_inherits(tr,_Tt3);function tr(e){var _this114;_classCallCheck(this,tr);e&&(_this114=_possibleConstructorReturn(this,_getPrototypeOf(tr).call(this,e)),_this114.returnContent=!0,_this114.geometry=null,_this114.spatialQueryMode=N.INTERSECT,c.extend(_assertThisInitialized(_this114),e),_this114.CLASS_NAME="SuperMap.QueryByGeometryParameters");return _this114;}_createClass(tr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(tr.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null;}}]);return tr;}(Tt);r.QueryByGeometryParameters=tr;r.QueryByGeometryService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_$s3){_inherits(_class57,_$s3);function _class57(e,t){var _this115;_classCallCheck(this,_class57);_this115=_possibleConstructorReturn(this,_getPrototypeOf(_class57).call(this,e,t)),_this115.CLASS_NAME="SuperMap.QueryByGeometryService";return _this115;}_createClass(_class57,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class57.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){if(e instanceof tr){var t,s="",r=e.geometry,i=Ye.fromGeometry(r);return t=this.getQueryParameters(e),s+="'queryMode':'SpatialQuery','queryParameters':",s="{"+(s+=c.toJSON(t)+",'geometry':"+c.toJSON(i)+",'spatialQueryMode':"+c.toJSON(e.spatialQueryMode))+"}";}}}]);return _class57;}($s);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sr=/*#__PURE__*/function(_Tt4){_inherits(sr,_Tt4);function sr(e){var _this116;_classCallCheck(this,sr);e&&(_this116=_possibleConstructorReturn(this,_getPrototypeOf(sr).call(this,e)),_this116.returnContent=!0,c.extend(_assertThisInitialized(_this116),e),_this116.CLASS_NAME="SuperMap.QueryBySQLParameters");return _this116;}_createClass(sr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(sr.prototype),"destroy",this).call(this);this.returnContent=null;}}]);return sr;}(Tt);r.QueryBySQLParameters=sr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var rr=/*#__PURE__*/function(_$s4){_inherits(rr,_$s4);function rr(e,t){var _this117;_classCallCheck(this,rr);_this117=_possibleConstructorReturn(this,_getPrototypeOf(rr).call(this,e,t)),_this117.CLASS_NAME="SuperMap.QueryBySQLService";return _this117;}_createClass(rr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(rr.prototype),"destroy",this).call(this);}},{key:"getJsonParameters",value:function getJsonParameters(e){if(e instanceof sr){var t,s="";return t=this.getQueryParameters(e),s+="'queryMode':'SqlQuery','queryParameters':",s="{"+(s+=c.toJSON(t))+"}";}}}]);return rr;}($s);r.QueryBySQLService=rr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ir=/*#__PURE__*/function(){function ir(e){_classCallCheck(this,ir);if(!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters";}_createClass(ir,[{key:"destroy",value:function destroy(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1);}}]);return ir;}();r.RouteCalculateMeasureParameters=ir;r.RouteCalculateMeasureService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht9){_inherits(_class58,_ht9);function _class58(e,t){var _this118;_classCallCheck(this,_class58);_this118=_possibleConstructorReturn(this,_getPrototypeOf(_class58).call(this,e,t)),_this118.CLASS_NAME="SuperMap.RouteCalculateMeasureService";return _this118;}_createClass(_class58,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class58.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof ir){var t,s=this;t=s.getJsonParameters(e),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJsonParameters",value:function getJsonParameters(e){var t,s="geometry/calculatemeasure";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?s+".json":"/"+s+".json",this.url+="?returnContent=true",c.toJSON(e);}}]);return _class58;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ar=/*#__PURE__*/function(){function ar(e){_classCallCheck(this,ar);if(!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var t=e.sourceRoute,s={};if(t&&t instanceof we&&t.components){s.type=t.type,s.parts=t.parts;for(var r=[],i=0,a=t.components.length;i<a;i++){r=r.concat(t.components[i].components);}s.points=r,e.sourceRoute=s;}c.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters";}_createClass(ar,[{key:"destroy",value:function destroy(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null;}}]);return ar;}();r.RouteLocatorParameters=ar;r.RouteLocatorService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht10){_inherits(_class59,_ht10);function _class59(e,t){var _this119;_classCallCheck(this,_class59);_this119=_possibleConstructorReturn(this,_getPrototypeOf(_class59).call(this,e,t)),_this119.CLASS_NAME="SuperMap.RouteLocatorService";return _this119;}_createClass(_class59,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class59.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof ar){var t,s=this;t=s.getJsonParameters(e),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJsonParameters",value:function getJsonParameters(e){var t,s="geometry/routelocator";return t=this.url.substr(this.url.length-1,1),e.dataset&&(s="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url+="/"===t?s+".json":"/"+s+".json",this.url+="?returnContent=true",c.toJSON(e);}}]);return _class59;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nr=/*#__PURE__*/function(){function nr(e){_classCallCheck(this,nr);this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature";}_createClass(nr,[{key:"destroy",value:function destroy(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null);}},{key:"toFeature",value:function toFeature(){var e,t,s,r,i={},a=this;for(var n in e=a.fieldNames,t=a.fieldValues,e){i[e[n]]=t[n];}return a.geometry&&(s=a.geometry.toGeometry()),r=new He(s,i),a.geometry&&a.geometry.id&&(r.fid=a.geometry.id),r;}}],[{key:"fromJson",value:function fromJson(e){var t=null;if(e)return(t=e.geometry)&&(t=Ye.fromJson(t)),new nr({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:t});}}]);return nr;}();r.ServerFeature=nr;r.SetLayerInfoParameters=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class60(e){_classCallCheck(this,_class60);e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,c.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters";}_createClass(_class60,[{key:"destroy",value:function destroy(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null;}}]);return _class60;}();r.SetLayerInfoService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it22){_inherits(_class61,_it22);function _class61(e,t){var _this120;_classCallCheck(this,_class61);_this120=_possibleConstructorReturn(this,_getPrototypeOf(_class61).call(this,e,t)),t&&c.extend(_assertThisInitialized(_this120),t),_this120.CLASS_NAME="SuperMap.SetLayerInfoService";return _this120;}_createClass(_class61,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class61.prototype),"destroy",this).call(this),c.reset(this);}},{key:"processAsync",value:function processAsync(e){if(e){var t=this;t.url+=".json";var s=c.toJSON(e);t.request({method:"PUT",data:s,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}}]);return _class61;}(it);r.SetLayersInfoParameters=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class62(e){_classCallCheck(this,_class62);e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,c.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters";}_createClass(_class62,[{key:"destroy",value:function destroy(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null;}}]);return _class62;}();r.SetLayersInfoService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it23){_inherits(_class63,_it23);function _class63(e,t){var _this121;_classCallCheck(this,_class63);_this121=_possibleConstructorReturn(this,_getPrototypeOf(_class63).call(this,e,t)),_this121.resourceID=null,_this121.isTempLayers=!1,t&&r.Util.extend(_assertThisInitialized(_this121),t),_this121.CLASS_NAME="SuperMap.SetLayersInfoService";return _this121;}_createClass(_class63,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class63.prototype),"destroy",this).call(this),c.reset(this);}},{key:"processAsync",value:function processAsync(e){if(e){var t,s,r=[],i=this,a="";s=i.url.substr(i.url.length-1,1),i.url+="/"===s?"":"/",i.isTempLayers?(i.url+="tempLayersSet/"+i.resourceID,a="PUT"):(i.url+="tempLayersSet",a="POST"),i.url+=".json?",e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var n=e.subLayers.layers,o=n.length;for(var _e36 in n){if("GRID"===n[_e36].ugcLayerType){var l={},h=n[_e36].colorDictionarys;for(var u in h){l[h[u].elevation]=h[u].color;}}n[_e36].colorDictionary=l,delete n[_e36].colorDictionarys;}for(var _e37=0;_e37<o;_e37++){n[_e37].toJsonObject?r.push(n[_e37].toJsonObject()):r.push(n[_e37]);}(t=c.extend(t,e)).subLayers={layers:r},t.object=null;var d=c.toJSON([t]);i.request({method:a,data:d,scope:i,success:i.serviceProcessCompleted,failure:i.serviceProcessFailed});}}}]);return _class63;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var or=/*#__PURE__*/function(){function or(e){_classCallCheck(this,or);this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&c.extend(this,e);}_createClass(or,[{key:"destroy",value:function destroy(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null;}},{key:"toJSON",value:function toJSON(){var e="{";e+='"layers":[';for(var t=[],s=0,r=this.layerStatusList.length;s<r;s++){t.push(this.layerStatusList[s].toJSON());}return e+=t,e+="]",e+="}";}}]);return or;}();r.SetLayerStatusParameters=or;r.SetLayerStatusService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it24){_inherits(_class64,_it24);function _class64(e,t){var _this122;_classCallCheck(this,_class64);_this122=_possibleConstructorReturn(this,_getPrototypeOf(_class64).call(this,e,t)),_this122.lastparams=null,_this122.mapUrl=e,t&&c.extend(_assertThisInitialized(_this122),t),_this122.CLASS_NAME="SuperMap.SetLayerStatusService";return _this122;}_createClass(_class64,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class64.prototype),"destroy",this).call(this),c.reset(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof or){var t=this;t.url=t.mapUrl;var s=t.url.substr(t.url.length-1,1);if(t.url+="/"===s?"":"/",null==e.resourceID)t.url+="tempLayersSet",t.url+=".json?",t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url+="tempLayersSet/"+e.resourceID,t.url+=".json?",t.url+="elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString();var r="[{";r+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(r+='"subLayers":'+e.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",t.request({method:"PUT",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}}},{key:"createTempLayerComplete",value:function createTempLayerComplete(e){(e=c.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams);}},{key:"getMapName",value:function getMapName(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var s=t.lastIndexOf("/");return t.substring(s+1,t.length);}},{key:"serviceProcessCompleted",value:function serviceProcessCompleted(e){null!=(e=c.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e});}}]);return _class64;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lr=/*#__PURE__*/function(_vt4){_inherits(lr,_vt4);function lr(e,t){var _this123;_classCallCheck(this,lr);_this123=_possibleConstructorReturn(this,_getPrototypeOf(lr).call(this,e,t)),_this123.url+="/spatialanalyst/query",_this123.CLASS_NAME="SuperMap.SingleObjectQueryJobsService";return _this123;}_createClass(lr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(lr.prototype),"destroy",this).call(this);}},{key:"getQueryJobs",value:function getQueryJobs(){_get(_getPrototypeOf(lr.prototype),"getJobs",this).call(this,this.url);}},{key:"getQueryJob",value:function getQueryJob(e){_get(_getPrototypeOf(lr.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addQueryJob",value:function addQueryJob(e,t){_get(_getPrototypeOf(lr.prototype),"addJob",this).call(this,this.url,e,pe,t);}}]);return lr;}(vt);r.SingleObjectQueryJobsService=lr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hr=/*#__PURE__*/function(){function hr(e){_classCallCheck(this,hr);e=e||{},this.keyWord=null,this.returnPosition=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters";}_createClass(hr,[{key:"destroy",value:function destroy(){c.reset(this);}}]);return hr;}();r.StopQueryParameters=hr;r.StopQueryService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it25){_inherits(_class65,_it25);function _class65(e,t){var _this124;_classCallCheck(this,_class65);_this124=_possibleConstructorReturn(this,_getPrototypeOf(_class65).call(this,e,t)),t=t||{},c.extend(_assertThisInitialized(_this124),t),_this124.CLASS_NAME="SuperMap.StopQueryService";return _this124;}_createClass(_class65,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class65.prototype),"destroy",this).call(this),c.reset(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof hr){var t,s=this;t=s.url.substr(s.url.length-1,1),s.url+="/"===t?"":"/",s.url+="stops/keyword/"+e.keyWord,s.url+=".json?",s.request({method:"GET",params:{returnPosition:e.returnPosition},scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}}]);return _class65;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ur=/*#__PURE__*/function(_vt5){_inherits(ur,_vt5);function ur(e,t){var _this125;_classCallCheck(this,ur);_this125=_possibleConstructorReturn(this,_getPrototypeOf(ur).call(this,e,t)),_this125.url+="/spatialanalyst/summaryattributes",_this125.CLASS_NAME="SuperMap.SummaryAttributesJobsService";return _this125;}_createClass(ur,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ur.prototype),"destroy",this).call(this);}},{key:"getSummaryAttributesJobs",value:function getSummaryAttributesJobs(){_get(_getPrototypeOf(ur.prototype),"getJobs",this).call(this,this.url);}},{key:"getSummaryAttributesJob",value:function getSummaryAttributesJob(e){_get(_getPrototypeOf(ur.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addSummaryAttributesJob",value:function addSummaryAttributesJob(e,t){_get(_getPrototypeOf(ur.prototype),"addJob",this).call(this,this.url,e,me,t);}}]);return ur;}(vt);r.SummaryAttributesJobsService=ur;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var cr=/*#__PURE__*/function(_vt6){_inherits(cr,_vt6);function cr(e,t){var _this126;_classCallCheck(this,cr);_this126=_possibleConstructorReturn(this,_getPrototypeOf(cr).call(this,e,t)),_this126.url+="/spatialanalyst/aggregatepoints",_this126.CLASS_NAME="SuperMap.SummaryMeshJobsService";return _this126;}_createClass(cr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(cr.prototype),"destroy",this).call(this);}},{key:"getSummaryMeshJobs",value:function getSummaryMeshJobs(){_get(_getPrototypeOf(cr.prototype),"getJobs",this).call(this,this.url);}},{key:"getSummaryMeshJob",value:function getSummaryMeshJob(e){_get(_getPrototypeOf(cr.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addSummaryMeshJob",value:function addSummaryMeshJob(e,t){_get(_getPrototypeOf(cr.prototype),"addJob",this).call(this,this.url,e,fe,t);}}]);return cr;}(vt);r.SummaryMeshJobsService=cr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dr=/*#__PURE__*/function(_vt7){_inherits(dr,_vt7);function dr(e,t){var _this127;_classCallCheck(this,dr);_this127=_possibleConstructorReturn(this,_getPrototypeOf(dr).call(this,e,t)),_this127.url+="/spatialanalyst/summaryregion",_this127.CLASS_NAME="SuperMap.SummaryRegionJobsService";return _this127;}_createClass(dr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(dr.prototype),"destroy",this).call(this);}},{key:"getSummaryRegionJobs",value:function getSummaryRegionJobs(){_get(_getPrototypeOf(dr.prototype),"getJobs",this).call(this,this.url);}},{key:"getSummaryRegionJob",value:function getSummaryRegionJob(e){_get(_getPrototypeOf(dr.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addSummaryRegionJob",value:function addSummaryRegionJob(e,t){_get(_getPrototypeOf(dr.prototype),"addJob",this).call(this,this.url,e,ye,t);}}]);return dr;}(vt);r.SummaryRegionJobsService=dr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pr=/*#__PURE__*/function(){function pr(e){_classCallCheck(this,pr);this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter";}_createClass(pr,[{key:"destroy",value:function destroy(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null;}}],[{key:"fromJson",value:function fromJson(e){if(e)return new pr({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type});}}]);return pr;}();r.SupplyCenter=pr;r.SurfaceAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht11){_inherits(_class66,_ht11);function _class66(e,t){var _this128;_classCallCheck(this,_class66);_this128=_possibleConstructorReturn(this,_getPrototypeOf(_class66).call(this,e,t)),_this128.CLASS_NAME="SuperMap.SurfaceAnalystService";return _this128;}_createClass(_class66,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class66.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof It){var t,s=this;t=s.getJsonParameters(e),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJsonParameters",value:function getJsonParameters(e){var t,s="",r={},i=this;if(e instanceof Rt)t=i.url.substr(i.url.length-1,1),i.url+="/"===t?"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",Rt.toObject(e,r),s=c.toJSON(r);else{if(!(e instanceof ts))return;t=i.url.substr(i.url.length-1,1),i.url+="/"===t?"geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",s=c.toJSON(e);}return s;}}]);return _class66;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mr=/*#__PURE__*/function(){function mr(e){_classCallCheck(this,mr);e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,c.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters");}_createClass(mr,[{key:"destroy",value:function destroy(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0;}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"dataset"!==s&&(t[s]=e[s]);}}}]);return mr;}();r.TerrainCurvatureCalculationParameters=mr;r.TerrainCurvatureCalculationService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht12){_inherits(_class67,_ht12);function _class67(e,t){var _this129;_classCallCheck(this,_class67);_this129=_possibleConstructorReturn(this,_getPrototypeOf(_class67).call(this,e,t)),_this129.CLASS_NAME="SuperMap.TerrainCurvatureCalculationService";return _this129;}_createClass(_class67,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class67.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var s={};e instanceof mr&&(t.url+="datasets/"+e.dataset+"/terraincalculation/curvature"),mr.toObject(e,s);var i=r.Util.toJSON(s);t.url+=".json?returnContent=true",t.request({method:"POST",data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}]);return _class67;}(ht);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fr=/*#__PURE__*/function(){function fr(e){_classCallCheck(this,fr);this.caption=null,this.color=new Ve(),this.end=0,this.start=0,this.visible=!0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem";}_createClass(fr,[{key:"destroy",value:function destroy(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new fr();return c.copy(t,e),t.color=Ve.fromJson(e.color),t;}}}]);return fr;}();r.ThemeGridRangeItem=fr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var yr=/*#__PURE__*/function(_ps7){_inherits(yr,_ps7);function yr(e){var _this130;_classCallCheck(this,yr);_this130=_possibleConstructorReturn(this,_getPrototypeOf(yr).call(this,"GRIDRANGE",e)),_this130.items=null,_this130.rangeMode=F.EQUALINTERVAL,_this130.rangeParameter=0,_this130.colorGradientType=k.YELLOW_RED,_this130.reverseColor=!1,e&&c.extend(_assertThisInitialized(_this130),e),_this130.CLASS_NAME="SuperMap.ThemeGridRange";return _this130;}_createClass(yr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(yr.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items){e.items[t].destroy(),e.items[t]=null;}e.items=null;}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new yr();c.copy(t,e);var s=e.items,r=s?s.length:0;t.items=[];for(var i=0;i<r;i++){t.items.push(fr.fromObj(s[i]));}return t;}}}]);return yr;}(ps);r.ThemeGridRange=yr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var gr=/*#__PURE__*/function(){function gr(e){_classCallCheck(this,gr);this.caption=null,this.color=new Ve(),this.unique=null,this.visible=!0,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem";}_createClass(gr,[{key:"destroy",value:function destroy(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null;}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};return(e=c.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e;}}],[{key:"fromObj",value:function fromObj(e){var t=new gr();return c.copy(t,e),t.color=Ve.fromJson(e.color),t;}}]);return gr;}();r.ThemeGridUniqueItem=gr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vr=/*#__PURE__*/function(_ps8){_inherits(vr,_ps8);function vr(e){var _this131;_classCallCheck(this,vr);_this131=_possibleConstructorReturn(this,_getPrototypeOf(vr).call(this,"GRIDUNIQUE",e)),_this131.defaultcolor=new Ve(),_this131.items=null,e&&c.extend(_assertThisInitialized(_this131),e),_this131.CLASS_NAME="SuperMap.ThemeGridUnique";return _this131;}_createClass(vr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(vr.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items){e.items[t].destroy(),e.items[t]=null;}e.items=null;}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null);}},{key:"toServerJSONObject",value:function toServerJSONObject(){var e={};if((e=c.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],s=e.items.length,r=0;r<s;r++){t.push(e.items[r].toServerJSONObject());}e.items=t;}return e;}}],[{key:"fromObj",value:function fromObj(e){var t=new vr(),s=e.items,r=s?s.length:0;c.extend(t,e),t.items=[],t.defaultcolor=Ve.fromJson(e.defaultcolor);for(var i=0;i<r;i++){t.items.push(gr.fromObj(s[i]));}return t;}}]);return vr;}(ps);r.ThemeGridUnique=vr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Sr=/*#__PURE__*/function(){function Sr(e){_classCallCheck(this,Sr);this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new ms(),e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem";}_createClass(Sr,[{key:"destroy",value:function destroy(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null;}}],[{key:"fromObj",value:function fromObj(e){if(e){var t=new Sr();return c.copy(t,e),t;}}}]);return Sr;}();r.ThemeLabelUniqueItem=Sr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var br=/*#__PURE__*/function(){function br(e){_classCallCheck(this,br);this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&c.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters";}_createClass(br,[{key:"destroy",value:function destroy(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var _t23=0,_s17=e.joinItems,_r8=_s17.length;_t23<_r8;_t23++){_s17[_t23].destroy();}e.joinItems=null;}if(e.themes){for(var _t24=0,_s18=e.themes,_r9=_s18.length;_t24<_r9;_t24++){_s18[_t24].destroy();}e.themes=null;}}}]);return br;}();r.ThemeParameters=br;r.ThemeService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it26){_inherits(_class68,_it26);function _class68(e,t){var _this132;_classCallCheck(this,_class68);var s;_this132=_possibleConstructorReturn(this,_getPrototypeOf(_class68).call(this,e,t)),t&&r.Util.extend(_assertThisInitialized(_this132),t),s=_this132.url.substr(_this132.url.length-1,1),_this132.url+="/"===s?"tempLayersSet.json?":"/tempLayersSet.json?",_this132.CLASS_NAME="SuperMap.ThemeService";return _this132;}_createClass(_class68,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class68.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof br){var t,s=this;t=s.getJsonParameters(e),s.request({method:"POST",data:t,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}},{key:"getJsonParameters",value:function getJsonParameters(e){var t,s="",r=null,i=null,a=null;s+="[{'type': 'UGC','subLayers': {'layers': [";for(var n=0;n<e.themes.length;n++){r=e.themes[n];var o=c.toJSON(r);if(s+="{'theme': "+(o=o.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(i=e.displayFilters)&&i.length>0&&(1===i.length?s+="'displayFilter':\""+i[0]+'",':s+="'displayFilter':\""+i[n]+'",'),(a=e.displayOrderBy)&&a.length>0&&(1===a.length?s+="'displayOrderBy':'"+a[0]+"',":s+="'displayOrderBy':'"+a[n]+"',"),(t=e.fieldValuesDisplayFilter)&&(s+="'fieldValuesDisplayFilter':"+c.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[n]&&(s+="'joinItems':["+c.toJSON(e.joinItems[n])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[n]?n:e.datasetNames.length-1,h=e.dataSourceNames[n]?n:e.dataSourceNames.length-1;s+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[h]+"'}},";}else s+="},";}e.themes&&e.themes.length>0&&(s=s.substring(0,s.length-1)),s+="]},";var u=this.url.split("/");return s+="'name': '"+u[u.length-2]+"'}]";}}]);return _class68;}(it);r.ThiessenAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht13){_inherits(_class69,_ht13);function _class69(e,t){var _this133;_classCallCheck(this,_class69);_this133=_possibleConstructorReturn(this,_getPrototypeOf(_class69).call(this,e,t)),_this133.mode=null,t&&c.extend(_assertThisInitialized(_this133),t),_this133.CLASS_NAME="SuperMap.ThiessenAnalystService";return _this133;}_createClass(_class69,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class69.prototype),"destroy",this).call(this),this.mode=null;}},{key:"processAsync",value:function processAsync(e){var t={},s=this;"/"!==s.url.substr(s.url.length-1,1)&&(s.url+="/"),e instanceof Ft?(s.mode="datasets",s.url+="datasets/"+e.dataset+"/thiessenpolygon",Ft.toObject(e,t)):e instanceof ss&&(s.mode="geometry",s.url+="geometry/thiessenpolygon",ss.toObject(e,t));var r=c.toJSON(t);s.url+=".json?returnContent=true",s.request({method:"POST",data:r,scope:s,success:s.serviceProcessCompleted,failure:s.serviceProcessFailed});}}]);return _class69;}(ht);r.GeometryBatchAnalystService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ht14){_inherits(_class70,_ht14);function _class70(e,t){var _this134;_classCallCheck(this,_class70);_this134=_possibleConstructorReturn(this,_getPrototypeOf(_class70).call(this,e,t)),t&&c.extend(_assertThisInitialized(_this134),t),_this134.CLASS_NAME="SuperMap.GeometryBatchAnalystService";return _this134;}_createClass(_class70,[{key:"processAsync",value:function processAsync(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/"),t.url+="geometry/batchanalyst.json?returnContent=true&ignoreAnalystParam=true";var s=t._processParams(e),r=c.toJSON(s);t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}},{key:"_processParams",value:function _processParams(e){var t=this;if(c.isArray(e)){var s=[];return e.map(function(e){return s.push(t._toJSON(e)),e;}),s;}}},{key:"_toJSON",value:function _toJSON(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},gt.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},es.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},js.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},js.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},js.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},js.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},ss.toObject(e.param,t.param);}return t;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class70.prototype),"destroy",this).call(this);}}]);return _class70;}(ht);r.TilesetsService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it27){_inherits(_class71,_it27);function _class71(e,t){var _this135;_classCallCheck(this,_class71);_this135=_possibleConstructorReturn(this,_getPrototypeOf(_class71).call(this,e,t)),_this135.CLASS_NAME="SuperMap.TilesetsService";return _this135;}_createClass(_class71,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class71.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(){if(this.url){var e=this,t=e.url.substr(e.url.length-1,1);e.url=e.url+("/"===t?"tilesets":"/tilesets")+".json?",e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed});}}}]);return _class71;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xr=/*#__PURE__*/function(_vt8){_inherits(xr,_vt8);function xr(e,t){var _this136;_classCallCheck(this,xr);_this136=_possibleConstructorReturn(this,_getPrototypeOf(xr).call(this,e,t)),_this136.url+="/spatialanalyst/topologyvalidator",_this136.CLASS_NAME="SuperMap.TopologyValidatorJobsService";return _this136;}_createClass(xr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(xr.prototype),"destroy",this).call(this);}},{key:"getTopologyValidatorJobs",value:function getTopologyValidatorJobs(){_get(_getPrototypeOf(xr.prototype),"getJobs",this).call(this,this.url);}},{key:"getTopologyValidatorJob",value:function getTopologyValidatorJob(e){_get(_getPrototypeOf(xr.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addTopologyValidatorJob",value:function addTopologyValidatorJob(e,t){_get(_getPrototypeOf(xr.prototype),"addJob",this).call(this,this.url,e,Se,t);}}]);return xr;}(vt);r.TopologyValidatorJobsService=xr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Cr=/*#__PURE__*/function(){function Cr(e){_classCallCheck(this,Cr);e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,c.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine";}_createClass(Cr,[{key:"destroy",value:function destroy(){c.reset(this);}}],[{key:"fromJson",value:function fromJson(e){if(e)return new Cr({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName});}}]);return Cr;}();r.TransferLine=Cr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _r=/*#__PURE__*/function(){function _r(e){_classCallCheck(this,_r);e=e||{},this.transferLines=null,this.points=null,c.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters";}_createClass(_r,[{key:"destroy",value:function destroy(){c.reset(this);}}],[{key:"toJson",value:function toJson(e){if(e)return c.toJSON(e);}}]);return _r;}();r.TransferPathParameters=_r;r.TransferPathService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it28){_inherits(_class72,_it28);function _class72(e,t){var _this137;_classCallCheck(this,_class72);_this137=_possibleConstructorReturn(this,_getPrototypeOf(_class72).call(this,e,t)),_this137.CLASS_NAME="SuperMap.TransferPathService";return _this137;}_createClass(_class72,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class72.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof _r){var t,s,r=this;s=r.url.substr(r.url.length-1,1),r.url+="/"===s?"":"/",r.url+="path.json?",t={points:c.toJSON(e.points),transferLines:c.toJSON(e.transferLines)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed});}}}]);return _class72;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Tr=/*#__PURE__*/function(){function Tr(e){_classCallCheck(this,Tr);e=e||{},this.solutionCount=6,this.transferPreference=Q.NONE,this.transferTactic=X.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,c.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters";}_createClass(Tr,[{key:"destroy",value:function destroy(){c.reset(this);}}],[{key:"toJson",value:function toJson(e){if(e)return c.toJSON(e);}}]);return Tr;}();r.TransferSolutionParameters=Tr;r.TransferSolutionService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_it29){_inherits(_class73,_it29);function _class73(e,t){var _this138;_classCallCheck(this,_class73);_this138=_possibleConstructorReturn(this,_getPrototypeOf(_class73).call(this,e,t)),_this138.CLASS_NAME="SuperMap.TransferSolutionService";return _this138;}_createClass(_class73,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class73.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Tr){var t,s,r=this;s=r.url.substr(r.url.length-1,1),r.url+="/"===s?"":"/",r.url+="solutions.json?",t={points:c.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=c.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=c.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=c.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=c.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed});}}}]);return _class73;}(it);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Er=/*#__PURE__*/function(){function Er(e){_classCallCheck(this,Er);e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",c.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters");}_createClass(Er,[{key:"destroy",value:function destroy(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null;}}]);return Er;}();r.UpdateEdgeWeightParameters=Er;r.UpdateEdgeWeightService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt10){_inherits(_class74,_xt10);function _class74(e,t){var _this139;_classCallCheck(this,_class74);_this139=_possibleConstructorReturn(this,_getPrototypeOf(_class74).call(this,e,t)),_this139.CLASS_NAME="SuperMap.UpdateEdgeWeightService";return _this139;}_createClass(_class74,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class74.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Er){var t=this,s=t.url.substr(t.url.length-1,1),r=t.parse(e);"/"===s&&t.url.splice(t.url.length-1,1),t.url=t.url+r+".json?";var i=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:i,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}},{key:"parse",value:function parse(e){if(e){var t="";for(var s in e){if(""!==e[s]&&"edgeWeight"!==e[s])switch(s){case"edgeId":t+="/edgeweight/"+e[s];break;case"fromNodeId":t+="/fromnode/"+e[s];break;case"toNodeId":t+="/tonode/"+e[s];break;case"weightField":t+="/weightfield/"+e[s];}}return t;}}}]);return _class74;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ar=/*#__PURE__*/function(){function Ar(e){_classCallCheck(this,Ar);e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",c.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters");}_createClass(Ar,[{key:"destroy",value:function destroy(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null;}}]);return Ar;}();r.UpdateTurnNodeWeightParameters=Ar;r.UpdateTurnNodeWeightService=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_xt11){_inherits(_class75,_xt11);function _class75(e,t){var _this140;_classCallCheck(this,_class75);_this140=_possibleConstructorReturn(this,_getPrototypeOf(_class75).call(this,e,t)),_this140.CLASS_NAME="SuperMap.UpdateTurnNodeWeightService";return _this140;}_createClass(_class75,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class75.prototype),"destroy",this).call(this);}},{key:"processAsync",value:function processAsync(e){if(e instanceof Ar){var t=this,s=t.url.substr(t.url.length-1,1),r=t.parse(e);"/"===s&&t.url.splice(t.url.length-1,1),t.url=t.url+r+".json?";var i=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:i,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed});}}},{key:"parse",value:function parse(e){if(e){var t="";for(var s in e){if(""!==e[s]&&"turnNodeWeight"!==e[s])switch(s){case"nodeId":t+="/turnnodeweight/"+e[s];break;case"fromEdgeId":t+="/fromedge/"+e[s];break;case"toEdgeId":t+="/toedge/"+e[s];break;case"weightField":t+="/weightfield/"+e[s];}}return t;}}}]);return _class75;}(xt);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wr=/*#__PURE__*/function(){function wr(e){_classCallCheck(this,wr);e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=ee.CLIP,this.output=null,this.mappingParameters=null,c.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter";}_createClass(wr,[{key:"destroy",value:function destroy(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof ue&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ce&&(this.mappingParameters.destroy(),this.mappingParameters=null);}}],[{key:"toObject",value:function toObject(e,t){for(var s in e){"datasetName"!==s?"output"!==s?(t.analyst=t.analyst||{},t.analyst[s]=e[s],"mappingParameters"===s&&(t.analyst[s]=t.analyst[s]||{},t.analyst.mappingParameters=e[s])):(t.output=t.output||{},t.output=e[s]):(t.input=t.input||{},t.input[s]=e[s]);}}}]);return wr;}();r.VectorClipJobsParameter=wr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nr=/*#__PURE__*/function(_vt9){_inherits(Nr,_vt9);function Nr(e,t){var _this141;_classCallCheck(this,Nr);_this141=_possibleConstructorReturn(this,_getPrototypeOf(Nr).call(this,e,t)),_this141.url+="/spatialanalyst/vectorclip",_this141.CLASS_NAME="SuperMap.VectorClipJobsService";return _this141;}_createClass(Nr,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Nr.prototype),"destroy",this).call(this);}},{key:"getVectorClipJobs",value:function getVectorClipJobs(){_get(_getPrototypeOf(Nr.prototype),"getJobs",this).call(this,this.url);}},{key:"getVectorClipJob",value:function getVectorClipJob(e){_get(_getPrototypeOf(Nr.prototype),"getJobs",this).call(this,this.url+"/"+e);}},{key:"addVectorClipJob",value:function addVectorClipJob(e,t){_get(_getPrototypeOf(Nr.prototype),"addJob",this).call(this,this.url,e,wr,t);}}]);return Nr;}(vt);r.VectorClipJobsService=Nr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pr=/*#__PURE__*/function(){function Pr(e){_classCallCheck(this,Pr);e=e||{},this.type=null,c.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter";}_createClass(Pr,[{key:"destroy",value:function destroy(){this.type=null;}}]);return Pr;}();r.RasterFunctionParameter=Pr;r.NDVIParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Pr){_inherits(_class76,_Pr);function _class76(e){var _this142;_classCallCheck(this,_class76);_this142=_possibleConstructorReturn(this,_getPrototypeOf(_class76).call(this,e)),_this142.redIndex=0,_this142.nirIndex=1,_this142.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",_this142.type=le.NDVI,c.extend(_assertThisInitialized(_this142),e),_this142.CLASS_NAME="SuperMap.NDVIParameter";return _this142;}_createClass(_class76,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class76.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null;}},{key:"toJSON",value:function toJSON(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type};}}]);return _class76;}(Pr);r.HillshadeParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Pr2){_inherits(_class77,_Pr2);function _class77(e){var _this143;_classCallCheck(this,_class77);_this143=_possibleConstructorReturn(this,_getPrototypeOf(_class77).call(this,e)),_this143.altitude=45,_this143.azimuth=315,_this143.zFactor=1,_this143.type=le.HILLSHADE,c.extend(_assertThisInitialized(_this143),e),_this143.CLASS_NAME="SuperMap.HillshadeParameter";return _this143;}_createClass(_class77,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class77.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null;}},{key:"toJSON",value:function toJSON(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type};}}]);return _class77;}(Pr);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},r.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},r.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},r.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Or=/*#__PURE__*/function(){function Or(e){_classCallCheck(this,Or);e=e||{},c.extend(this,e),this.serverType=E.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase";}_createClass(Or,[{key:"request",value:function request(e,t,s){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return t=this.createCredentialUrl(t),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers,C.commit(e,t,s,r).then(function(e){return e.json();});}},{key:"createCredentialUrl",value:function createCredentialUrl(e){var t=e,s=this.getCredential();if(s){var r="key="+s,i=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===i?t+=r:t.indexOf("?")>-1&&"?"!==i?t+="&"+r:t+="?"+r;}return t;}},{key:"getCredential",value:function getCredential(){}}]);return Or;}();r.OnlineServiceBase=Or;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Lr=/*#__PURE__*/function(_Or){_inherits(Lr,_Or);function Lr(e,t){var _this144;_classCallCheck(this,Lr);_this144=_possibleConstructorReturn(this,_getPrototypeOf(Lr).call(this,e)),t=t||{},_this144.MD5=null,_this144.type=null,_this144.userName=null,_this144.fileName=null,_this144.size=null,_this144.serviceStatus=null,_this144.serviceId=null,_this144.id=null,_this144.lastModfiedTime=null,_this144.status=null,_this144.storageId=null,_this144.publishInfo=null,_this144.authorizeSetting=null,_this144.nickname=null,_this144.tags=[],_this144.description=null,_this144.dataItemServices=null,_this144.coordType=null,_this144.dataCheckResult=null,_this144.dataMetaInfo=null,_this144.thumbnail=null,c.extend(_assertThisInitialized(_this144),t),_this144.id&&(_this144.serviceUrl=e+"/"+_this144.id),_this144.CLASS_NAME="SuperMap.OnlineData";return _this144;}_createClass(Lr,[{key:"load",value:function load(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){c.extend(e,t);});}}},{key:"getPublishedServices",value:function getPublishedServices(){return this.dataItemServices;}},{key:"getAuthorizeSetting",value:function getAuthorizeSetting(){return this.authorizeSetting;}}]);return Lr;}(Or);r.OnlineData=Lr;r.Online=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class78(){_classCallCheck(this,_class78);this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online";}_createClass(_class78,[{key:"load",value:function load(){return C.get(this.rootUrl).then(function(e){return e;});}},{key:"login",value:function login(){_.loginOnline(this.rootUrl,!0);}},{key:"queryDatas",value:function queryDatas(e){var t=this,s=t.mDatasUrl;return e&&(e=e.toJSON()),C.get(s,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var s=[],r=e.content,i=r.length,a=0;a<i;a++){var n=r[a],o=new Lr(t.mDatasUrl,n);s.push(o);}return s;}});}}]);return _class78;}();r.OnlineQueryDatasParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class79(e){_classCallCheck(this,_class79);e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,c.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter";}_createClass(_class79,[{key:"toJSON",value:function toJSON(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var s in t){null==t[s]&&delete t[s];}return t;}}]);return _class79;}();r.KeyServiceParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class80(e){_classCallCheck(this,_class80);this.name=null,this.serviceIds=null,this.clientType=$.SERVER,this.limitation=null,c.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter";}_createClass(_class80,[{key:"toJSON",value:function toJSON(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation};}}]);return _class80;}();r.ServerInfo=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class81(e,t){_classCallCheck(this,_class81);this.type=e,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,c.extend(this,t),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||E.ISERVER,this.server||console.error("server url require is not  undefined");var s="/services/security/tokens.json";this.type===E.ISERVER&&this.server.indexOf("iserver")<0&&(s="/iserver"+s),this.tokenServiceUrl||(this.tokenServiceUrl=this.server+s),this.keyServiceUrl||(this.type===E.IPORTAL?this.keyServiceUrl=this.server+"/web/mycontent/keys/register.json":this.type===E.ONLINE&&(this.keyServiceUrl=this.server+"/web/mycontent/keys.json"));}return _class81;}();r.TokenServiceParameter=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class82(e){_classCallCheck(this,_class82);this.userName=null,this.password=null,this.clientType=$.NONE,this.ip=null,this.referer=null,this.expiration=60,c.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter";}_createClass(_class82,[{key:"toJSON",value:function toJSON(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration};}}]);return _class82;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Mr=/*#__PURE__*/function(){function Mr(){_classCallCheck(this,Mr);this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util";}_createClass(Mr,[{key:"clone",value:function clone(e){var t=this.BUILTIN_OBJECT;if("object"==_typeof(e)&&null!==e){var s=e;if(e instanceof Array){s=[];for(var r=0,i=e.length;r<i;r++){s[r]=this.clone(e[r]);}}else if(!t[Object.prototype.toString.call(e)])for(var a in s={},e){e.hasOwnProperty(a)&&(s[a]=this.clone(e[a]));}return s;}return e;}},{key:"mergeItem",value:function mergeItem(e,t,s,r){var i=this.BUILTIN_OBJECT;t.hasOwnProperty(s)&&("object"!=_typeof(e[s])||i[Object.prototype.toString.call(e[s])]?!r&&s in e||(e[s]=t[s]):this.merge(e[s],t[s],r));}},{key:"merge",value:function merge(e,t,s){for(var r in t){this.mergeItem(e,t,r,s);}return e;}},{key:"getContext",value:function getContext(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx;}},{key:"getPixelContext",value:function getPixelContext(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx;}},{key:"adjustCanvasSize",value:function adjustCanvasSize(e,t){var s,r=this._canvas,i=this._pixelCtx,a=this._width,n=this._height,o=this._offsetX,l=this._offsetY;e+o>a&&(a=e+o+100,r.width=a,s=!0),t+l>n&&(n=t+l+100,r.height=n,s=!0),e<-o&&(a+=o=100*Math.ceil(-e/100),r.width=a,s=!0),t<-l&&(n+=l=100*Math.ceil(-t/100),r.height=n,s=!0),s&&i.translate(o,l);}},{key:"getPixelOffset",value:function getPixelOffset(){return{x:this._offsetX,y:this._offsetY};}},{key:"indexOf",value:function indexOf(e,t){if(e.indexOf)return e.indexOf(t);for(var s=0,r=e.length;s<r;s++){if(e[s]===t)return s;}return-1;}},{key:"inherits",value:function inherits(e,t){var s=e.prototype;function r(){}for(var i in r.prototype=t.prototype,e.prototype=new r(),s){e.prototype[i]=s[i];}e.constructor=e;}}]);return Mr;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ir=/*#__PURE__*/function(){function Ir(){_classCallCheck(this,Ir);this.util=new Mr(),this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color";}_createClass(Ir,[{key:"customPalette",value:function customPalette(e){this.palette=e;}},{key:"resetPalette",value:function resetPalette(){this.palette=this._palette;}},{key:"getColor",value:function getColor(e,t){return e|=0,(t=t||this.palette)[e%t.length];}},{key:"customHighlight",value:function customHighlight(e){this.highlightColor=e;}},{key:"resetHighlight",value:function resetHighlight(){this.highlightColor=this._highlightColor;}},{key:"getHighlightColor",value:function getHighlightColor(){return this.highlightColor;}},{key:"getRadialGradient",value:function getRadialGradient(e,t,s,r,i,a,n){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var l=this._ctx.createRadialGradient(e,t,s,r,i,a),h=0,u=n.length;h<u;h++){l.addColorStop(n[h][0],n[h][1]);}return l.__nonRecursion=!0,l;}},{key:"getLinearGradient",value:function getLinearGradient(e,t,s,r,i){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var n=this._ctx.createLinearGradient(e,t,s,r),o=0,l=i.length;o<l;o++){n.addColorStop(i[o][0],i[o][1]);}return n.__nonRecursion=!0,n;}},{key:"getStepColors",value:function getStepColors(e,t,s){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var r=[],i=((t=this.getData(t))[0]-e[0])/s,a=(t[1]-e[1])/s,n=(t[2]-e[2])/s,o=(t[3]-e[3])/s,l=0,h=e[0],u=e[1],c=e[2],d=e[3];l<s;l++){r[l]=this.toColor([this.adjust(Math.floor(h),[0,255]),this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),d.toFixed(4)-0],"rgba"),h+=i,u+=a,c+=n,d+=o;}return h=t[0],u=t[1],c=t[2],d=t[3],r[l]=this.toColor([h,u,c,d],"rgba"),r;}},{key:"getGradientColors",value:function getGradientColors(e,t){var s=[],r=e.length;if(void 0===t&&(t=20),1===r)s=this.getStepColors(e[0],e[0],t);else if(r>1)for(var i=0,a=r-1;i<a;i++){var n=this.getStepColors(e[i],e[i+1],t);i<a-1&&n.pop(),s=s.concat(n);}return s;}},{key:"toColor",value:function toColor(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e;}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var s=this.map(e.slice(1,3),function(e){return e+"%";});e[1]=s[0],e[2]=s[1];}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")";}}},{key:"toArray",value:function toArray(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],s=0;return e.replace(/[\d.]+/g,function(e){s<3?e|=0:e=+e,t[s++]=e;}),t;}},{key:"convert",value:function convert(e,t){if(!this.isCalculableColor(e))return e;var s=this.getData(e),r=s[3];return void 0===r&&(r=1),e.indexOf("hsb")>-1?s=this._HSV_2_RGB(s):e.indexOf("hsl")>-1&&(s=this._HSL_2_RGB(s)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?s=this._RGB_2_HSB(s):t.indexOf("hsl")>-1&&(s=this._RGB_2_HSL(s)),s[3]=r,this.toColor(s,t);}},{key:"toRGBA",value:function toRGBA(e){return this.convert(e,"rgba");}},{key:"toRGB",value:function toRGB(e){return this.convert(e,"rgb");}},{key:"toHex",value:function toHex(e){return this.convert(e,"hex");}},{key:"toHSVA",value:function toHSVA(e){return this.convert(e,"hsva");}},{key:"toHSV",value:function toHSV(e){return this.convert(e,"hsv");}},{key:"toHSBA",value:function toHSBA(e){return this.convert(e,"hsba");}},{key:"toHSB",value:function toHSB(e){return this.convert(e,"hsb");}},{key:"toHSLA",value:function toHSLA(e){return this.convert(e,"hsla");}},{key:"toHSL",value:function toHSL(e){return this.convert(e,"hsl");}},{key:"toName",value:function toName(e){for(var t in this._nameColors){if(this.toHex(this._nameColors[t])===this.toHex(e))return t;}return null;}},{key:"trim",value:function trim(e){return String(e).replace(/\s+/g,"");}},{key:"normalize",value:function normalize(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,s=(240&e)<<4,r=15&e;e="#"+((1<<24)+(t<<4)+t+(s<<4)+s+(r<<4)+r).toString(16).slice(1);}return e;}},{key:"lift",value:function lift(e,t){if(!this.isCalculableColor(e))return e;var s=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var r=this.getData(e),i=0;i<3;i++){r[i]=1===s?r[i]*(1-t)|0:(255-r[i])*t+r[i]|0;}return"rgb("+r.join(",")+")";}},{key:"reverse",value:function reverse(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e;}),this.toColor(t,"rgb");}},{key:"mix",value:function mix(e,t,s){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===s&&(s=.5);for(var r=2*(s=1-this.adjust(s,[0,1]))-1,i=this.getData(this.toRGBA(e)),a=this.getData(this.toRGBA(t)),n=i[3]-a[3],o=((r*n==-1?r:(r+n)/(1+r*n))+1)/2,l=1-o,h=[],u=0;u<3;u++){h[u]=i[u]*o+a[u]*l;}var c=i[3]*s+a[3]*(1-s);return c=Math.max(0,Math.min(1,c)),1===i[3]&&1===a[3]?this.toColor(h,"rgb"):(h[3]=c,this.toColor(h,"rgba"));}},{key:"random",value:function random(){return"#"+Math.random().toString(16).slice(2,8);}},{key:"getData",value:function getData(e){var t,s,r=(e=this.normalize(e)).match(this.colorRegExp);if(null===r)throw new Error("The color format error");var i,a=[];if(r[2])i=[(t=r[2].replace("#","").split(""))[0]+t[1],t[2]+t[3],t[4]+t[5]],a=this.map(i,function(e){return Ir.prototype.adjust.call(this,parseInt(e,16),[0,255]);});else if(r[4]){var n=r[4].split(",");s=n[3],i=n.slice(0,3),a=this.map(i,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),Ir.prototype.adjust.call(this,e,[0,255]);}),void 0!==s&&a.push(this.adjust(parseFloat(s),[0,1]));}else if(r[5]||r[6]){var o=(r[5]||r[6]).split(","),l=parseInt(o[0],0)/360,h=o[1],u=o[2];s=o[3],(a=this.map([h,u],function(e){return Ir.prototype.adjust.call(this,parseFloat(e)/100,[0,1]);})).unshift(l),void 0!==s&&a.push(this.adjust(parseFloat(s),[0,1]));}return a;}},{key:"alpha",value:function alpha(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var s=this.getData(this.toRGBA(e));return s[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(s,"rgba");}},{key:"map",value:function map(e,t){if("function"!=typeof t)throw new TypeError();for(var s=e?e.length:0,r=0;r<s;r++){e[r]=t(e[r]);}return e;}},{key:"adjust",value:function adjust(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e;}},{key:"isCalculableColor",value:function isCalculableColor(e){return e instanceof Array||"string"==typeof e;}},{key:"_HSV_2_RGB",value:function _HSV_2_RGB(e){var t,s,r,i=e[0],a=e[1],n=e[2];if(0===a)t=255*n,s=255*n,r=255*n;else{var o=6*i;6===o&&(o=0);var l=0|o,h=n*(1-a),u=n*(1-a*(o-l)),c=n*(1-a*(1-(o-l))),d=0,p=0,m=0;0===l?(d=n,p=c,m=h):1===l?(d=u,p=n,m=h):2===l?(d=h,p=n,m=c):3===l?(d=h,p=u,m=n):4===l?(d=c,p=h,m=n):(d=n,p=h,m=u),t=255*d,s=255*p,r=255*m;}return[t,s,r];}},{key:"_HSL_2_RGB",value:function _HSL_2_RGB(e){var t,s,r,i=e[0],a=e[1],n=e[2];if(0===a)t=255*n,s=255*n,r=255*n;else{var o,l=2*n-(o=n<.5?n*(1+a):n+a-a*n);t=255*this._HUE_2_RGB(l,o,i+1/3),s=255*this._HUE_2_RGB(l,o,i),r=255*this._HUE_2_RGB(l,o,i-1/3);}return[t,s,r];}},{key:"_HUE_2_RGB",value:function _HUE_2_RGB(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),6*s<1?e+6*(t-e)*s:2*s<1?t:3*s<2?e+(t-e)*(2/3-s)*6:e;}},{key:"_RGB_2_HSB",value:function _RGB_2_HSB(e){var t,s,r=e[0]/255,i=e[1]/255,a=e[2]/255,n=Math.min(r,i,a),o=Math.max(r,i,a),l=o-n,h=o;if(0===l)t=0,s=0;else{s=l/o;var u=((o-r)/6+l/2)/l,c=((o-i)/6+l/2)/l,d=((o-a)/6+l/2)/l;r===o?t=d-c:i===o?t=1/3+u-d:a===o&&(t=2/3+c-u),t<0&&(t+=1),t>1&&(t-=1);}return[t*=360,s*=100,h*=100];}},{key:"_RGB_2_HSL",value:function _RGB_2_HSL(e){var t,s,r=e[0]/255,i=e[1]/255,a=e[2]/255,n=Math.min(r,i,a),o=Math.max(r,i,a),l=o-n,h=(o+n)/2;if(0===l)t=0,s=0;else{s=h<.5?l/(o+n):l/(2-o-n);var u=((o-r)/6+l/2)/l,c=((o-i)/6+l/2)/l,d=((o-a)/6+l/2)/l;r===o?t=d-c:i===o?t=1/3+u-d:a===o&&(t=2/3+c-u),t<0&&(t+=1),t>1&&(t-=1);}return[t*=360,s*=100,h*=100];}}]);return Ir;}();var Rr=new Ir();r.ColorsPickerUtil=/*#__PURE__*/function(){function _class83(){_classCallCheck(this,_class83);}_createClass(_class83,null,[{key:"createCanvas",value:function createCanvas(e,t){var s=document.createElement("canvas");return s.height=e,s.width=t,s.getContext("2d");}},{key:"getLinearGradient",value:function getLinearGradient(e,t,s,r,i){this._ctx||(this._ctx=this.getContext());for(var a=this._ctx.createLinearGradient(e,t,s,r),n=i.length,o=1/(n-1),l=0,h=0;h<n;h++){a.addColorStop(l,i[h]),l+=o;}return a.__nonRecursion=!0,a;}},{key:"getContext",value:function getContext(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx;}},{key:"getStepColors",value:function getStepColors(e,t,s){e=Rr.toRGBA(e),t=Rr.toRGBA(t),e=Rr.getData(e);for(var r=[],i=((t=Rr.getData(t))[0]-e[0])/s,a=(t[1]-e[1])/s,n=(t[2]-e[2])/s,o=(t[3]-e[3])/s,l=0,h=e[0],u=e[1],c=e[2],d=e[3];l<s;l++){r[l]=Rr.toColor([Rr.adjust(Math.floor(h),[0,255]),Rr.adjust(Math.floor(u),[0,255]),Rr.adjust(Math.floor(c),[0,255]),d.toFixed(4)-0],"hex"),h+=i,u+=a,c+=n,d+=o;}return h=t[0],u=t[1],c=t[2],d=t[3],r[l]=Rr.toColor([h,u,c,d],"hex"),r;}},{key:"getGradientColors",value:function getGradientColors(e,t,s){var r,i,a,n=[],o=e.length;if(void 0!==t){if(o>=t){if("RANGE"===s)for(i=0;i<t;i++){n.push(e[i]);}else for(i=0;i<t;i++){var _t25=Math.floor(i/2);if(i%2==0)n.push(e[_t25]);else{var _s19=e.length-1-_t25;n.push(e[_s19]);}}}else{for(r=Math.ceil(t/(o-1)),i=0,a=o-1;i<a;i++){var l=this.getStepColors(e[i],e[i+1],r);i<a-1&&l.pop(),n=n.concat(l);}for(var h=n.length-t,u=0;u<h;u++){n.splice(2,1);}}return n;}}}]);return _class83;}();r.ArrayStatistic=/*#__PURE__*/function(){function _class84(){_classCallCheck(this,_class84);}_createClass(_class84,null,[{key:"newInstance",value:function newInstance(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats()),this.geostatsInstance;}},{key:"getInstance",value:function getInstance(e){var t=this.newInstance();return t.setSerie(e),t;}},{key:"getArrayStatistic",value:function getArrayStatistic(e,t){return e.length?"Sum"===t||"求和"===t?this.getSum(e):"Maximum"===t||"最大值"===t?this.getMax(e):"Minimum"===t||"最小值"===t?this.getMin(e):"Average"===t||"平均值"===t?this.getMean(e):"Median"===t||"中位数"===t?this.getMedian(e):"times"===t||"计数"===t?this.getTimes(e):void 0:0;}},{key:"getArraySegments",value:function getArraySegments(e,t,s){return"offset"===t?this.getEqInterval(e,s):"jenks"===t?this.getJenks(e,s):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,s):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,s):void 0;}},{key:"getSum",value:function getSum(e){return this.getInstance(e).sum();}},{key:"getMax",value:function getMax(e){return this.getInstance(e).max();}},{key:"getMin",value:function getMin(e){return this.getInstance(e).min();}},{key:"getMean",value:function getMean(e){return this.getInstance(e).mean();}},{key:"getMedian",value:function getMedian(e){return this.getInstance(e).median();}},{key:"getTimes",value:function getTimes(e){return e.length;}},{key:"getEqInterval",value:function getEqInterval(e,t){return this.getInstance(e).getClassEqInterval(t);}},{key:"getJenks",value:function getJenks(e,t){return this.getInstance(e).getClassJenks(t);}},{key:"getSqrtInterval",value:function getSqrtInterval(e,t){return e=e.map(function(e){return Math.sqrt(e);}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e;});}},{key:"getGeometricProgression",value:function getGeometricProgression(e,t){return this.getInstance(e).getClassGeometricProgression(t);}}]);return _class84;}();var Dr=function Dr(e){var t;if(e===O.METER)t=1;else if(e===O.DEGREE)t=2*Math.PI*6378137/360;else if(e===O.KILOMETER)t=.001;else if(e===O.INCH)t=1/.025399999918;else{if(e!==O.FOOT)return t;t=.3048;}return t;},Fr=s(5),kr=s.n(Fr);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Br=/*#__PURE__*/function(){function Br(e){_classCallCheck(this,Br);this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function error(e){this.errors.push(e);}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders());}_createClass(Br,[{key:"getParser",value:function getParser(e){var t,s,i,a,n,o,l,h,u,c=this;function d(){a=l[i],n=s,h=s;}function p(){l[i]=a,h=s=n;}function m(){s>h&&(l[i]=l[i].slice(s-h),h=s);}function f(e){var r,a,n,o;if(e instanceof Function)return e.call(u.parsers);if("string"==typeof e)r=t.charAt(s)===e?e:null,a=1,m();else{if(m(),!(r=e.exec(l[i])))return null;a=r[0].length;}if(r){var c=s+=a;for(o=s+l[i].length-a;s<o&&(32===(n=t.charCodeAt(s))||10===n||9===n);){s++;}return l[i]=l[i].slice(a+(s-c)),h=s,0===l[i].length&&i<l.length-1&&i++,"string"==typeof r?r:1===r.length?r[0]:r;}}function y(s){var r,i={index:o,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var a in i){0===s[a]&&(s[a]=i[a]);}r=s.filename&&c.env.inputs&&c.env.inputs[s.filename]?c.env.inputs[s.filename]:t,s.line=(r.slice(0,s.index).match(/\n/g)||"").length+1;for(var n=s.index;n>=0&&"\n"!==r.charAt(n);n--){s.column++;}return new Error([s.filename,s.line,s.column,s.message].join(";"));}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},u={parse:function parse(a){var n,u=null;if(s=i=h=o=0,l=[],t=a.replace(/\r\n/g,"\n"),e.filename&&(c.env.inputs[e.filename]=t),l=function(e){for(var s,r,i,a,n=0,o=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,h=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,c=0,d=e[0],p=0;p<t.length;){if(o.lastIndex=p,(s=o.exec(t))&&s.index===p&&(p+=s[0].length,d.push(s[0])),i=t.charAt(p),l.lastIndex=h.lastIndex=p,(s=h.exec(t))&&s.index===p)p+=s[0].length,d.push(s[0]);else if(r||"/"!==i||"/"!==(a=t.charAt(p+1))&&"*"!==a||!(s=l.exec(t))||s.index!==p){switch(i){case"{":if(!r){c++,d.push(i);break;}case"}":if(!r){c--,d.push(i),e[++n]=d=[];break;}case"(":if(!r){r=!0,d.push(i);break;}case")":if(r){r=!1,d.push(i);break;}default:d.push(i);}p++;}else p+=s[0].length,d.push(s[0]);}return 0!==c&&(u={index:p-1,type:"Parse",message:c>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("");});}([[]]),u)throw y(u);var d=function d(e,t){var s=e.specificity,r=t.specificity;return s[0]!=r[0]?r[0]-s[0]:s[1]!=r[1]?r[1]-s[1]:s[2]!=r[2]?r[2]-s[2]:r[3]-s[3];};return(n=new r.CartoCSS.Tree.Ruleset([],f(this.parsers.primary))).root=!0,n.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+y(t).message:e.errors.message=y(t).message;},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(d),t;},n;},parsers:{primary:function primary(){for(var e,t=[];(e=f(this.rule)||f(this.ruleset)||f(this.comment))||f(/^[\s\n]+/)||(e=f(this.invalid));){e&&t.push(e);}return t;},invalid:function invalid(){var e=f(/^[^;\n]*[;\n]/);if(e)return new r.CartoCSS.Tree.Invalid(e,n);},comment:function comment(){var e;if("/"===t.charAt(s))return"/"===t.charAt(s+1)?new r.CartoCSS.Tree.Comment(f(/^\/\/.*/),!0):(e=f(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new r.CartoCSS.Tree.Comment(e):void 0;},entities:{quoted:function quoted(){if('"'===t.charAt(s)||"'"===t.charAt(s)){var e=f(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new r.CartoCSS.Tree.Quoted(e[1]||e[2]):void 0;}},field:function field(){if(f("[")){var e=f(/(^[^\]]+)/);if(f("]"))return e?new r.CartoCSS.Tree.Field(e[1]):void 0;}},comparison:function comparison(){var e=f(/^=~|=|!=|<=|>=|<|>/);if(e)return e;},keyword:function keyword(){var e=f(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new r.CartoCSS.Tree.Keyword(e);},call:function call(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(l[i])){if("url"===(e=e[1]))return null;s+=e.length;if(f("("),t=f(this.entities.arguments),f(")"))return e?new r.CartoCSS.Tree.Call(e,t,s):void 0;}},arguments:function _arguments(){for(var e,t=[];e=f(this.expression);){t.push(e);if(!f(","))break;}return t;},literal:function literal(){return f(this.entities.dimension)||f(this.entities.keywordcolor)||f(this.entities.hexcolor)||f(this.entities.quoted);},url:function url(){var e;if("u"===t.charAt(s)&&f(/^url\(/)){e=f(this.entities.quoted)||f(this.entities.variable)||f(/^[\-\w%@$\/.&=:;#+?~]+/)||"";return f(")")?new r.CartoCSS.Tree.URL(void 0!==e.value||e instanceof r.CartoCSS.Tree.Variable?e:new r.CartoCSS.Tree.Quoted(e)):new r.CartoCSS.Tree.Invalid(e,n,"Missing closing ) in URL.");}},variable:function variable(){var i,a=s;if("@"===t.charAt(s)&&(i=f(/^@[\w-]+/)))return new r.CartoCSS.Tree.Variable(i,a,e.filename);},hexcolor:function hexcolor(){var e;if("#"===t.charAt(s)&&(e=f(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new r.CartoCSS.Tree.Color(e[1]);},keywordcolor:function keywordcolor(){var e=l[i].match(/^[a-z]+/);if(e&&e[0]in r.CartoCSS.Tree.Reference.data.colors)return new r.CartoCSS.Tree.Color(r.CartoCSS.Tree.Reference.data.colors[f(/^[a-z]+/)]);},dimension:function dimension(){var e=t.charCodeAt(s);if(!(e>57||e<45||47===e)){var i=f(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return i?new r.CartoCSS.Tree.Dimension(i[1],i[2],n):void 0;}}},variable:function variable(){var e;if("@"===t.charAt(s)&&(e=f(/^(@[\w-]+)\s*:/)))return e[1];},entity:function entity(){var e=f(this.entities.call)||f(this.entities.literal),t=f(this.entities.field)||f(this.entities.variable),s=f(this.entities.url)||f(this.entities.keyword);return e||t||s;},end:function end(){var e;return f(";")||("string"==typeof(e="}")?t.charAt(s)===e:!!e.test(l[i]));},element:function element(){var e=f(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new r.CartoCSS.Tree.Element(e);},attachment:function attachment(){var e=f(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1];},selector:function selector(){for(var e,i,a,o,l,h=[],u=new r.CartoCSS.Tree.Filterset(),c=[],d=0,p=0;(a=f(this.element))||(l=f(this.zoom))||(o=f(this.filter))||(e=f(this.attachment));){if(d++,a)h.push(a);else if(l)c.push(l),p++;else if(o){var m=u.add(o);if(m)throw y({message:m,index:s-1});p++;}else{if(i)throw y({message:"Encountered second attachment name.",index:s-1});i=e;}var g=t.charAt(s);if("{"===g||"}"===g||";"===g||","===g)break;}if(d)return new r.CartoCSS.Tree.Selector(u,c,h,i,p,n);},filter:function filter(){d();var t,s,i;if(f("[")&&(t=f(/^[a-zA-Z0-9\-_]+/)||f(this.entities.quoted)||f(this.entities.variable)||f(this.entities.keyword)||f(this.entities.field))&&(t instanceof r.CartoCSS.Tree.Quoted&&(t=new r.CartoCSS.Tree.Field(t.toString())),(s=f(this.entities.comparison))&&(i=f(this.entities.quoted)||f(this.entities.variable)||f(this.entities.dimension)||f(this.entities.keyword)||f(this.entities.field)))){if(!f("]"))throw y({message:"Missing closing ] of filter.",index:n-1});return t.is||(t=new r.CartoCSS.Tree.Field(t)),new r.CartoCSS.Tree.Filter(t,s,i,n,e.filename);}},zoom:function zoom(){d();var e,t;if(f(/^\[\s*zoom/g)&&(e=f(this.entities.comparison))&&(t=f(this.entities.variable)||f(this.entities.dimension))&&f("]"))return new r.CartoCSS.Tree.Zoom(e,t,n);p();},block:function block(){var e;if(f("{")&&(e=f(this.primary))&&f("}"))return e;},ruleset:function ruleset(){var e,t,s=[];for(d();e=f(this.selector);){for(s.push(e);f(this.comment);){;}if(!f(","))break;for(;f(this.comment);){;}}if(e)for(;f(this.comment);){;}if(s.length>0&&(t=f(this.block))){if(1===s.length&&s[0].elements.length&&"Map"===s[0].elements[0].value){var i=new r.CartoCSS.Tree.Ruleset(s,t);return i.isMap=!0,i;}return new r.CartoCSS.Tree.Ruleset(s,t);}p();},rule:function rule(){var i,a,l=t.charAt(s);if(d(),"."!==l&&"#"!==l&&(i=f(this.variable)||f(this.property))){if((a=f(this.value))&&f(this.end))return new r.CartoCSS.Tree.Rule(i,a,n,e.filename);o=s,p();}},font:function font(){for(var e,t=[],s=[];e=f(this.entity);){s.push(e);}if(t.push(new r.CartoCSS.Tree.Expression(s)),f(","))for(;(e=f(this.expression))&&(t.push(e),f(","));){;}return new r.CartoCSS.Tree.Value(t);},value:function value(){for(var e,t=[];(e=f(this.expression))&&(t.push(e),f(","));){;}return t.length>1?new r.CartoCSS.Tree.Value(t.map(function(e){return e.value[0];})):1===t.length?new r.CartoCSS.Tree.Value(t):void 0;},sub:function sub(){var e;if(f("(")&&(e=f(this.expression))&&f(")"))return e;},multiplication:function multiplication(){var e,t,s,i;if(e=f(this.operand)){for(;(s=f("/")||f("*")||f("%"))&&(t=f(this.operand));){i=new r.CartoCSS.Tree.Operation(s,[i||e,t],n);}return i||e;}},addition:function addition(){var e,i,a,o;if(e=f(this.multiplication)){for(;(a=f(/^[-+]\s+/)||" "!=t.charAt(s-1)&&(f("+")||f("-")))&&(i=f(this.multiplication));){o=new r.CartoCSS.Tree.Operation(a,[o||e,i],n);}return o||e;}},operand:function operand(){return f(this.sub)||f(this.entity);},expression:function expression(){for(var e,t=[];e=f(this.addition)||f(this.entity);){t.push(e);}if(t.length>0)return new r.CartoCSS.Tree.Expression(t);},property:function property(){var e=f(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1];}}};}},{key:"parse",value:function parse(e){var t=this.parser;return this.ruleSet=t.parse(e);}},{key:"toShaders",value:function toShaders(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var s={},r=[];this._toShaders(s,r,t);for(var i=[],a={},n=0,o=t.length;n<o;++n){var l=t[n],h=l.attachment,u=s[r[n]],c=[];if(!a[h]){var d=0;for(var p in u){if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var m=(u[p].join("\n"),null);Object.defineProperty(c,"layerIndex",{configurable:!0,enumerable:!1,value:m});}else c[d++]=function(e,t){if(!Array.isArray(e))return e;var s=e.join("\n"),r='attributes["FEATUREID"]&&attributes["FEATUREID"]',i=s.indexOf(r);if(i>=0){if(!t.featureFilter){var a=i+r.length,n=s.indexOf(")",a+1),o="featureId&&(featureId"+s.substring(a,n)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function value(e){return!!o;}});}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+s+";} return _value; ")};}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+s+"; return _value; ")};}(u[p],c);}Object.defineProperty(c,"attachment",{configurable:!0,enumerable:!1,value:h}),Object.defineProperty(c,"elements",{configurable:!0,enumerable:!1,value:l.elements}),i.push(c),a[r[n]]=!0;}Object.defineProperty(c,"zoom",{configurable:!0,enumerable:!1,value:l.zoom});}return i;}}return null;}},{key:"_toShaders",value:function _toShaders(e,t,s){for(var _i9=0,_a2=s.length;_i9<_a2;++_i9){var _a3=s[_i9],_n2=[];for(var _e38=0,_t26=_a3.elements.length;_e38<_t26;_e38++){_n2.push(_a3.elements[_e38]);}var _o2=_a3.filters.filters,_l=[];for(var _e39 in _o2){_l.push(_o2[_e39].id);}var _h=_n2.join("/")+"::"+_a3.attachment+"_"+_l.join("_");t.push(_h);var _u=e[_h]=e[_h]||{};_u.zoom=r.CartoCSS.Tree.Zoom.all;var _c=_a3.toJS(this.env);for(var _e40 in _c){(_u[_e40]=_u[_e40]||[]).push(_c[_e40].join("\n"));}}}},{key:"getShaders",value:function getShaders(){return this.shaders;}},{key:"destroy",value:function destroy(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null;}}]);return Br;}();r._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},Br.mapnik_reference={version:{latest:r._mapnik_reference_latest,"2.1.1":r._mapnik_reference_latest}},r.CartoCSS=Br,r.CartoCSS.Tree={},r.CartoCSS.Tree.operate=function(e,t,s){switch(e){case"+":return t+s;case"-":return t-s;case"*":return t*s;case"%":return t%s;case"/":return t/s;}},r.CartoCSS.Tree.functions={rgb:function rgb(e,t,s){return this.rgba(e,t,s,1);},rgba:function rgba(e,t,s,i){var a=this,n=[e,t,s].map(function(e){return a.number(e);});return i=a.number(i),n.some(isNaN)||isNaN(i)?null:new r.CartoCSS.Tree.Color(n,i);},stop:function stop(e){var t,s;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(s=arguments[2]),{is:"tag",val:e,color:t,mode:s,toString:function toString(r){return'\n\t<stop value="'+e.ev(r)+'"'+(t?' color="'+t.ev(r)+'" ':"")+(s?' mode="'+s.ev(r)+'" ':"")+"/>";}};},hsl:function hsl(e,t,s){return this.hsla(e,t,s,1);},hsla:function hsla(e,t,s,r){if([e=this.number(e)%360/360,t=this.number(t),s=this.number(s),r=this.number(r)].some(isNaN))return null;var i=s<=.5?s*(t+1):s+t-s*t,a=2*s-i;return this.rgba(255*n(e+1/3),255*n(e),255*n(e-1/3),r);function n(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?a+(i-a)*e*6:2*e<1?i:3*e<2?a+(i-a)*(2/3-e)*6:a;}},hue:function hue(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(e.toHSL().h)):null;},saturation:function saturation(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null;},lightness:function lightness(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null;},alpha:function alpha(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(e.toHSL().a):null;},saturate:function saturate(e,t){if(!("toHSL"in e))return null;var s=e.toHSL();return s.s+=t.value/100,s.s=this.clamp(s.s),this.hsla_simple(s);},desaturate:function desaturate(e,t){if(!("toHSL"in e))return null;var s=e.toHSL();return s.s-=t.value/100,s.s=this.clamp(s.s),this.hsla_simple(s);},lighten:function lighten(e,t){if(!("toHSL"in e))return null;var s=e.toHSL();return s.l+=t.value/100,s.l=this.clamp(s.l),this.hsla_simple(s);},darken:function darken(e,t){if(!("toHSL"in e))return null;var s=e.toHSL();return s.l-=t.value/100,s.l=this.clamp(s.l),this.hsla_simple(s);},fadein:function fadein(e,t){if(!("toHSL"in e))return null;var s=e.toHSL();return s.a+=t.value/100,s.a=this.clamp(s.a),this.hsla_simple(s);},fadeout:function fadeout(e,t){if(!("toHSL"in e))return null;var s=e.toHSL();return s.a-=t.value/100,s.a=this.clamp(s.a),this.hsla_simple(s);},spin:function spin(e,t){if(!("toHSL"in e))return null;var s=e.toHSL(),r=(s.h+t.value)%360;return s.h=r<0?360+r:r,this.hsla_simple(s);},replace:function replace(e,t,s){return"field"===e.is?e.toString+".replace("+t.toString()+", "+s.toString()+")":e.replace(t,s);},mix:function mix(e,t,s){var i=s.value/100,a=2*i-1,n=e.toHSL().a-t.toHSL().a,o=((a*n==-1?a:(a+n)/(1+a*n))+1)/2,l=1-o,h=[e.rgb[0]*o+t.rgb[0]*l,e.rgb[1]*o+t.rgb[1]*l,e.rgb[2]*o+t.rgb[2]*l],u=e.alpha*i+t.alpha*(1-i);return new r.CartoCSS.Tree.Color(h,u);},greyscale:function greyscale(e){return this.desaturate(e,new r.CartoCSS.Tree.Dimension(100));},"%":function _(e){for(var t=Array.prototype.slice.call(arguments,1),s=e.value,i=0;i<t.length;i++){s=s.replace(/%s/,t[i].value).replace(/%[da]/,t[i].toString());}return s=s.replace(/%%/g,"%"),new r.CartoCSS.Tree.Quoted(s);},hsla_simple:function hsla_simple(e){return this.hsla(e.h,e.s,e.l,e.a);},number:function number(e){return e instanceof r.CartoCSS.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN;},clamp:function clamp(e){return Math.min(1,Math.max(0,e));}},r.CartoCSS.Tree.Call=/*#__PURE__*/function(){function _class85(e,t,s){_classCallCheck(this,_class85);this.is="call",this.name=e,this.args=t,this.index=s;}_createClass(_class85,[{key:"ev",value:function ev(e){for(var t=this.args.map(function(t){return t.ev(e);}),s=0;s<t.length;s++){if("undefined"===t[s].is)return{is:"undefined",value:"undefined"};}if(this.name in r.CartoCSS.Tree.functions){if(r.CartoCSS.Tree.functions[this.name].length<=t.length){var i=r.CartoCSS.Tree.functions[this.name].apply(r.CartoCSS.Tree.functions,t);return null===i?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):i;}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+r.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"};}var a=r.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(void 0===a){var n=kr()(r.CartoCSS.Tree.Reference.mapnikFunctions),o=this.name,l=n.map(function(e){return[e[0],r.CartoCSS.Tree.Reference.editDistance(o,e[0]),e[1]];}).sort(function(e,t){return e[1]-t[1];});return e.error({message:"unknown function "+this.name+"(), did you mean "+l[0][0]+"("+l[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"};}return a!==t.length&&-1!==a?(e.error({message:"function "+this.name+"() takes "+a+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this);}},{key:"toString",value:function toString(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name;}}]);return _class85;}(),r.CartoCSS.Tree.Color=/*#__PURE__*/function(){function _class86(e,t){_classCallCheck(this,_class86);this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16);}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16);}),"number"==typeof t?this.alpha=t:4===e.length?this.alpha=e[3]:this.alpha=1;}_createClass(_class86,[{key:"ev",value:function ev(){return this;}},{key:"toString",value:function toString(){return"rgba("+this.rgb.map(function(e){return Math.round(e);}).concat(this.alpha).join(", ")+")";}},{key:"operate",value:function operate(e,t,s){var i=[];s instanceof r.CartoCSS.Tree.Color||(s=s.toColor());for(var a=0;a<3;a++){i[a]=r.CartoCSS.Tree.operate(t,this.rgb[a],s.rgb[a]);}return new r.CartoCSS.Tree.Color(i);}},{key:"toHSL",value:function toHSL(){var e,t,s=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,a=this.alpha,n=Math.max(s,r,i),o=Math.min(s,r,i),l=(n+o)/2,h=n-o;if(n===o)e=t=0;else{switch(t=l>.5?h/(2-n-o):h/(n+o),n){case s:e=(r-i)/h+(r<i?6:0);break;case r:e=(i-s)/h+2;break;case i:e=(s-r)/h+4;}e/=6;}return{h:360*e,s:t,l:l,a:a};}}]);return _class86;}(),r.CartoCSS.Tree.Comment=/*#__PURE__*/function(){function _class87(e,t){_classCallCheck(this,_class87);this.value=e,this.silent=!!t;}_createClass(_class87,[{key:"toString",value:function toString(e){return"\x3c!--"+this.value+"--\x3e";}},{key:"ev",value:function ev(){return this;}}]);return _class87;}(),r.CartoCSS.Tree.Definition=/*#__PURE__*/function(){function _class88(e,t){_classCallCheck(this,_class88);this.elements=e.elements,this.rules=t,this.ruleIndex={};for(var s=0;s<this.rules.length;s++){"zoom"in this.rules[s]&&(this.rules[s]=this.rules[s].clone()),this.rules[s].zoom=e.zoom,this.ruleIndex[this.rules[s].updateID()]=!0;}this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity();}_createClass(_class88,[{key:"toString",value:function toString(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++){e+="\n    "+this.rules[t];}return e;}},{key:"toJS",value:function toJS(e){var t={},s=this.zoom,i=this.filters.toJS(e),a=[s];function n(s){if(s instanceof r.CartoCSS.Tree.Rule)t[s.name]=t[s.name]||[],i?t[s.name].push("if("+i+"){"+s.value.toJS(e)+"}"):t[s.name].push(s.value.toJS(e));else if(s instanceof r.CartoCSS.Tree.Ruleset){var a=s.toJS(e);for(var n in a){for(var o in t[n]=t[n]||[],a[n]){t[n].push(a[n][o]);}}}}for(var o in i&&a.push(i),i=a.join(" && "),this.rules){n(this.rules[o]);}return t;}}]);return _class88;}(),r.CartoCSS.Tree.Dimension=/*#__PURE__*/function(){function _class89(e,t,s){_classCallCheck(this,_class89);this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=t||null,this.index=s;}_createClass(_class89,[{key:"ev",value:function ev(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px";}return this;}},{key:"toColor",value:function toColor(){return new r.CartoCSS.Tree.Color([this.value,this.value,this.value]);}},{key:"round",value:function round(){return this.value=Math.round(this.value),this;}},{key:"toString",value:function toString(){return this.value.toString();}},{key:"operate",value:function operate(e,t,s){return"%"===this.unit&&"%"!==s.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===s.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new r.CartoCSS.Tree.Dimension(r.CartoCSS.Tree.operate(t,this.value,this.value*s.value*.01),this.unit):new r.CartoCSS.Tree.Dimension(r.CartoCSS.Tree.operate(t,this.value,s.value),this.unit||s.unit);}}]);return _class89;}(),r.CartoCSS.Tree.Element=/*#__PURE__*/function(){function _class90(e){_classCallCheck(this,_class90);this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard");}_createClass(_class90,[{key:"specificity",value:function specificity(){return["id"===this.type?1:0,"class"===this.type?1:0];}},{key:"toString",value:function toString(){return this.value;}}]);return _class90;}(),r.CartoCSS.Tree.Expression=/*#__PURE__*/function(){function _class91(e){_classCallCheck(this,_class91);this.is="expression",this.value=e;}_createClass(_class91,[{key:"ev",value:function ev(e){return this.value.length>1?new r.CartoCSS.Tree.Expression(this.value.map(function(t){return t.ev(e);})):this.value[0].ev(e);}},{key:"toString",value:function toString(e){return this.value.map(function(t){return t.toString(e);}).join(" ");}}]);return _class91;}(),r.CartoCSS.Tree.Field=/*#__PURE__*/function(){function _class92(e){_classCallCheck(this,_class92);this.is="field",this.value=e||"";}_createClass(_class92,[{key:"toString",value:function toString(){return'["'+this.value.toUpperCase()+'"]';}},{key:"ev",value:function ev(){return this;}}]);return _class92;}(),r.CartoCSS.Tree.Filter=/*#__PURE__*/function(){function _class93(e,t,s,r,i){_classCallCheck(this,_class93);this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=t,this.val=s,this.index=r,this.filename=i,this.id=this.key+this.op+this.val;}_createClass(_class93,[{key:"ev",value:function ev(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this;}},{key:"toString",value:function toString(){return"["+this.id+"]";}}]);return _class93;}(),r.CartoCSS.Tree.Filterset=/*#__PURE__*/function(){function _class94(){_classCallCheck(this,_class94);this.filters={};}_createClass(_class94,[{key:"toJS",value:function toJS(e){function t(e){var t=e.op;"="===t&&(t="==");var s=e.val;void 0!==e._val&&(s=e._val.toString(!0)),e.key&&"scale"===e.key.value?s=+s:"string"!=typeof s&&"object"!=_typeof(s)||(s="'"+s+"'");var r="attributes";return r+"&&"+r+e.key+"&&"+r+e.key+" "+t+s;}var s=[];for(var r in this.filters){s.push(t(this.filters[r]));}return s.join(" && ");}},{key:"toString",value:function toString(){var e=[];for(var t in this.filters){e.push(this.filters[t].id);}return e.sort().join("\t");}},{key:"ev",value:function ev(e){for(var t in this.filters){this.filters[t].ev(e);}return this;}},{key:"clone",value:function clone(){var e=new r.CartoCSS.Tree.Filterset();for(var t in this.filters){e.filters[t]=this.filters[t];}return e;}},{key:"cloneWith",value:function cloneWith(e){var t=[];for(var s in e.filters){var i=this.addable(e.filters[s]);if(!1===i)return!1;!0===i&&t.push(e.filters[s]);}if(!t.length)return null;var a=new r.CartoCSS.Tree.Filterset();for(s in this.filters){a.filters[s]=this.filters[s];}for(;s=t.shift();){a.add(s);}return a;}},{key:"addable",value:function addable(e){var t=e.key.toString(),s=e.val.toString();switch(s.match(/^[0-9]+(\.[0-9]*)?$/)&&(s=parseFloat(s)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==s&&null:void 0===this.filters[t+"!="+s]&&!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=s)&&!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=s)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>s)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<s);case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==s&&null:void 0!==this.filters[t+"!="+s]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=s?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=s?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>s?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<s)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=s)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=s)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=s)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=s?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>s)||null);case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<s)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=s)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<s)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=s?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=s)||null);case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=s)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=s)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=s)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=s?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<s)||null);case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>s)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=s)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>s)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=s?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=s)||null);}}},{key:"conflict",value:function conflict(e){var t=e.key.toString(),s=e.val.toString();return isNaN(parseFloat(s))||(s=parseFloat(s)),("="===e.op&&void 0!==this.filters[t+"="]&&s!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&s==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&s===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter";}},{key:"add",value:function add(e,t){var s,r=e.key.toString(),i=e.op,a=this.conflict(e);if(a)return a;if("="===i){for(var n in this.filters){this.filters[n].key===r&&delete this.filters[n];}this.filters[r+"="]=e;}else if("!="===i)this.filters[r+"!="+e.val]=e;else if("=~"===i)this.filters[r+"=~"+e.val]=e;else if(">"===i){for(var o in this.filters){this.filters[o].key===r&&this.filters[o].val<=e.val&&delete this.filters[o];}this.filters[r+">"]=e;}else if(">="===i){for(var l in this.filters){s=+this.filters[l].val.toString(),this.filters[l].key===r&&s<e.val&&delete this.filters[l];}void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e;}else if("<"===i){for(var h in this.filters){s=+this.filters[h].val.toString(),this.filters[h].key===r&&s>=e.val&&delete this.filters[h];}this.filters[r+"<"]=e;}else if("<="===i){for(var u in this.filters){s=+this.filters[u].val.toString(),this.filters[u].key===r&&s>e.val&&delete this.filters[u];}void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e;}}}]);return _class94;}(),r.CartoCSS.Tree.Fontset=/*#__PURE__*/function(){function _class95(e,t){_classCallCheck(this,_class95);this.fonts=t,this.name="fontset-"+e.effects.length;}return _class95;}(),r.CartoCSS.Tree.Invalid=/*#__PURE__*/function(){function _class96(e,t,s){_classCallCheck(this,_class96);this.is="invalid",this.chunk=e,this.index=t,this.type="syntax",this.message=s||"Invalid code: "+this.chunk;}_createClass(_class96,[{key:"ev",value:function ev(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"};}}]);return _class96;}(),r.CartoCSS.Tree.Keyword=/*#__PURE__*/function(){_createClass(_class97,[{key:"ev",value:function ev(){return this;}}]);function _class97(e){_classCallCheck(this,_class97);this.value=e;var t={transparent:"color","true":"boolean","false":"boolean"};this.is=t[e]?t[e]:"keyword";}_createClass(_class97,[{key:"toString",value:function toString(){return this.value;}}]);return _class97;}(),r.CartoCSS.Tree.Literal=/*#__PURE__*/function(){function _class98(e){_classCallCheck(this,_class98);this.value=e||"",this.is="field";}_createClass(_class98,[{key:"toString",value:function toString(){return this.value;}},{key:"ev",value:function ev(){return this;}}]);return _class98;}(),r.CartoCSS.Tree.Operation=/*#__PURE__*/function(){function _class99(e,t,s){_classCallCheck(this,_class99);this.is="operation",this.op=e.trim(),this.operands=t,this.index=s;}_createClass(_class99,[{key:"ev",value:function ev(e){var t,s=this.operands[0].ev(e),i=this.operands[1].ev(e);return"undefined"===s.is||"undefined"===i.is?{is:"undefined",value:"undefined"}:(s instanceof r.CartoCSS.Tree.Dimension&&i instanceof r.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(t=i,i=s,s=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),s instanceof r.CartoCSS.Tree.Quoted&&i instanceof r.CartoCSS.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):s instanceof r.CartoCSS.Tree.Field||i instanceof r.CartoCSS.Tree.Field||s instanceof r.CartoCSS.Tree.Literal||i instanceof r.CartoCSS.Tree.Literal?"color"===s.is||"color"===i.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new r.CartoCSS.Tree.Literal(s.ev(e).toString(!0)+this.op+i.ev(e).toString(!0)):void 0===s.operate?(e.error({message:"Cannot do math with type "+s.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):s.operate(e,this.op,i));}}]);return _class99;}(),r.CartoCSS.Tree.Quoted=/*#__PURE__*/function(){function _class100(e){_classCallCheck(this,_class100);this.is="string",this.value=e||"";}_createClass(_class100,[{key:"toString",value:function toString(e){var t=this.value.replace(/&/g,"&amp;"),s=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+s+"'":t;}},{key:"ev",value:function ev(){return this;}},{key:"operate",value:function operate(e,t,s){return new r.CartoCSS.Tree.Quoted(r.CartoCSS.Tree.operate(t,this.toString(),s.toString(this.contains_field)));}}]);return _class100;}(),r.CartoCSS.Tree.Reference={_validateValue:{font:function font(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t);}},setData:function setData(e){this.data=e,this.selector_cache=function(e){var t={};for(var s in e.symbolizers){for(var r in e.symbolizers[s]){e.symbolizers[s][r].hasOwnProperty("css")&&(t[e.symbolizers[s][r].css]=[e.symbolizers[s][r],s,r]);}}return t;}(e),this.mapnikFunctions=function(e){var t={};for(var s in e.symbolizers){for(var r in e.symbolizers[s]){if("functions"===e.symbolizers[s][r].type)for(var i=0;i<e.symbolizers[s][r].functions.length;i++){var a=e.symbolizers[s][r].functions[i];t[a[0]]=a[1];}}}return t;}(e),this.required_cache=function(e){var t={};for(var s in e.symbolizers){for(var r in t[s]=[],e.symbolizers[s]){e.symbolizers[s][r].required&&t[s].push(e.symbolizers[s][r].css);}}return t;}(e);},setVersion:function setVersion(e){return!!r.CartoCSS.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(r.CartoCSS.mapnik_reference.version[e]),!0);},selectorData:function selectorData(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t];},validSelector:function validSelector(e){return!!this.selector_cache[e];},selectorName:function selectorName(e){return this.selectorData(e,2);},selector:function selector(e){return this.selectorData(e,0);},symbolizer:function symbolizer(e){return this.selectorData(e,1);},requiredProperties:function requiredProperties(e,t){var s=this.required_cache[e];for(var r in s){if(!(s[r]in t))return"Property "+s[r]+" required for defining "+e+" styles.";}},isFont:function isFont(e){return"font"===this.selector(e).validate;},editDistance:function editDistance(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var s=[],r=0;r<=t.length;r++){s[r]=[r];}for(var i=0;i<=e.length;i++){s[0][i]=i;}for(r=1;r<=t.length;r++){for(i=1;i<=e.length;i++){t.charAt(r-1)===e.charAt(i-1)?s[r][i]=s[r-1][i-1]:s[r][i]=Math.min(s[r-1][i-1]+1,Math.min(s[r][i-1]+1,s[r-1][i]+1));}}return s[t.length][e.length];},validValue:function validValue(e,t,s){var r;if(this.selector(t)){if("keyword"===s.value[0].is)return function(e,t){return"object"==_typeof(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type;}(s,t);if("undefined"===s.value[0].is)return!0;if("numbers"===this.selector(t).type){for(r in s.value){if("float"!==s.value[r].is)return!1;}return!0;}if("tags"===this.selector(t).type){if(!s.value)return!1;if(!s.value[0].value)return"tag"===s.value[0].is;for(r=0;r<s.value[0].value.length;r++){if("tag"!==s.value[0].value[r].is)return!1;}return!0;}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var s in e.value){for(var r in e.value[s].value){if("call"!==e.value[s].value[r].is)return!1;var i=find(this.selector(t).functions,function(t){return t[0]===e.value[s].value[r].name;});if(!(i&&-1===i[1]||i&&i[1]===e.value[s].value[r].args.length))return!1;}}return!0;}(s,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===s.value[0].is&&(s.value[0].round(),!0);if(this.selector(t).validate){for(r=0;r<s.value.length;r++){if(this.selector(t).type===s.value[r].is&&this._validateValue[this.selector(t).validate](e,s.value[r].value))return!0;}return!1;}return this.selector(t).type===s.value[0].is;}return!1;}},r.CartoCSS.Tree.Reference.setVersion("latest"),r.CartoCSS.Tree.Rule=/*#__PURE__*/function(){function _class101(e,t,s,i){_classCallCheck(this,_class101);this.is="rule";var a=e.split("/");this.name=a.pop(),this.instance=a.length?a[0]:"__default__",this.value=t instanceof r.CartoCSS.Tree.Value?t:new r.CartoCSS.Tree.Value([t]),this.index=s,this.symbolizer=r.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=i,this.variable="@"===e.charAt(0);}_createClass(_class101,[{key:"clone",value:function clone(){var e=Object.create(r.CartoCSS.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e;}},{key:"updateID",value:function updateID(){return this.id=this.zoom+"#"+this.instance+"#"+this.name;}},{key:"toString",value:function toString(){return"["+r.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value;}},{key:"ev",value:function ev(e){return new r.CartoCSS.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename);}}]);return _class101;}(),r.CartoCSS.Tree.Ruleset=/*#__PURE__*/function(){function _class102(e,t){_classCallCheck(this,_class102);this.is="ruleset",this.selectors=e,this.rules=t,this._lookups={};}_createClass(_class102,[{key:"ev",value:function ev(e){var t,s,i=new r.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(i.root=this.root,e.frames.unshift(i),t=0;t<i.rules.length;t++){s=i.rules[t],i.rules[t]=s.ev?s.ev(e):s;}return e.frames.shift(),i;}},{key:"match",value:function match(e){return!e||0===e.length;}},{key:"variables",value:function variables(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof r.CartoCSS.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e;},{});}},{key:"variable",value:function variable(e){return this.variables()[e];}},{key:"rulesets",value:function rulesets(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof r.CartoCSS.Tree.Ruleset;});}},{key:"find",value:function find(e,t){t=t||this;var s=[],i=e.toString();return i in this._lookups?this._lookups[i]:(this.rulesets().forEach(function(i){if(i!==t)for(var a=0;a<i.selectors.length;a++){if(e.match(i.selectors[a])){e.elements.length>1?Array.prototype.push.apply(s,i.find(new r.CartoCSS.Tree.Selector(null,null,e.elements.slice(1)),t)):s.push(i);break;}}}),this._lookups[i]=s);}},{key:"evZooms",value:function evZooms(e){for(var t=0;t<this.selectors.length;t++){for(var s=r.CartoCSS.Tree.Zoom.all,i=0;i<this.selectors[t].zoom.length;i++){s=this.selectors[t].zoom[i].ev(e).zoom;}this.selectors[t].zoom=s;}}},{key:"flatten",value:function flatten(e,t,s){var i,a,n=[];for(0===this.selectors.length&&(s.frames=s.frames.concat(this.rules)),this.evZooms(s),i=0;i<this.selectors.length;i++){var o=this.selectors[i];if(o.filters)if(t.length)for(a=0;a<t.length;a++){var l=t[a],h=l.filters.cloneWith(o.filters);if(null===h){if(l.zoom===o.zoom&&l.attachment===o.attachment&&l.elements.join()===o.elements.join()){n.push(l);continue;}h=l.filters;}else if(!h)continue;var u=Object.create(r.CartoCSS.Tree.Selector.prototype);u.filters=h,u.zoom=o.zoom,u.elements=l.elements.concat(o.elements),l.attachment&&o.attachment?u.attachment=l.attachment+"/"+o.attachment:u.attachment=o.attachment||l.attachment,u.conditions=l.conditions+o.conditions,u.index=o.index,n.push(u);}else n.push(o);}var c=[];for(i=0;i<this.rules.length;i++){var d=this.rules[i];d instanceof r.CartoCSS.Tree.Ruleset?d.flatten(e,n,s):d instanceof r.CartoCSS.Tree.Rule?c.push(d):d instanceof r.CartoCSS.Tree.Invalid&&s.error(d);}var p=!!c.length&&c[0].index;for(i=0;i<n.length;i++){!1!==p&&(n[i].index=p),e.push(new r.CartoCSS.Tree.Definition(n[i],c.slice()));}return e;}}]);return _class102;}(),r.CartoCSS.Tree.Selector=/*#__PURE__*/function(){function _class103(e,t,s,i,a,n){_classCallCheck(this,_class103);this.elements=s||[],this.attachment=i,this.filters=e||{},this.zoom=void 0!==t?t:r.CartoCSS.Tree.Zoom.all,this.conditions=a,this.index=n;}_createClass(_class103,[{key:"specificity",value:function specificity(){return this.elements.reduce(function(e,t){var s=t.specificity();return e[0]+=s[0],e[1]+=s[1],e;},[0,0,this.conditions,this.index]);}}]);return _class103;}(),r.CartoCSS.Tree.URL=/*#__PURE__*/function(){function _class104(e,t){_classCallCheck(this,_class104);this.is="uri",this.value=e,this.paths=t;}_createClass(_class104,[{key:"toString",value:function toString(){return this.value.toString();}},{key:"ev",value:function ev(e){return new r.CartoCSS.Tree.URL(this.value.ev(e),this.paths);}}]);return _class104;}(),r.CartoCSS.Tree.Value=/*#__PURE__*/function(){function _class105(e){_classCallCheck(this,_class105);this.is="value",this.value=e;}_createClass(_class105,[{key:"ev",value:function ev(e){return 1===this.value.length?this.value[0].ev(e):new r.CartoCSS.Tree.Value(this.value.map(function(t){return t.ev(e);}));}},{key:"toJS",value:function toJS(e){var t=this.ev(e),s=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?s="'"+s+"'":"field"===t.is?s=s.replace(/\[(.*)\]/g,"attributes['$1']"):t.value&&"object"==_typeof(t.value)&&(s="["+s+"]"),"_value = "+s+";";}},{key:"toString",value:function toString(e,t,s,r){return this.value.map(function(t){return t.toString(e,r);}).join(s||", ");}},{key:"clone",value:function clone(){var e=Object.create(r.CartoCSS.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e;}}]);return _class105;}(),r.CartoCSS.Tree.Variable=/*#__PURE__*/function(){function _class106(e,t,s){_classCallCheck(this,_class106);this.is="variable",this.name=e,this.index=t,this.filename=s;}_createClass(_class106,[{key:"toString",value:function toString(){return this.name;}},{key:"ev",value:function ev(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name;}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"});}}]);return _class106;}(),r.CartoCSS.Tree.Zoom=/*#__PURE__*/function(){function _class107(e,t,s){_classCallCheck(this,_class107);this.op=e,this.value=t,this.index=s;}_createClass(_class107,[{key:"setZoom",value:function setZoom(e){return this.zoom=e,this;}},{key:"ev",value:function ev(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>r.CartoCSS.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+r.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t;break;default:return this;}return this;}},{key:"toString",value:function toString(){for(var e="",t=0;t<=r.CartoCSS.Tree.Zoom.maxZoom;t++){e+=this.zoom&1<<t?"X":".";}return e;}}]);return _class107;}(),r.CartoCSS.Tree.Zoom.all=23,r.CartoCSS.Tree.Zoom.maxZoom=22,r.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};r.ThemeStyle=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class108(e){_classCallCheck(this,_class108);e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,c.extend(this,e);}return _class108;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gr=/*#__PURE__*/function(){function Gr(){_classCallCheck(this,Gr);this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters";}_createClass(Gr,[{key:"destroy",value:function destroy(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null;}}]);return Gr;}();r.Feature=r.Feature||{},r.Feature.ShapeParameters=Gr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ur=/*#__PURE__*/function(_Gr){_inherits(Ur,_Gr);function Ur(e,t){var _this145;_classCallCheck(this,Ur);_this145=_possibleConstructorReturn(this,_getPrototypeOf(Ur).call(this,e,t)),_this145.x=isNaN(e)?0:e,_this145.y=isNaN(t)?0:t,_this145.r=6,_this145.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point";return _this145;}_createClass(Ur,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.r=null,_get(_getPrototypeOf(Ur.prototype),"destroy",this).call(this);}}]);return Ur;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Point=Ur;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Hr=/*#__PURE__*/function(_Gr2){_inherits(Hr,_Gr2);function Hr(e){var _this146;_classCallCheck(this,Hr);_this146=_possibleConstructorReturn(this,_getPrototypeOf(Hr).call(this,e)),_this146.pointList=e,_this146.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line";return _this146;}_createClass(Hr,[{key:"destroy",value:function destroy(){this.pointList=null,_get(_getPrototypeOf(Hr.prototype),"destroy",this).call(this);}}]);return Hr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Line=Hr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var jr=/*#__PURE__*/function(_Gr3){_inherits(jr,_Gr3);function jr(e){var _this147;_classCallCheck(this,jr);_this147=_possibleConstructorReturn(this,_getPrototypeOf(jr).call(this,e)),_this147.pointList=e,_this147.holePolygonPointLists=null,_this147.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon";return _this147;}_createClass(jr,[{key:"destroy",value:function destroy(){this.pointList=null,this.holePolygonPointLists=null,_get(_getPrototypeOf(jr.prototype),"destroy",this).call(this);}}]);return jr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Polygon=jr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Jr=/*#__PURE__*/function(_Gr4){_inherits(Jr,_Gr4);function Jr(e,t,s,r){var _this148;_classCallCheck(this,Jr);_this148=_possibleConstructorReturn(this,_getPrototypeOf(Jr).call(this,e,t,s,r)),_this148.x=isNaN(e)?0:e,_this148.y=isNaN(e)?0:t,_this148.width=isNaN(s)?0:s,_this148.height=isNaN(r)?0:r,_this148.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle";return _this148;}_createClass(Jr,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.width=null,this.height=null,_get(_getPrototypeOf(Jr.prototype),"destroy",this).call(this);}}]);return Jr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Rectangle=Jr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Vr=/*#__PURE__*/function(_Gr5){_inherits(Vr,_Gr5);function Vr(e,t,s,r,i,a,n){var _this149;_classCallCheck(this,Vr);_this149=_possibleConstructorReturn(this,_getPrototypeOf(Vr).call(this,e,t,s,r,i,a,n)),_this149.x=isNaN(e)?0:e,_this149.y=isNaN(t)?0:t,_this149.r=isNaN(s)?0:s,_this149.startAngle=isNaN(r)?0:r,_this149.endAngle=isNaN(i)?0:i,_this149.r0=isNaN(a)?0:a,_this149.clockWise=n,_this149.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector";return _this149;}_createClass(Vr,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,_get(_getPrototypeOf(Vr.prototype),"destroy",this).call(this);}}]);return Vr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Sector=Vr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qr=/*#__PURE__*/function(_Gr6){_inherits(qr,_Gr6);function qr(e,t,s){var _this150;_classCallCheck(this,qr);_this150=_possibleConstructorReturn(this,_getPrototypeOf(qr).call(this,e,t,s)),_this150.x=e,_this150.y=t,_this150.text=s,_this150.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label";return _this150;}_createClass(qr,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.text=null,_get(_getPrototypeOf(qr.prototype),"destroy",this).call(this);}}]);return qr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Label=qr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Wr=/*#__PURE__*/function(_Gr7){_inherits(Wr,_Gr7);function Wr(e,t,s,r,i,a,n,o,l){var _this151;_classCallCheck(this,Wr);_this151=_possibleConstructorReturn(this,_getPrototypeOf(Wr).call(this,e,t,s,r,i,a,n,o,l)),_this151.x=e,_this151.y=t,_this151.image=s,_this151.width=r,_this151.height=i,_this151.sx=a,_this151.sy=n,_this151.sWidth=o,_this151.sHeight=l,_this151.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image";return _this151;}_createClass(Wr,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,_get(_getPrototypeOf(Wr.prototype),"destroy",this).call(this);}}]);return Wr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Image=Wr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var zr=/*#__PURE__*/function(_Gr8){_inherits(zr,_Gr8);function zr(e,t,s){var _this152;_classCallCheck(this,zr);_this152=_possibleConstructorReturn(this,_getPrototypeOf(zr).call(this,e,t,s)),_this152.x=isNaN(e)?0:e,_this152.y=isNaN(t)?0:t,_this152.r=isNaN(s)?0:s,_this152.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle";return _this152;}_createClass(zr,[{key:"destroy",value:function destroy(){this.x=null,this.y=null,this.r=null,_get(_getPrototypeOf(zr.prototype),"destroy",this).call(this);}}]);return zr;}(Gr);r.Feature=r.Feature||{},r.Feature.ShapeParameters.Circle=zr;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Yr=/*#__PURE__*/function(){function Yr(){_classCallCheck(this,Yr);this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful";}_createClass(Yr,[{key:"destroy",value:function destroy(){this._handlers=null;}},{key:"one",value:function one(e,t,s){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:s||this}),this):this;}},{key:"bind",value:function bind(e,t,s){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:s||this}),this):this;}},{key:"unbind",value:function unbind(e,t){var s=this._handlers;if(!e)return this._handlers={},this;if(t){if(s[e]){for(var r=[],i=0,a=s[e].length;i<a;i++){s[e][i].h!=t&&r.push(s[e][i]);}s[e]=r;}s[e]&&0===s[e].length&&delete s[e];}else delete s[e];return this;}},{key:"dispatch",value:function dispatch(e){if(this._handlers[e]){var t=arguments,s=t.length;s>3&&(t=Array.prototype.slice.call(t,1));for(var r=this._handlers[e],i=r.length,a=0;a<i;){switch(s){case 1:r[a].h.call(r[a].ctx);break;case 2:r[a].h.call(r[a].ctx,t[1]);break;case 3:r[a].h.call(r[a].ctx,t[1],t[2]);break;default:r[a].h.apply(r[a].ctx,t);}r[a].one?(r.splice(a,1),i--):a++;}}return this;}},{key:"dispatchWithContext",value:function dispatchWithContext(e){if(this._handlers[e]){var t=arguments,s=t.length;s>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var r=t[t.length-1],i=this._handlers[e],a=i.length,n=0;n<a;){switch(s){case 1:i[n].h.call(r);break;case 2:i[n].h.call(r,t[1]);break;case 3:i[n].h.call(r,t[1],t[2]);break;default:i[n].h.apply(r,t);}i[n].one?(i.splice(n,1),a--):n++;}}return this;}}]);return Yr;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xr=/*#__PURE__*/function(){function Xr(){_classCallCheck(this,Xr);this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector";}_createClass(Xr,[{key:"create",value:function create(e,t){var s=new(0,this.ArrayCtor)(2);return s[0]=e||0,s[1]=t||0,s;}},{key:"copy",value:function copy(e,t){return e[0]=t[0],e[1]=t[1],e;}},{key:"set",value:function set(e,t,s){return e[0]=t,e[1]=s,e;}},{key:"add",value:function add(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e;}},{key:"scaleAndAdd",value:function scaleAndAdd(e,t,s,r){return e[0]=t[0]+s[0]*r,e[1]=t[1]+s[1]*r,e;}},{key:"sub",value:function sub(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e;}},{key:"len",value:function len(e){return Math.sqrt(this.lenSquare(e));}},{key:"lenSquare",value:function lenSquare(e){return e[0]*e[0]+e[1]*e[1];}},{key:"mul",value:function mul(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e;}},{key:"div",value:function div(e,t,s){return e[0]=t[0]/s[0],e[1]=t[1]/s[1],e;}},{key:"dot",value:function dot(e,t){return e[0]*t[0]+e[1]*t[1];}},{key:"scale",value:function scale(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e;}},{key:"normalize",value:function normalize(e,t){var s=this.len(t);return 0===s?(e[0]=0,e[1]=0):(e[0]=t[0]/s,e[1]=t[1]/s),e;}},{key:"distance",value:function distance(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]));}},{key:"distanceSquare",value:function distanceSquare(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]);}},{key:"negate",value:function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e;}},{key:"lerp",value:function lerp(e,t,s,r){return e[0]=t[0]+r*(s[0]-t[0]),e[1]=t[1]+r*(s[1]-t[1]),e;}},{key:"applyTransform",value:function applyTransform(e,t,s){var r=t[0],i=t[1];return e[0]=s[0]*r+s[2]*i+s[4],e[1]=s[1]*r+s[3]*i+s[5],e;}},{key:"min",value:function min(e,t,s){return e[0]=Math.min(t[0],s[0]),e[1]=Math.min(t[1],s[1]),e;}},{key:"max",value:function max(e,t,s){return e[0]=Math.max(t[0],s[0]),e[1]=Math.max(t[1],s[1]),e;}},{key:"length",value:function length(e){return this.len(e);}},{key:"lengthSquare",value:function lengthSquare(e){return this.lenSquare(e);}},{key:"dist",value:function dist(e,t){return this.distance(e,t);}},{key:"distSquare",value:function distSquare(e,t){return this.distanceSquare(e,t);}}]);return Xr;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qr=/*#__PURE__*/function(){function Qr(){_classCallCheck(this,Qr);this.vector=new Xr(),this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve";}_createClass(Qr,[{key:"isAroundZero",value:function isAroundZero(e){return e>-this.EPSILON&&e<this.EPSILON;}},{key:"isNotAroundZero",value:function isNotAroundZero(e){return e>this.EPSILON||e<-this.EPSILON;}},{key:"cubicAt",value:function cubicAt(e,t,s,r,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*r+3*a*s);}},{key:"cubicDerivativeAt",value:function cubicDerivativeAt(e,t,s,r,i){var a=1-i;return 3*(((t-e)*a+2*(s-t)*i)*a+(r-s)*i*i);}},{key:"cubicRootAt",value:function cubicRootAt(e,t,s,r,i,a){var n=r+3*(t-s)-e,o=3*(s-2*t+e),l=3*(t-e),h=e-i,u=o*o-3*n*l,c=o*l-9*n*h,d=l*l-3*o*h,p=0;if(this.isAroundZero(u)&&this.isAroundZero(c)){if(this.isAroundZero(o))a[0]=0;else{var _e41=-l/o;_e41>=0&&_e41<=1&&(a[p++]=_e41);}}else{var m=c*c-4*u*d;if(this.isAroundZero(m)){var f=c/u;var _e42=-o/n+f,_t27=-f/2;_e42>=0&&_e42<=1&&(a[p++]=_e42),_t27>=0&&_t27<=1&&(a[p++]=_t27);}else if(m>0){var _e43=Math.sqrt(m),_t28=u*o+1.5*n*(-c+_e43),_s20=u*o+1.5*n*(-c-_e43),_r10=(-o-((_t28=_t28<0?-Math.pow(-_t28,this.ONE_THIRD):Math.pow(_t28,this.ONE_THIRD))+(_s20=_s20<0?-Math.pow(-_s20,this.ONE_THIRD):Math.pow(_s20,this.ONE_THIRD))))/(3*n);_r10>=0&&_r10<=1&&(a[p++]=_r10);}else{var y=(2*u*o-3*n*c)/(2*Math.sqrt(u*u*u)),g=Math.acos(y)/3,v=Math.sqrt(u),S=Math.cos(g);var _e44=(-o-2*v*S)/(3*n),_t29=(-o+v*(S+this.THREE_SQRT*Math.sin(g)))/(3*n),_s21=(-o+v*(S-this.THREE_SQRT*Math.sin(g)))/(3*n);_e44>=0&&_e44<=1&&(a[p++]=_e44),_t29>=0&&_t29<=1&&(a[p++]=_t29),_s21>=0&&_s21<=1&&(a[p++]=_s21);}}return p;}},{key:"cubicExtrema",value:function cubicExtrema(e,t,s,r,i){var a=6*s-12*t+6*e,n=9*t+3*r-3*e-9*s,o=3*t-3*e,l=0;if(this.isAroundZero(n)){if(this.isNotAroundZero(a)){var _e45=-o/a;_e45>=0&&_e45<=1&&(i[l++]=_e45);}}else{var h=a*a-4*n*o;if(this.isAroundZero(h))i[0]=-a/(2*n);else if(h>0){var _e46=Math.sqrt(h),_t30=(-a+_e46)/(2*n),_s22=(-a-_e46)/(2*n);_t30>=0&&_t30<=1&&(i[l++]=_t30),_s22>=0&&_s22<=1&&(i[l++]=_s22);}}return l;}},{key:"cubicSubdivide",value:function cubicSubdivide(e,t,s,r,i,a){var n=(t-e)*i+e,o=(s-t)*i+t,l=(r-s)*i+s,h=(o-n)*i+n,u=(l-o)*i+o,c=(u-h)*i+h;a[0]=e,a[1]=n,a[2]=h,a[3]=c,a[4]=c,a[5]=u,a[6]=l,a[7]=r;}},{key:"cubicProjectPoint",value:function cubicProjectPoint(e,t,s,r,i,a,n,o,l,h,u){var c,d=this.vector.create(),p=this.vector.create(),m=this.vector.create(),f=.005,y=1/0;d[0]=l,d[1]=h;for(var _l2=0;_l2<1;_l2+=.05){p[0]=this.cubicAt(e,s,i,n,_l2),p[1]=this.cubicAt(t,r,a,o,_l2);var _h2=this.vector.distSquare(d,p);_h2<y&&(c=_l2,y=_h2);}y=1/0;for(var _l3=0;_l3<32&&!(f<this.EPSILON);_l3++){var _l4=c-f,_h3=c+f;p[0]=this.cubicAt(e,s,i,n,_l4),p[1]=this.cubicAt(t,r,a,o,_l4);var _u2=this.vector.distSquare(p,d);if(_l4>=0&&_u2<y)c=_l4,y=_u2;else{m[0]=this.cubicAt(e,s,i,n,_h3),m[1]=this.cubicAt(t,r,a,o,_h3);var _l5=this.vector.distSquare(m,d);_h3<=1&&_l5<y?(c=_h3,y=_l5):f*=.5;}}return u&&(u[0]=this.cubicAt(e,s,i,n,c),u[1]=this.cubicAt(t,r,a,o,c)),Math.sqrt(y);}},{key:"quadraticAt",value:function quadraticAt(e,t,s,r){var i=1-r;return i*(i*e+2*r*t)+r*r*s;}},{key:"quadraticDerivativeAt",value:function quadraticDerivativeAt(e,t,s,r){return 2*((1-r)*(t-e)+r*(s-t));}},{key:"quadraticRootAt",value:function quadraticRootAt(e,t,s,r,i){var a=e-2*t+s,n=2*(t-e),o=e-r,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(n)){var h=-o/n;h>=0&&h<=1&&(i[l++]=h);}}else{var u=n*n-4*a*o;if(this.isAroundZero(u)){var _e47=-n/(2*a);_e47>=0&&_e47<=1&&(i[l++]=_e47);}else if(u>0){var _e48=Math.sqrt(u),_t31=(-n+_e48)/(2*a),_s23=(-n-_e48)/(2*a);_t31>=0&&_t31<=1&&(i[l++]=_t31),_s23>=0&&_s23<=1&&(i[l++]=_s23);}}return l;}},{key:"quadraticExtremum",value:function quadraticExtremum(e,t,s){var r=e+s-2*t;return 0===r?.5:(e-t)/r;}},{key:"quadraticProjectPoint",value:function quadraticProjectPoint(e,t,s,r,i,a,n,o,l){var h,u=this.vector.create(),c=this.vector.create(),d=this.vector.create(),p=.005,m=1/0;u[0]=n,u[1]=o;for(var _n3=0;_n3<1;_n3+=.05){c[0]=this.quadraticAt(e,s,i,_n3),c[1]=this.quadraticAt(t,r,a,_n3);var _o3=this.vector.distSquare(u,c);_o3<m&&(h=_n3,m=_o3);}m=1/0;for(var _n4=0;_n4<32&&!(p<this.EPSILON);_n4++){var _n5=h-p,_o4=h+p;c[0]=this.quadraticAt(e,s,i,_n5),c[1]=this.quadraticAt(t,r,a,_n5);var _l6=this.vector.distSquare(c,u);if(_n5>=0&&_l6<m)h=_n5,m=_l6;else{d[0]=this.quadraticAt(e,s,i,_o4),d[1]=this.quadraticAt(t,r,a,_o4);var _n6=this.vector.distSquare(d,u);_o4<=1&&_n6<m?(h=_o4,m=_n6):p*=.5;}}return l&&(l[0]=this.quadraticAt(e,s,i,h),l[1]=this.quadraticAt(t,r,a,h)),Math.sqrt(m);}}]);return Qr;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Kr=function Kr(){_classCallCheck(this,Kr);};Kr.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},Kr.catchBrushException=!1,Kr.debugMode=0;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Zr=/*#__PURE__*/function(){function Zr(){_classCallCheck(this,Zr);}_createClass(Zr,null,[{key:"SUtil_smoothBezier",value:function SUtil_smoothBezier(e,t,s,r,i){i&&2===i||(i=[0,0]);var a,n,o=i,l=[],h=[],u=[],c=[],d=!!r;if(d){a=[1/0,1/0],n=[-1/0,-1/0];var _t32=e.length;for(var _s24=0;_s24<_t32;_s24++){Zr.Util_vector.min(a,a,[e[_s24][0]+o[0],e[_s24][1]+o[1]]),Zr.Util_vector.max(n,n,[e[_s24][0]+o[0],e[_s24][1]+o[1]]);}Zr.Util_vector.min(a,a,r[0]),Zr.Util_vector.max(n,n,r[1]);}var p=e.length;for(var _r11=0;_r11<p;_r11++){var _i10=void 0,_m=void 0,_f=[e[_r11][0]+o[0],e[_r11][1]+o[1]];if(s)_i10=[e[_r11?_r11-1:p-1][0]+o[0],e[_r11?_r11-1:p-1][1]+o[1]],_m=[e[(_r11+1)%p][0]+o[0],e[(_r11+1)%p][1]+o[1]];else{if(0===_r11||_r11===p-1){l.push([e[_r11][0]+o[0],e[_r11][1]+o[1]]);continue;}_i10=[e[_r11-1][0]+o[0],e[_r11-1][1]+o[1]],_m=[e[_r11+1][0]+o[0],e[_r11+1][1]+o[1]];}Zr.Util_vector.sub(h,_m,_i10),Zr.Util_vector.scale(h,h,t);var _y=Zr.Util_vector.distance(_f,_i10),_g=Zr.Util_vector.distance(_f,_m),_v=_y+_g;0!==_v&&(_y/=_v,_g/=_v),Zr.Util_vector.scale(u,h,-_y),Zr.Util_vector.scale(c,h,_g);var _S=Zr.Util_vector.add([],_f,u),_b=Zr.Util_vector.add([],_f,c);d&&(Zr.Util_vector.max(_S,_S,a),Zr.Util_vector.min(_S,_S,n),Zr.Util_vector.max(_b,_b,a),Zr.Util_vector.min(_b,_b,n)),l.push(_S),l.push(_b);}return s&&l.push(l.shift()),l;}},{key:"SUtil_smoothSpline",value:function SUtil_smoothSpline(e,t,s,r){r&&2===r||(r=[0,0]);var i=r,a=e.length,n=[],o=0;for(var _t33=1;_t33<a;_t33++){o+=Zr.Util_vector.distance([e[_t33-1][0]+i[0],e[_t33-1][1]+i[1]],[e[_t33][0]+i[0],e[_t33][1]+i[1]]);}var l=o/5;l=l<a?a:l;for(var _s25=0;_s25<l;_s25++){var _r12=void 0,_o5=void 0,_u3=void 0,_c2=_s25/(l-1)*(t?a:a-1),_d=Math.floor(_c2),_p=_c2-_d,_m2=[e[_d%a][0]+i[0],e[_d%a][1]+i[1]];t?(_r12=[e[(_d-1+a)%a][0]+i[0],e[(_d-1+a)%a][1]+i[1]],_o5=[e[(_d+1)%a][0]+i[0],e[(_d+1)%a][1]+i[1]],_u3=[e[(_d+2)%a][0]+i[0],e[(_d+2)%a][1]+i[1]]):(_r12=[e[0===_d?_d:_d-1][0]+i[0],e[0===_d?_d:_d-1][1]+i[1]],_o5=[e[_d>a-2?a-1:_d+1][0]+i[0],e[_d>a-2?a-1:_d+1][1]+i[1]],_u3=[e[_d>a-3?a-1:_d+2][0]+i[0],e[_d>a-3?a-1:_d+2][1]+i[1]]);var _f2=_p*_p,_y2=_p*_f2;n.push([h(_r12[0],_m2[0],_o5[0],_u3[0],_p,_f2,_y2),h(_r12[1],_m2[1],_o5[1],_u3[1],_p,_f2,_y2)]);}return n;function h(e,t,s,r,i,a,n){var o=.5*(s-e),l=.5*(r-t);return(2*(t-s)+o+l)*n+(-3*(t-s)-2*o-l)*a+o*i+t;}}},{key:"SUtil_dashedLineTo",value:function SUtil_dashedLineTo(e,t,s,r,i,a,n){var o=[5,5];if(a="number"!=typeof a?5:a,e.setLineDash)return o[0]=a,o[1]=a,n&&n instanceof Array?e.setLineDash(n):e.setLineDash(o),e.moveTo(t,s),void e.lineTo(r,i);var l=r-t,h=i-s,u=Math.floor(Math.sqrt(l*l+h*h)/a);l/=u,h/=u;for(var c=!0,d=0;d<u;++d){c?e.moveTo(t,s):e.lineTo(t,s),c=!c,t+=l,s+=h;}e.lineTo(r,i);}}]);return Zr;}();Zr.Util_area=new(/*#__PURE__*/function(){function _class109(){_classCallCheck(this,_class109);this.util=new Mr(),this.curve=new Qr(),this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area";}_createClass(_class109,[{key:"normalizeRadian",value:function normalizeRadian(e){return(e%=this.PI2)<0&&(e+=this.PI2),e;}},{key:"isInside",value:function isInside(e,t,s,r){if(!t||!e)return!1;var i=e.type;this._ctx=this._ctx||this.util.getContext();var a=this._mathMethod(e,t,s,r);if(void 0!==a)return a;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,s,r);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var n="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,s,r,n);case"rose":return this.isInsideCircle(t,s,r,t.maxr);default:return!1;}}},{key:"_mathMethod",value:function _mathMethod(e,t,s,r){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,s,r):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,s,r);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,s,r);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,s,r);case"smicbroken-line":{var _i11=s,_a4=r;return e.refOriginalPosition&&(_i11=s-e.refOriginalPosition[0],_a4=r-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,_i11,_a4);}case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,s,r);case"smicring":{var _i12=t.x,_a5=t.y;return e.refOriginalPosition&&(_i12=t.x+e.refOriginalPosition[0],_a5=t.y+e.refOriginalPosition[1]),this.isInsideRing(_i12,_a5,t.r0,t.r,s,r);}case"circle":return this.isInsideCircle(t.x,t.y,t.r,s,r);case"smicpoint":{var _i13=s,_a6=r;return e.refOriginalPosition&&(_i13=s-e.refOriginalPosition[0],_a6=r-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,_i13,_a6);}case"sector":{var _e49=t.startAngle*Math.PI/180,_i14=t.endAngle*Math.PI/180;return t.clockWise||(_e49=-_e49,_i14=-_i14),this.isInsideSector(t.x,t.y,t.r0,t.r,_e49,_i14,!t.clockWise,s,r);}case"smicsector":{var _i15=t.startAngle*Math.PI/180,_a7=t.endAngle*Math.PI/180;t.clockWise||(_i15=-_i15,_a7=-_a7);var _n7=t.x,_o6=t.y;return e.refOriginalPosition&&(_n7=t.x+e.refOriginalPosition[0],_o6=t.y+e.refOriginalPosition[1]),this.isInsideSector(_n7,_o6,t.r0,t.r,_i15,_a7,!t.clockWise,s,r);}case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,s,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,s,r);case"smicpolygon":{var _u4=s,_c3=r;if(e.refOriginalPosition&&(_u4=s-e.refOriginalPosition[0],_c3=r-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var i=this.isInsidePolygon(t.pointList,_u4,_c3),a=e.holePolygonPointLists,n=!1,o=0,l=a.length;o<l;o++){var h=a[o];!0===this.isInsidePolygon(h,_u4,_c3)&&(n=!0);}return!0===i&&!1===n;}return this.isInsidePolygon(t.pointList,_u4,_c3);}case"text":var u=t.__rect||e.getRect(t);return this.isInsideRect(u.x,u.y,u.width,u.height,s,r);case"smictext":var c=e.getTextBackground(t);return this.isInsidePolygon(c,s,r);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,s,r);case"smicimage":{var _i16=t.x,_a8=t.y;return e.refOriginalPosition&&(_i16=t.x+e.refOriginalPosition[0],_a8=t.y+e.refOriginalPosition[1]),this.isInsideRect(_i16,_a8,t.width,t.height,s,r);}}}},{key:"_buildPathMethod",value:function _buildPathMethod(e,t,s,r,i){return t.beginPath(),e.buildPath(t,s),t.closePath(),t.isPointInPath(r,i);}},{key:"isOutside",value:function isOutside(e,t,s,r){return!this.isInside(e,t,s,r);}},{key:"isInsideLine",value:function isInsideLine(e,t,s,r,i,a,n){if(0===i)return!1;var o=Math.max(i,5),l=0;if(n>t+o&&n>r+o||n<t-o&&n<r-o||a>e+o&&a>s+o||a<e-o&&a<s-o)return!1;if(e===s)return Math.abs(a-e)<=o/2;var h=(l=(t-r)/(e-s))*a-n+(e*r-s*t)/(e-s);return h*h/(l*l+1)<=o/2*o/2;}},{key:"isInsideCubicStroke",value:function isInsideCubicStroke(e,t,s,r,i,a,n,o,l,h,u){if(0===l)return!1;var c=Math.max(l,5);return!(u>t+c&&u>r+c&&u>a+c&&u>o+c||u<t-c&&u<r-c&&u<a-c&&u<o-c||h>e+c&&h>s+c&&h>i+c&&h>n+c||h<e-c&&h<s-c&&h<i-c&&h<n-c)&&this.curve.cubicProjectPoint(e,t,s,r,i,a,n,o,h,u,null)<=c/2;}},{key:"isInsideQuadraticStroke",value:function isInsideQuadraticStroke(e,t,s,r,i,a,n,o,l){if(0===n)return!1;var h=Math.max(n,5);return!(l>t+h&&l>r+h&&l>a+h||l<t-h&&l<r-h&&l<a-h||o>e+h&&o>s+h&&o>i+h||o<e-h&&o<s-h&&o<i-h)&&this.curve.quadraticProjectPoint(e,t,s,r,i,a,o,l,null)<=h/2;}},{key:"isInsideArcStroke",value:function isInsideArcStroke(e,t,s,r,i,a,n,o,l){var h=this.PI2;if(0===n)return!1;var u=Math.max(n,5);o-=e,l-=t;var c=Math.sqrt(o*o+l*l);if(c-u>s||c+u<s)return!1;if(Math.abs(r-i)>=h)return!0;if(a){var d=r;r=this.normalizeRadian(i),i=this.normalizeRadian(d);}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=h);var p=Math.atan2(l,o);return p<0&&(p+=h),p>=r&&p<=i||p+h>=r&&p+h<=i;}},{key:"isInsideBrokenLine",value:function isInsideBrokenLine(e,t,s,r){for(var i=Math.max(t,10),a=0,n=e.length-1;a<n;a++){var o=e[a][0],l=e[a][1],h=e[a+1][0],u=e[a+1][1];if(this.isInsideLine(o,l,h,u,i,s,r))return!0;}return!1;}},{key:"isInsideRing",value:function isInsideRing(e,t,s,r,i,a){var n=(i-e)*(i-e)+(a-t)*(a-t);return n<r*r&&n>s*s;}},{key:"isInsideRect",value:function isInsideRect(e,t,s,r,i,a){return i>=e&&i<=e+s&&a>=t&&a<=t+r;}},{key:"isInsideCircle",value:function isInsideCircle(e,t,s,r,i){return(r-e)*(r-e)+(i-t)*(i-t)<s*s;}},{key:"isInsideSector",value:function isInsideSector(e,t,s,r,i,a,n,o,l){return this.isInsideArcStroke(e,t,(s+r)/2,i,a,n,r-s,o,l);}},{key:"isInsidePolygon",value:function isInsidePolygon(e,t,s){for(var r=e.length,i=0,a=0,n=r-1;a<r;a++){var o=e[n][0],l=e[n][1],h=e[a][0],u=e[a][1];i+=this.windingLine(o,l,h,u,t,s),n=a;}return 0!==i;}},{key:"windingLine",value:function windingLine(e,t,s,r,i,a){return a>t&&a>r||a<t&&a<r?0:r==t?0:(a-t)/(r-t)*(s-e)+e>i?r<t?1:-1:0;}},{key:"swapExtrema",value:function swapExtrema(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e;}},{key:"windingCubic",value:function windingCubic(e,t,s,r,i,a,n,o,l,h){var u=this.curve,c=this.roots,d=this.extrema;if(h>t&&h>r&&h>a&&h>o||h<t&&h<r&&h<a&&h<o)return 0;var p=u.cubicRootAt(t,r,a,o,h,c);if(0===p)return 0;for(var m,f,y=0,g=-1,v=0;v<p;v++){var S=c[v];u.cubicAt(e,s,i,n,S)<l||(g<0&&(g=u.cubicExtrema(t,r,a,o,d),d[1]<d[0]&&g>1&&this.swapExtrema(),m=u.cubicAt(t,r,a,o,d[0]),g>1&&(f=u.cubicAt(t,r,a,o,d[1]))),2==g?S<d[0]?y+=m<t?1:-1:S<d[1]?y+=f<m?1:-1:y+=o<f?1:-1:S<d[0]?y+=m<t?1:-1:y+=o<m?1:-1);}return y;}},{key:"windingQuadratic",value:function windingQuadratic(e,t,s,r,i,a,n,o){var l=this.curve,h=this.roots;if(o>t&&o>r&&o>a||o<t&&o<r&&o<a)return 0;var u=l.quadraticRootAt(t,r,a,o,h);if(0===u)return 0;var c=l.quadraticExtremum(t,r,a);if(c>=0&&c<=1){var d=0,p=l.quadraticAt(t,r,a,c);for(var _r13=0;_r13<u;_r13++){l.quadraticAt(e,s,i,h[_r13])>n||(h[_r13]<c?d+=p<t?1:-1:d+=a<p?1:-1);}return d;}return l.quadraticAt(e,s,i,h[0])>n?0:a<t?1:-1;}},{key:"windingArc",value:function windingArc(e,t,s,r,i,a,n,o){var l=this.roots,h=this.PI2;if((o-=t)>s||o<-s)return 0;var u=Math.sqrt(s*s-o*o);if(l[0]=-u,l[1]=u,Math.abs(r-i)>=h){r=0,i=h;var c=a?1:-1;return n>=l[0]+e&&n<=l[1]+e?c:0;}if(a){var _e50=r;r=this.normalizeRadian(i),i=this.normalizeRadian(_e50);}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=h);var d=0;for(var _t34=0;_t34<2;_t34++){var p=l[_t34];if(p+e>n){var _e51=Math.atan2(o,p),_t35=a?1:-1;_e51<0&&(_e51=h+_e51),(_e51>=r&&_e51<=i||_e51+h>=r&&_e51+h<=i)&&(_e51>Math.PI/2&&_e51<1.5*Math.PI&&(_t35=-_t35),d+=_t35);}}return d;}},{key:"isInsidePath",value:function isInsidePath(e,t,s,r,i){for(var a=0,n=0,o=0,l=0,h=0,u=!0,c=!0,d="stroke"===(s=s||"fill")||"both"===s,p="fill"===s||"both"===s,m=0;m<e.length;m++){var f=e[m],y=f.points;if(u||"M"===f.command){if(m>0&&(p&&(a+=this.windingLine(n,o,l,h,r,i)),0!==a))return!0;l=y[y.length-2],h=y[y.length-1],u=!1,c&&"A"!==f.command&&(c=!1,n=l,o=h);}switch(f.command){case"M":n=y[0],o=y[1];break;case"L":if(d&&this.isInsideLine(n,o,y[0],y[1],t,r,i))return!0;p&&(a+=this.windingLine(n,o,y[0],y[1],r,i)),n=y[0],o=y[1];break;case"C":if(d&&this.isInsideCubicStroke(n,o,y[0],y[1],y[2],y[3],y[4],y[5],t,r,i))return!0;p&&(a+=this.windingCubic(n,o,y[0],y[1],y[2],y[3],y[4],y[5],r,i)),n=y[4],o=y[5];break;case"Q":if(d&&this.isInsideQuadraticStroke(n,o,y[0],y[1],y[2],y[3],t,r,i))return!0;p&&(a+=this.windingQuadratic(n,o,y[0],y[1],y[2],y[3],r,i)),n=y[2],o=y[3];break;case"A":var g=y[0],v=y[1],S=y[2],b=y[3],x=y[4],C=y[5],_=Math.cos(x)*S+g,T=Math.sin(x)*b+v;c?(c=!1,l=_,h=T):a+=this.windingLine(n,o,_,T);var E=(r-g)*b/S+g;if(d&&this.isInsideArcStroke(g,v,b,x,x+C,1-y[7],t,E,i))return!0;p&&(a+=this.windingArc(g,v,b,x,x+C,1-y[7],E,i)),n=Math.cos(x+C)*S+g,o=Math.sin(x+C)*b+v;break;case"z":if(d&&this.isInsideLine(n,o,l,h,t,r,i))return!0;u=!0;}}return p&&(a+=this.windingLine(n,o,l,h,r,i)),0!==a;}},{key:"getTextWidth",value:function getTextWidth(e,t){var s=e+":"+t;if(this._textWidthCache[s])return this._textWidthCache[s];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var r=0,i=0,a=(e=(e+"").split("\n")).length;i<a;i++){r=Math.max(this._ctx.measureText(e[i]).width,r);}return this._ctx.restore(),this._textWidthCache[s]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r;}},{key:"getTextHeight",value:function getTextHeight(e,t){var s=e+":"+t;if(this._textHeightCache[s])return this._textHeightCache[s];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[s]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r;}}]);return _class109;}())()/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/,Zr.Util_color=new Ir(),Zr.Util_computeBoundingBox=new(/*#__PURE__*/function(){function _class110(){_classCallCheck(this,_class110);3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox";}_createClass(_class110,[{key:"computeBoundingBox",value:function computeBoundingBox(e,t,s){if(0!==e.length){for(var r=e[0][0],i=e[0][0],a=e[0][1],n=e[0][1],o=1;o<e.length;o++){var l=e[o];l[0]<r&&(r=l[0]),l[0]>i&&(i=l[0]),l[1]<a&&(a=l[1]),l[1]>n&&(n=l[1]);}t[0]=r,t[1]=a,s[0]=i,s[1]=n;}}},{key:"cubeBezier",value:function cubeBezier(e,t,s,r,i,a){var n=new Qr(),o=[];n.cubicExtrema(e[0],t[0],s[0],r[0],o);for(var _i17=0;_i17<o.length;_i17++){o[_i17]=n.cubicAt(e[0],t[0],s[0],r[0],o[_i17]);}var l=[];n.cubicExtrema(e[1],t[1],s[1],r[1],l);for(var _i18=0;_i18<l.length;_i18++){l[_i18]=n.cubicAt(e[1],t[1],s[1],r[1],l[_i18]);}o.push(e[0],r[0]),l.push(e[1],r[1]);var h=Math.min.apply(null,o),u=Math.max.apply(null,o),c=Math.min.apply(null,l),d=Math.max.apply(null,l);i[0]=h,i[1]=c,a[0]=u,a[1]=d;}},{key:"quadraticBezier",value:function quadraticBezier(e,t,s,r,i){var a=new Qr(),n=a.quadraticExtremum(e[0],t[0],s[0]),o=a.quadraticExtremum(e[1],t[1],s[1]),l=1-(n=Math.max(Math.min(n,1),0)),h=1-(o=Math.max(Math.min(o,1),0)),u=l*l*e[0]+2*l*n*t[0]+n*n*s[0],c=l*l*e[1]+2*l*n*t[1]+n*n*s[1],d=h*h*e[0]+2*h*o*t[0]+o*o*s[0],p=h*h*e[1]+2*h*o*t[1]+o*o*s[1];r[0]=Math.min(e[0],s[0],u,d),r[1]=Math.min(e[1],s[1],c,p),i[0]=Math.max(e[0],s[0],u,d),i[1]=Math.max(e[1],s[1],c,p);}},{key:"arc",value:function arc(e,t,s,r,i,a,n,o){var l=new Xr(),h=l.create(),u=l.create(),c=l.create();if(h[0]=Math.cos(r)*s+e,h[1]=Math.sin(r)*s+t,u[0]=Math.cos(i)*s+e,u[1]=Math.sin(i)*s+t,l.min(n,h,u),l.max(o,h,u),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(i%=2*Math.PI)<0&&(i+=2*Math.PI),r>i&&!a?i+=2*Math.PI:r<i&&a&&(r+=2*Math.PI),a){var d=i;i=r,r=d;}for(var p=0;p<i;p+=Math.PI/2){p>r&&(c[0]=Math.cos(p)*s+e,c[1]=Math.sin(p)*s+t,l.min(n,c,n),l.max(o,c,o));}}}]);return _class110;}())()/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/,Zr.Util_curve=new Qr(),Zr.Util_env=new(/*#__PURE__*/function(){function _class111(){_classCallCheck(this,_class111);this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,t,s,r,i,a,n,o,l,h,u,c,d,p,m,f,y,g,v,S,b,x=this;return e=navigator.userAgent,t=x.os={},s=x.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),n=e.match(/(iPod)(.*OS\s([\d_]+))?/),o=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),h=l&&e.match(/TouchPad/),u=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),m=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),f=e.match(/PlayBook/),y=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/),v=e.match(/MSIE ([\d.]+)/),S=r&&e.match(/Mobile\//)&&!y,b=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!y,(s.webkit=!!r)&&(s.version=r[1]),i&&(t.android=!0,t.version=i[2]),o&&!n&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,".")),a&&(t.ios=t.ipad=!0,t.version=a[2].replace(/_/g,".")),n&&(t.ios=t.ipod=!0,t.version=n[3]?n[3].replace(/_/g,"."):null),l&&(t.webos=!0,t.version=l[2]),h&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),p&&(t.bb10=!0,t.version=p[2]),m&&(t.rimtabletos=!0,t.version=m[2]),f&&(s.playbook=!0),u&&(t.kindle=!0,t.version=u[1]),c&&(s.silk=!0,s.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(s.silk=!0),y&&(s.chrome=!0,s.version=y[1]),g&&(s.firefox=!0,s.version=g[1]),v&&(s.ie=!0,s.version=v[1]),S&&(e.match(/Safari/)||t.ios)&&(s.safari=!0),b&&(s.webview=!0),v&&(s.ie=!0,s.version=v[1]),t.tablet=!!(a||f||i&&!e.match(/Mobile/)||g&&e.match(/Tablet/)||v&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(i||o||l||d||p||y&&e.match(/Android/)||y&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)||v&&e.match(/Touch/))),{browser:s,os:t,canvasSupported:!!document.createElement("canvas").getContext};}_createClass(_class111,[{key:"destory",value:function destory(){return!0;}}]);return _class111;}())()/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/,Zr.Util_event=new(/*#__PURE__*/function(){function _class112(){_classCallCheck(this,_class112);this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0;}:function(e){e.returnValue=!1,e.cancelBubble=!0;},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event";}_createClass(_class112,[{key:"getX",value:function getX(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX;}},{key:"getY",value:function getY(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY;}},{key:"getDelta",value:function getDelta(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail;}}]);return _class112;}())()/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/,Zr.Util_http=new(/*#__PURE__*/function(){function _class113(){_classCallCheck(this,_class113);this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http";}_createClass(_class113,[{key:"get",value:function get(e,t,s){if("object"==_typeof(e)){var r=e;e=r.url,t=r.onsuccess,s=r.onerror;}var i=window.XMLHttpRequest?new XMLHttpRequest():new window.ActiveXObject("Microsoft.XMLHTTP");i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<300||304===i.status?t&&t(i.responseText):s&&s(),i.onreadystatechange=new Function(),i=null);},i.send(null);}}]);return _class113;}())(),Zr.Util_log=new(/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class114(){_classCallCheck(this,_class114);return this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==Kr.debugMode)if(1==Kr.debugMode)for(var _e52 in arguments){throw new Error(arguments[_e52]);}else if(Kr.debugMode>1)for(var _e53 in arguments){console.log(arguments[_e53]);}};}_createClass(_class114,[{key:"destory",value:function destory(){return!0;}}]);return _class114;}())()/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/,Zr.Util_math=new(/*#__PURE__*/function(){function _class115(){_classCallCheck(this,_class115);this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math";}_createClass(_class115,[{key:"sin",value:function sin(e,t){return window.Math.sin(t?e*this._radians:e);}},{key:"cos",value:function cos(e,t){return window.Math.cos(t?e*this._radians:e);}},{key:"degreeToRadian",value:function degreeToRadian(e){return e*this._radians;}},{key:"radianToDegree",value:function radianToDegree(e){return e/this._radians;}}]);return _class115;}())()/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/,Zr.Util_matrix=new(/*#__PURE__*/function(){function _class116(){_classCallCheck(this,_class116);this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix";}_createClass(_class116,[{key:"create",value:function create(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e;}},{key:"identity",value:function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e;}},{key:"copy",value:function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e;}},{key:"mul",value:function mul(e,t,s){return e[0]=t[0]*s[0]+t[2]*s[1],e[1]=t[1]*s[0]+t[3]*s[1],e[2]=t[0]*s[2]+t[2]*s[3],e[3]=t[1]*s[2]+t[3]*s[3],e[4]=t[0]*s[4]+t[2]*s[5]+t[4],e[5]=t[1]*s[4]+t[3]*s[5]+t[5],e;}},{key:"translate",value:function translate(e,t,s){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+s[0],e[5]=t[5]+s[1],e;}},{key:"rotate",value:function rotate(e,t,s){var r=t[0],i=t[2],a=t[4],n=t[1],o=t[3],l=t[5],h=Math.sin(s),u=Math.cos(s);return e[0]=r*u+n*h,e[1]=-r*h+n*u,e[2]=i*u+o*h,e[3]=-i*h+u*o,e[4]=u*a+h*l,e[5]=u*l-h*a,e;}},{key:"scale",value:function scale(e,t,s){var r=s[0],i=s[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e;}},{key:"invert",value:function invert(e,t){var s=t[0],r=t[2],i=t[4],a=t[1],n=t[3],o=t[5],l=s*n-a*r;return l?(l=1/l,e[0]=n*l,e[1]=-a*l,e[2]=-r*l,e[3]=s*l,e[4]=(r*o-n*i)*l,e[5]=(a*i-s*o)*l,e):null;}},{key:"mulVector",value:function mulVector(e,t,s){var r=t[0],i=t[2],a=t[4],n=t[1],o=t[3],l=t[5];return e[0]=s[0]*r+s[1]*i+a,e[1]=s[0]*n+s[1]*o+l,e;}}]);return _class116;}())(),Zr.Util=new Mr(),Zr.Util_vector=new Xr();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $r=/*#__PURE__*/function(){function $r(){_classCallCheck(this,$r);var e;this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(e=Zr.Util_vector.create(),function(t){this.transform||(this.transform=Zr.Util_matrix.create());var s=this.transform;function r(e){return e>-5e-5&&e<5e-5;}Zr.Util_vector.sub(e,t,this.position),r(e[0])&&r(e[1])||(Zr.Util_vector.normalize(e,e),s[2]=e[0]*this.scale[1],s[3]=e[1]*this.scale[1],s[0]=e[1]*this.scale[0],s[1]=-e[0]*this.scale[0],s[4]=this.position[0],s[5]=this.position[1],this.decomposeTransform());});}_createClass($r,[{key:"destroy",value:function destroy(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null;}},{key:"updateNeedTransform",value:function updateNeedTransform(){function e(e){return e>5e-5||e<-5e-5;}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1);}},{key:"updateTransform",value:function updateTransform(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||Zr.Util_matrix.create();if(Zr.Util_matrix.identity(t),this.needLocalTransform){if(s(this.scale[0])||s(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var _r14=s(e[0])||s(e[1]);_r14&&Zr.Util_matrix.translate(t,t,e),Zr.Util_matrix.scale(t,t,this.scale),_r14&&(e[0]=-e[0],e[1]=-e[1],Zr.Util_matrix.translate(t,t,e));}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var _r15=s(e[0])||s(e[1]);_r15&&Zr.Util_matrix.translate(t,t,e),Zr.Util_matrix.rotate(t,t,this.rotation[0]),_r15&&(e[0]=-e[0],e[1]=-e[1],Zr.Util_matrix.translate(t,t,e));}}else 0!==this.rotation&&Zr.Util_matrix.rotate(t,t,this.rotation);(s(this.position[0])||s(this.position[1]))&&Zr.Util_matrix.translate(t,t,this.position);}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?Zr.Util_matrix.mul(this.transform,this.parent.transform,this.transform):Zr.Util_matrix.copy(this.transform,this.parent.transform));}function s(e){return e>5e-5||e<-5e-5;}}},{key:"setTransform",value:function setTransform(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5]);}}},{key:"decomposeTransform",value:function decomposeTransform(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],s=this.position,r=this.scale,i=this.rotation;n(t-1)&&(t=Math.sqrt(t));var a=e[2]*e[2]+e[3]*e[3];n(a-1)&&(a=Math.sqrt(a)),s[0]=e[4],s[1]=e[5],r[0]=t,r[1]=a,r[2]=r[3]=0,i[0]=Math.atan2(-e[1]/a,e[0]/t),i[1]=i[2]=0;}function n(e){return e>5e-5||e<-5e-5;}}}]);return $r;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ei=/*#__PURE__*/function(_r$mixin){_inherits(ei,_r$mixin);function ei(e){var _this153;_classCallCheck(this,ei);var t;_this153=_possibleConstructorReturn(this,_getPrototypeOf(ei).call(this,e)),e=e||{},_this153.id=null,_this153.style={},_this153.highlightStyle=null,_this153.parent=null,_this153.__dirty=!0,_this153.__clipShapes=[],_this153.invisible=!1,_this153.ignore=!1,_this153.zlevel=0,_this153.draggable=!1,_this153.clickable=!1,_this153.hoverable=!0,_this153.z=0,_this153.refOriginalPosition=[0,0],_this153.refDataID=null,_this153.isHoverByRefDataID=!1,_this153.refDataHoverGroup=null,_this153.dataInfo=null,c.extend(_assertThisInitialized(_this153),e),_this153.id=_this153.id||c.createUniqueID("smShape_"),_this153.CLASS_NAME="SuperMap.LevelRenderer.Shape",_this153.getTansform=(t=[],function(e,s){var r=[e,s];return this.needTransform&&this.transform&&(Zr.Util_matrix.invert(t,this.transform),Zr.Util_matrix.mulVector(r,t,[e,s,1]),e==r[0]&&s==r[1]&&this.updateNeedTransform()),r;});return _this153;}_createClass(ei,[{key:"destroy",value:function destroy(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,_get(_getPrototypeOf(ei.prototype),"destroy",this).call(this);}},{key:"brush",value:function brush(e,t){var s=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,s),s.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",s),e.fill(),s.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",s),e.stroke()),this.setCtxGlobalAlpha(e,"reset",s);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",s),s.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",s);break;default:this.setCtxGlobalAlpha(e,"fill",s),e.fill(),this.setCtxGlobalAlpha(e,"reset",s);}this.drawText(e,s,this.style),this.afterBrush(e);}},{key:"beforeBrush",value:function beforeBrush(e,t){var s=this.style;return this.brushTypeOnly&&(s.brushType=this.brushTypeOnly),t&&(s=this.getHighlightStyle(s,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(s.strokeColor=s.strokeColor||s.color),e.save(),this.doClip(e),this.setContext(e,s),this.setTransform(e),s;}},{key:"afterBrush",value:function afterBrush(e){e.restore();}},{key:"setContext",value:function setContext(e,t){for(var s=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,i=s.length;r<i;r++){var a=t[s[r][0]],n=s[r][1];void 0!==a&&(e[n]=a);}}},{key:"doClip",value:function doClip(e){var t=Zr.Util_matrix.create();if(this.__clipShapes)for(var s=0;s<this.__clipShapes.length;s++){var r=this.__clipShapes[s];if(r.needTransform){var _s26=r.transform;Zr.Util_matrix.invert(t,_s26),e.transform(_s26[0],_s26[1],_s26[2],_s26[3],_s26[4],_s26[5]);}if(e.beginPath(),r.buildPath(e,r.style),e.clip(),r.needTransform){var _s27=t;e.transform(_s27[0],_s27[1],_s27[2],_s27[3],_s27[4],_s27[5]);}}}},{key:"getHighlightStyle",value:function getHighlightStyle(e,t,s){var r={};for(var _t36 in e){r[_t36]=e[_t36];}var i=Zr.Util_color.getHighlightColor();"stroke"!=e.brushType?(r.strokeColor=i,r.lineWidth=e.lineWidth||1,r.brushType="both"):"stroke"!=s?(r.strokeColor=i,r.lineWidth=e.lineWidth||1):r.strokeColor=t.strokeColor||Zr.Util_color.mix(e.strokeColor,Zr.Util_color.toRGB(i));for(var _e54 in t){void 0!==t[_e54]&&(r[_e54]=t[_e54]);}return r;}},{key:"getHighlightZoom",value:function getHighlightZoom(){return"text"!=this.type?6:2;}},{key:"drift",value:function drift(e,t){this.position[0]+=e,this.position[1]+=t;}},{key:"buildPath",value:function buildPath(e,t){Zr.Util_log("buildPath not implemented in "+this.type);}},{key:"getRect",value:function getRect(e){Zr.Util_log("getRect not implemented in "+this.type);}},{key:"isCover",value:function isCover(e,t){var s=this.getTansform(e,t);e=s[0],t=s[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height&&Zr.Util_area.isInside(this,this.style,e,t);}},{key:"drawText",value:function drawText(e,t,s){if(void 0!==t.text&&!1!==t.text){var r=t.textColor||t.color||t.strokeColor;e.fillStyle=r;var i,a,n,o,l=10,h=t.textPosition||this.textPosition||"top",u=[];switch(u=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var c=(s||t).__rect||this.getRect(s||t);switch(h){case"inside":n=c.x+c.width/2,o=c.y+c.height/2,i="center",a="middle","stroke"!=t.brushType&&r==t.color&&(e.fillStyle="#fff");break;case"left":n=c.x-l,o=c.y+c.height/2,i="end",a="middle";break;case"right":n=c.x+c.width+l,o=c.y+c.height/2,i="start",a="middle";break;case"top":n=c.x+c.width/2,o=c.y-l,i="center",a="bottom";break;case"bottom":n=c.x+c.width/2,o=c.y+c.height+l,i="center",a="top";}}break;case"start":case"end":var d=0,p=0,m=0,f=0;if(void 0!==t.pointList){var y=t.pointList;if(y.length<2)return;var g=y.length;switch(h){case"start":d=y[0][0]+u[0],p=y[1][0]+u[0],m=y[0][1]+u[1],f=y[1][1]+u[1];break;case"end":d=y[g-2][0]+u[0],p=y[g-1][0]+u[0],m=y[g-2][1]+u[1],f=y[g-1][1]+u[1];}}else d=t.xStart+u[0]||0,p=t.xEnd+u[0]||0,m=t.yStart+u[1]||0,f=t.yEnd+u[1]||0;switch(h){case"start":i=d<p?"end":"start",a=m<f?"bottom":"top",n=d,o=m;break;case"end":i=d<p?"start":"end",a=m<f?"top":"bottom",n=p,o=f;}l-=4,d&&p&&d!=p?n-="end"==i?l:-l:i="center",m!=f?o-="bottom"==a?l:-l:a="middle";break;case"specific":n=t.textX||0,o=t.textY||0,i="start",a="middle";}t.labelXOffset&&!isNaN(t.labelXOffset)&&(n+=t.labelXOffset),t.labelYOffset&&!isNaN(t.labelYOffset)&&(o+=t.labelYOffset),null!=n&&null!=o&&ei._fillText(e,t.text,n,o,t.textFont,t.textAlign||i,t.textBaseline||a);}}},{key:"modSelf",value:function modSelf(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null);}},{key:"isSilent",value:function isSilent(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop);}},{key:"setCtxGlobalAlpha",value:function setCtxGlobalAlpha(e,t,s){e.globalAlpha="fill"===t?void 0===s.fillOpacity?void 0===s.opacity?1:s.opacity:s.fillOpacity:"stroke"===t?void 0===s.strokeOpacity?void 0===s.opacity?1:s.opacity:s.strokeOpacity:void 0===s.opacity?1:s.opacity;}}],[{key:"_fillText",value:function _fillText(e,t,s,r,i,a,n){i&&(e.font=i),e.textAlign=a,e.textBaseline=n;var o=ei._getTextRect(t,s,r,i,a,n);t=(t+"").split("\n");var l=Zr.Util_area.getTextHeight("ZH",i);switch(n){case"top":r=o.y;break;case"bottom":r=o.y+l;break;default:r=o.y+l/2;}for(var h=0,u=t.length;h<u;h++){e.fillText(t[h],s,r),r+=l;}}},{key:"_getTextRect",value:function _getTextRect(e,t,s,r,i,a){var n=Zr.Util_area.getTextWidth(e,r),o=Zr.Util_area.getTextHeight("ZH",r);switch(e=(e+"").split("\n"),i){case"end":case"right":t-=n;break;case"center":t-=n/2;}switch(a){case"top":break;case"bottom":s-=o*e.length;break;default:s-=o*e.length/2;}return{x:t,y:s,width:n,height:o*e.length};}}]);return ei;}(r.mixin(Yr,$r));/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ti=/*#__PURE__*/function(_ei){_inherits(ti,_ei);function ti(e){var _this154;_classCallCheck(this,ti);_this154=_possibleConstructorReturn(this,_getPrototypeOf(ti).call(this,e)),_this154.type="smicpoint",_this154.refOriginalPosition&&2===_this154.refOriginalPosition.length||(_this154.refOriginalPosition=[0,0]),_this154.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint";return _this154;}_createClass(ti,[{key:"destroy",value:function destroy(){this.type=null,_get(_getPrototypeOf(ti.prototype),"destroy",this).call(this);}},{key:"buildPath",value:function buildPath(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition;e.arc(t.x+s[0],t.y+s[1],t.r,0,2*Math.PI,!0);}},{key:"getRect",value:function getRect(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,s=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+s[0]-e.r-t/2),y:Math.round(e.y+s[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect);}}]);return ti;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var si=/*#__PURE__*/function(_ei2){_inherits(si,_ei2);function si(e){var _this155;_classCallCheck(this,si);_this155=_possibleConstructorReturn(this,_getPrototypeOf(si).call(this,e)),_this155.type="smictext",_this155.refOriginalPosition&&2===_this155.refOriginalPosition.length||(_this155.refOriginalPosition=[0,0]),_this155.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText";return _this155;}_createClass(si,[{key:"destroy",value:function destroy(){this.type=null,_get(_getPrototypeOf(si.prototype),"destroy",this).call(this);}},{key:"brush",value:function brush(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition,r=this.style;if(t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";var i,a=(r.text+"").split("\n"),n=Zr.Util_area.getTextHeight("ZH",r.textFont),o=this.getRectNoRotation(r),l=r.x+s[0];i="top"==r.textBaseline?o.y:"bottom"==r.textBaseline?o.y+n:o.y+n/2;for(var h=r.x+s[0],u=r.y+s[1],c=0,d=a.length;c<d;c++){switch(r.labelRect&&(e.fillRect(o.x-2,o.y,o.width+4,o.height),e.fillStyle=r.strokeColor,e.strokeRect(o.x-2,o.y,o.width+4,o.height),e.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(h,u),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.strokeText(a[c],0,n*c,r.maxWidth):e.strokeText(a[c],0,n*c):"bottom"==r.textBaseline?r.maxWidth?e.strokeText(a[c],0,n*(c+1)-o.height,r.maxWidth):e.strokeText(a[c],0,n*(c+1)-o.height):r.maxWidth?e.strokeText(a[c],0,n*(c+1)-o.height/2-n/2,r.maxWidth):e.strokeText(a[c],0,n*(c+1)-o.height/2-n/2),e.restore()):r.maxWidth?e.strokeText(a[c],l,i,r.maxWidth):e.strokeText(a[c],l,i),this.setCtxGlobalAlpha(e,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(e.save(),e.translate(h,u),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],0,n*c,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],0,n*c,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],0,n*c),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],0,n*c),this.setCtxGlobalAlpha(e,"reset",r)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],0,n*(c+1)-o.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],0,n*(c+1)-o.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],0,n*(c+1)-o.height),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],0,n*(c+1)-o.height),this.setCtxGlobalAlpha(e,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],0,n*(c+1)-o.height/2-n/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],0,n*(c+1)-o.height/2-n/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],0,n*(c+1)-o.height/2-n/2),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],0,n*(c+1)-o.height/2-n/2),this.setCtxGlobalAlpha(e,"reset",r)),e.restore()):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],l,i,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],l,i,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(a[c],l,i),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(a[c],l,i),this.setCtxGlobalAlpha(e,"reset",r));break;default:this.setCtxGlobalAlpha(e,"fill",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(h,u),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.fillText(a[c],0,n*c,r.maxWidth):e.fillText(a[c],0,n*c):"bottom"==r.textBaseline?r.maxWidth?e.fillText(a[c],0,n*(c+1)-o.height,r.maxWidth):e.fillText(a[c],0,n*(c+1)-o.height):r.maxWidth?e.fillText(a[c],0,n*(c+1)-o.height/2-n/2,r.maxWidth):e.fillText(a[c],0,n*(c+1)-o.height/2-n/2),e.restore()):r.maxWidth?e.fillText(a[c],l,i,r.maxWidth):e.fillText(a[c],l,i),this.setCtxGlobalAlpha(e,"reset",r);}i+=n;}e.restore();}}},{key:"getRect",value:function getRect(e){if(e.__rect)return e.__rect;for(var t,s,r,i,a=this.getTextBackground(e,!0),n=0,o=a.length;n<o;n++){var l=a[n];0==n?(t=l[0],r=l[0],s=l[1],i=l[1]):(l[0]<t&&(t=l[0]),l[0]>r&&(r=l[0]),l[1]<s&&(s=l[1]),l[1]>i&&(i=l[1]));}return e.__rect={x:t,y:s,width:r-t,height:i-s},e.__rect;}},{key:"getRectNoRotation",value:function getRectNoRotation(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,s=this.refOriginalPosition,r=Zr.Util_area.getTextHeight("ZH",e.textFont),i=Zr.Util_area.getTextWidth(e.text,e.textFont),a=Zr.Util_area.getTextHeight(e.text,e.textFont),n=e.x+s[0];"end"==e.textAlign||"right"==e.textAlign?n-=i:"center"==e.textAlign&&(n-=i/2),t="top"==e.textBaseline?e.y+s[1]:"bottom"==e.textBaseline?e.y+s[1]-a:e.y+s[1]-a/2;var o,l=!1;if(e.maxWidth){var h=parseInt(e.maxWidth);h<i&&(o=i,l=!0,i=h),n=e.x+s[0],"end"==e.textAlign||"right"==e.textAlign?n-=i:"center"==e.textAlign&&(n-=i/2);}e.textFont&&e.textFont.toLowerCase().indexOf("italic")>-1&&(i+=!0===l?r/3*(i/o):r/3);return{x:n,y:t,width:i,height:a};}},{key:"getTextBackground",value:function getTextBackground(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var r=this.getRectNoRotation(e),i=e.x+s[0],a=e.y+s[1],n=[];if(e.textRotation&&0!==e.textRotation){var _t37=e.textRotation,_s28=this.getRotatedLocation(r.x,r.y,i,a,_t37),_o7=this.getRotatedLocation(r.x+r.width,r.y,i,a,_t37),_l7=this.getRotatedLocation(r.x+r.width,r.y+r.height,i,a,_t37),_h4=this.getRotatedLocation(r.x,r.y+r.height,i,a,_t37);n.push(_s28),n.push(_o7),n.push(_l7),n.push(_h4);}else{var _e55=[r.x,r.y],_t38=[r.x+r.width,r.y],_s29=[r.x+r.width,r.y+r.height],_i19=[r.x,r.y+r.height];n.push(_e55),n.push(_t38),n.push(_s29),n.push(_i19);}return e.__textBackground=n,e.__textBackground;}},{key:"getRotatedLocation",value:function getRotatedLocation(e,t,s,r,i){var a,n,o=new Array();return t=-t,r=-r,i=-i,a=(e-s)*Math.cos(i/180*Math.PI)-(t-r)*Math.sin(i/180*Math.PI)+s,n=(e-s)*Math.sin(i/180*Math.PI)+(t-r)*Math.cos(i/180*Math.PI)+r,o[0]=a,o[1]=-n,o;}}]);return si;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ri=/*#__PURE__*/function(_ei3){_inherits(ri,_ei3);function ri(e){var _this156;_classCallCheck(this,ri);_this156=_possibleConstructorReturn(this,_getPrototypeOf(ri).call(this,e)),_this156.type="smiccircle",_this156.refOriginalPosition&&2===_this156.refOriginalPosition.length||(_this156.refOriginalPosition=[0,0]),_this156.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle";return _this156;}_createClass(ri,[{key:"destroy",value:function destroy(){this.type=null,_get(_getPrototypeOf(ri.prototype),"destroy",this).call(this);}},{key:"buildPath",value:function buildPath(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition,r=t.x+s[0],i=t.y+s[1];return e.moveTo(r+t.r,i),e.arc(r,i,t.r,0,2*Math.PI,!0),!0;}},{key:"getRect",value:function getRect(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,s=this.refOriginalPosition,r=e.x+s[0],i=e.y+s[1],a=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(r-a-t/2),y:Math.round(i-a-t/2),width:2*a+t,height:2*a+t},e.__rect;}}]);return ri;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ii=/*#__PURE__*/function(_ei4){_inherits(ii,_ei4);function ii(e){var _this157;_classCallCheck(this,ii);_this157=_possibleConstructorReturn(this,_getPrototypeOf(ii).call(this,e)),_this157.type="smicpolygon",_this157.holePolygonPointLists=null,_this157.refOriginalPosition&&2===_this157.refOriginalPosition.length||(_this157.refOriginalPosition=[0,0]),_this157.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon";return _this157;}_createClass(ii,[{key:"destroy",value:function destroy(){this.type=null,this.holePolygonPointLists=null,_get(_getPrototypeOf(ii.prototype),"destroy",this).call(this);}},{key:"brush",value:function brush(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.style;t&&(s=this.getHighlightStyle(s,this.highlightStyle||{})),e.save(),this.setContext(e,s),this.setTransform(e);var r=!1;"fill"!=s.brushType&&"both"!=s.brushType&&void 0!==s.brushType||(e.beginPath(),"dashed"==s.lineType||"dotted"==s.lineType||"dot"==s.lineType||"dash"==s.lineType||"dashdot"==s.lineType||"longdash"==s.lineType||"longdashdot"==s.lineType?this.buildPath(e,{lineType:"solid",lineWidth:s.lineWidth,pointList:s.pointList}):(this.buildPath(e,s),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",s),e.fill(),this.setCtxGlobalAlpha(e,"reset",s)),s.lineWidth>0&&("stroke"==s.brushType||"both"==s.brushType)&&(r||(e.beginPath(),this.buildPath(e,s)),this.setCtxGlobalAlpha(e,"stroke",s),e.stroke(),this.setCtxGlobalAlpha(e,"reset",s)),this.drawText(e,s,this.style);var i=c.cloneObject(s);if(i.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var a=this.holePolygonPointLists,n=a.length,o=0;o<n;o++){var l=a[o];i.pointList=l,e.globalCompositeOperation="destination-out",r=!1,"fill"!=i.brushType&&"both"!=i.brushType&&void 0!==i.brushType||(e.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashdot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(e,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(e,i),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",i),e.fill(),this.setCtxGlobalAlpha(e,"reset",i)),i.lineWidth>0&&("stroke"==i.brushType||"both"==i.brushType)?(r||(e.beginPath(),this.buildPath(e,i)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",i),e.stroke(),this.setCtxGlobalAlpha(e,"reset",i)):e.globalCompositeOperation="source-over";}e.restore();}},{key:"buildPath",value:function buildPath(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition,r=t.pointList;if(!(r.length<2))if(t.smooth&&"spline"!==t.smooth){var i,a,n,o=Zr.SUtil_smoothBezier(r,t.smooth,!0,t.smoothConstraint,s);e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var l=r.length,h=0;h<l;h++){i=o[2*h],a=o[2*h+1],n=[r[(h+1)%l][0]+s[0],r[(h+1)%l][1]+s[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],n[0],n[1]);}}else if("spline"===t.smooth&&(r=Zr.SUtil_smoothSpline(r,!0,null,s)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var _i20=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=_i20;var _a9=t.lineWidth||1,_n8=_a9,_o8=_a9;"dashed"===t.lineType&&(_n8*=5,_o8*=5,t.lineCap&&"butt"!==t.lineCap&&(_n8-=_a9,_o8+=_a9)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(_n8=1,_o8+=_a9),"dot"===t.lineType&&(_o8*=4,t.lineCap&&"butt"!==t.lineCap&&(_n8=1,_o8+=_a9)),"dash"===t.lineType&&(_n8*=4,_o8*=4,t.lineCap&&"butt"!==t.lineCap&&(_n8-=_a9,_o8+=_a9)),"longdash"===t.lineType&&(_n8*=8,_o8*=4,t.lineCap&&"butt"!==t.lineCap&&(_n8-=_a9,_o8+=_a9)),e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var _t39=1;_t39<r.length;_t39++){Zr.SUtil_dashedLineTo(e,r[_t39-1][0]+s[0],r[_t39-1][1]+s[1],r[_t39][0]+s[0],r[_t39][1]+s[1],_a9,[_n8,_o8]);}Zr.SUtil_dashedLineTo(e,r[r.length-1][0]+s[0],r[r.length-1][1]+s[1],r[0][0]+s[0],r[0][1]+s[1],_a9,[_n8,_o8]);}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var _i21=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=_i21;var _a10=t.lineWidth||1,_n9=_a10,_o9=_a10,_l8=_a10,_h5=_a10;"dashdot"===t.lineType&&(_n9*=4,_o9*=4,_h5*=4,t.lineCap&&"butt"!==t.lineCap&&(_n9-=_a10,_o9+=_a10,_l8=1,_h5+=_a10)),"longdashdot"===t.lineType&&(_n9*=8,_o9*=4,_h5*=4,t.lineCap&&"butt"!==t.lineCap&&(_n9-=_a10,_o9+=_a10,_l8=1,_h5+=_a10)),e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var _t40=1;_t40<r.length;_t40++){Zr.SUtil_dashedLineTo(e,r[_t40-1][0]+s[0],r[_t40-1][1]+s[1],r[_t40][0]+s[0],r[_t40][1]+s[1],_a10,[_n9,_o9,_l8,_h5]);}Zr.SUtil_dashedLineTo(e,r[r.length-1][0]+s[0],r[r.length-1][1]+s[1],r[0][0]+s[0],r[0][1]+s[1],_a10,[_n9,_o9,_l8,_h5]);}}else{e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var _t41=1;_t41<r.length;_t41++){e.lineTo(r[_t41][0]+s[0],r[_t41][1]+s[1]);}e.lineTo(r[0][0]+s[0],r[0][1]+s[1]);}}},{key:"getRect",value:function getRect(e,t){var s;if(t?s=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),s=this.refOriginalPosition),e.__rect)return e.__rect;for(var r,i=Number.MAX_VALUE,a=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,l=e.pointList,h=0,u=l.length;h<u;h++){l[h][0]+s[0]<i&&(i=l[h][0]+s[0]),l[h][0]+s[0]>a&&(a=l[h][0]+s[0]),l[h][1]+s[1]<n&&(n=l[h][1]+s[1]),l[h][1]+s[1]>o&&(o=l[h][1]+s[1]);}return r="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(i-r/2),y:Math.round(n-r/2),width:a-i+r,height:o-n+r},e.__rect;}}]);return ii;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ai=/*#__PURE__*/function(_ei5){_inherits(ai,_ei5);function ai(e){var _this158;_classCallCheck(this,ai);_this158=_possibleConstructorReturn(this,_getPrototypeOf(ai).call(this,e)),_this158.brushTypeOnly="stroke",_this158.textPosition="end",_this158.type="smicbroken-line",_this158.refOriginalPosition&&2===_this158.refOriginalPosition.length||(_this158.refOriginalPosition=[0,0]),_this158.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine";return _this158;}_createClass(ai,[{key:"destroy",value:function destroy(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,_get(_getPrototypeOf(ai.prototype),"destroy",this).call(this);}},{key:"buildPath",value:function buildPath(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition,r=t.pointList;if(!(r.length<2)){var i=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var a,n,o,l=Zr.SUtil_smoothBezier(r,t.smooth,!1,t.smoothConstraint,s);e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var _t42=0;_t42<i-1;_t42++){a=l[2*_t42],n=l[2*_t42+1],o=[r[_t42+1][0]+s[0],r[_t42+1][1]+s[1]],e.bezierCurveTo(a[0],a[1],n[0],n[1],o[0],o[1]);}}else if("spline"===t.smooth&&(i=(r=Zr.SUtil_smoothSpline(r,null,null,s)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var _a11=t.lineWidth||1,_n10=_a11,_o10=_a11;"dashed"===t.lineType&&(_n10*=5,_o10*=5,t.lineCap&&"butt"!==t.lineCap&&(_n10-=_a11,_o10+=_a11)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(_n10=1,_o10+=_a11),"dot"===t.lineType&&(_o10*=4,t.lineCap&&"butt"!==t.lineCap&&(_n10=1,_o10+=_a11)),"dash"===t.lineType&&(_n10*=4,_o10*=4,t.lineCap&&"butt"!==t.lineCap&&(_n10-=_a11,_o10+=_a11)),"longdash"===t.lineType&&(_n10*=8,_o10*=4,t.lineCap&&"butt"!==t.lineCap&&(_n10-=_a11,_o10+=_a11)),e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var h=1;h<i;h++){Zr.SUtil_dashedLineTo(e,r[h-1][0]+s[0],r[h-1][1]+s[1],r[h][0]+s[0],r[h][1]+s[1],_a11,[_n10,_o10]);}}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var _a12=t.lineWidth||1,_n11=_a12,_o11=_a12,_l9=_a12,_h6=_a12;"dashdot"===t.lineType&&(_n11*=4,_o11*=4,_h6*=4,t.lineCap&&"butt"!==t.lineCap&&(_n11-=_a12,_o11+=_a12,_l9=1,_h6+=_a12)),"longdashdot"===t.lineType&&(_n11*=8,_o11*=4,_h6*=4,t.lineCap&&"butt"!==t.lineCap&&(_n11-=_a12,_o11+=_a12,_l9=1,_h6+=_a12)),_a12=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var _t43=1;_t43<i;_t43++){Zr.SUtil_dashedLineTo(e,r[_t43-1][0]+s[0],r[_t43-1][1]+s[1],r[_t43][0]+s[0],r[_t43][1]+s[1],_a12,[_n11,_o11,_l9,_h6]);}}}else{e.moveTo(r[0][0]+s[0],r[0][1]+s[1]);for(var _t44=1;_t44<i;_t44++){e.lineTo(r[_t44][0]+s[0],r[_t44][1]+s[1]);}}}}},{key:"getRect",value:function getRect(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return ii.prototype.getRect.apply(this,[e,t]);}}]);return ai;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ni=/*#__PURE__*/function(_ei6){_inherits(ni,_ei6);function ni(e){var _this159;_classCallCheck(this,ni);_this159=_possibleConstructorReturn(this,_getPrototypeOf(ni).call(this,e)),_this159.type="smicimage",_this159._imageCache={},_this159.refOriginalPosition&&2===_this159.refOriginalPosition.length||(_this159.refOriginalPosition=[0,0]),_this159.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage";return _this159;}_createClass(ni,[{key:"destroy",value:function destroy(){this.type=null,this._imageCache=null,_get(_getPrototypeOf(ni.prototype),"destroy",this).call(this);}},{key:"brush",value:function brush(e,t,s){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=this.style||{};t&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,n=this;if("string"==typeof a){var o=a;this._imageCache[o]?a=this._imageCache[o]:((a=new Image()).onload=function(){a.onload=null,clearTimeout(ni._refreshTimeout),ni._needsRefresh.push(n),ni._refreshTimeout=setTimeout(function(){s&&s(ni._needsRefresh),ni._needsRefresh=[];},10);},a.src=o,this._imageCache[o]=a);}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return;}else if(!a.complete)return;var l=i.width||a.width,h=i.height||a.height,u=i.x+r[0],c=i.y+r[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,i),this.setTransform(e),i.sWidth&&i.sHeight){var _t45=i.sx+r[0]||0,_s30=i.sy+r[1]||0;e.drawImage(a,_t45,_s30,i.sWidth,i.sHeight,u,c,l,h);}else if(i.sx&&i.sy){var _t46=i.sx+r[0],_s31=i.sy+r[1];var d=l-_t46,p=h-_s31;e.drawImage(a,_t46,_s31,d,p,u,c,l,h);}else e.drawImage(a,u,c,l,h);i.width||(i.width=l),i.height||(i.height=h),this.style.width||(this.style.width=l),this.style.height||(this.style.height=h),this.drawText(e,i,this.style),e.restore();}}},{key:"getRect",value:function getRect(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height};}},{key:"clearCache",value:function clearCache(){this._imageCache={};}}]);return ni;}(ei);ni._needsRefresh=[],ni._refreshTimeout=null;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oi=/*#__PURE__*/function(_ei7){_inherits(oi,_ei7);function oi(e){var _this160;_classCallCheck(this,oi);_this160=_possibleConstructorReturn(this,_getPrototypeOf(oi).call(this,e)),_this160.type="smicrectangle",_this160.refOriginalPosition&&2===_this160.refOriginalPosition.length||(_this160.refOriginalPosition=[0,0]),_this160.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle";return _this160;}_createClass(oi,[{key:"destroy",value:function destroy(){this.type=null,_get(_getPrototypeOf(oi.prototype),"destroy",this).call(this);}},{key:"_buildRadiusPath",value:function _buildRadiusPath(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s,r,i,a,n,o=this.refOriginalPosition,l=t.x+o[0],h=t.y+o[1],u=t.width,c=t.height,d=t.radius;"number"==typeof d?s=r=i=a=d:d instanceof Array?1===d.length?s=r=i=a=d[0]:2===d.length?(s=i=d[0],r=a=d[1]):3===d.length?(s=d[0],r=a=d[1],i=d[2]):(s=d[0],r=d[1],i=d[2],a=d[3]):s=r=i=a=0,s+r>u&&(s*=u/(n=s+r),r*=u/n),i+a>u&&(i*=u/(n=i+a),a*=u/n),r+i>c&&(r*=c/(n=r+i),i*=c/n),s+a>c&&(s*=c/(n=s+a),a*=c/n),e.moveTo(l+s,h),e.lineTo(l+u-r,h),0!==r&&e.quadraticCurveTo(l+u,h,l+u,h+r),e.lineTo(l+u,h+c-i),0!==i&&e.quadraticCurveTo(l+u,h+c,l+u-i,h+c),e.lineTo(l+a,h+c),0!==a&&e.quadraticCurveTo(l,h+c,l,h+c-a),e.lineTo(l,h+s),0!==s&&e.quadraticCurveTo(l,h,l+s,h);}},{key:"buildPath",value:function buildPath(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+s[0],t.y+s[1]),e.lineTo(t.x+s[0]+t.width,t.y+s[1]),e.lineTo(t.x+s[0]+t.width,t.y+s[1]+t.height),e.lineTo(t.x+s[0],t.y+s[1]+t.height),e.lineTo(t.x+s[0],t.y+s[1])),e.closePath();}},{key:"getRect",value:function getRect(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,s=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+s[0]-t/2),y:Math.round(e.y+s[1]-t/2),width:e.width+t,height:e.height+t},e.__rect);}}]);return oi;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var li=/*#__PURE__*/function(_ei8){_inherits(li,_ei8);function li(e){var _this161;_classCallCheck(this,li);_this161=_possibleConstructorReturn(this,_getPrototypeOf(li).call(this,e)),_this161.type="smicsector",_this161.refOriginalPosition&&2===_this161.refOriginalPosition.length||(_this161.refOriginalPosition=[0,0]),_this161.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector";return _this161;}_createClass(li,[{key:"destroy",value:function destroy(){this.type=null,_get(_getPrototypeOf(li.prototype),"destroy",this).call(this);}},{key:"buildPath",value:function buildPath(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var s=this.refOriginalPosition,r=t.x+s[0],i=t.y+s[1],a=t.r0||0,n=t.r,o=t.startAngle,l=t.endAngle,h=t.clockWise||!1;o=Zr.Util_math.degreeToRadian(o),l=Zr.Util_math.degreeToRadian(l),h||(o=-o,l=-l);var u=Zr.Util_math.cos(o),c=Zr.Util_math.sin(o);e.moveTo(u*a+r,c*a+i),e.lineTo(u*n+r,c*n+i),e.arc(r,i,n,o,l,!h),e.lineTo(Zr.Util_math.cos(l)*a+r,Zr.Util_math.sin(l)*a+i),0!==a&&e.arc(r,i,a,l,o,h),e.closePath();}},{key:"getRect",value:function getRect(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,s=Zr.Util_vector.create(),r=Zr.Util_vector.create(),i=Zr.Util_vector.create(),a=Zr.Util_vector.create(),n=e.x+t[0],o=e.y+t[1],l=e.r0||0,h=e.r,u=Zr.Util_math.degreeToRadian(e.startAngle),c=Zr.Util_math.degreeToRadian(e.endAngle),d=e.clockWise;return d||(u=-u,c=-c),l>1?Zr.Util_computeBoundingBox.arc(n,o,l,u,c,!d,s,i):(s[0]=i[0]=n,s[1]=i[1]=o),Zr.Util_computeBoundingBox.arc(n,o,h,u,c,!d,r,a),Zr.Util_vector.min(s,s,r),Zr.Util_vector.max(i,i,a),e.__rect={x:s[0],y:s[1],width:i[0]-s[0],height:i[1]-s[1]},e.__rect;}}]);return li;}(ei);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hi=/*#__PURE__*/function(){function hi(e){_classCallCheck(this,hi);this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory";}_createClass(hi,[{key:"destroy",value:function destroy(){this.shapeParameters=null;}},{key:"createShape",value:function createShape(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var t=this.shapeParameters;if(t instanceof Ur){var _e56=new Object();_e56.x=t.x,_e56.y=t.y,_e56.r=t.r,_e56=c.copyAttributesWithClip(_e56,t.style,["x","y"]);var _s32=new ti();return _s32.style=hi.transformStyle(_e56),_s32.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s32,t,["x","y","style","highlightStyle"]),_s32;}if(t instanceof Hr){if(!t.pointList)return null;var _e57=new Object();_e57.pointList=t.pointList,_e57=c.copyAttributesWithClip(_e57,t.style,["pointList"]);var _s33=new ai();return _s33.style=hi.transformStyle(_e57),_s33.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s33,t,["pointList","style","highlightStyle"]),_s33;}if(t instanceof jr){if(!t.pointList)return null;var _e58=new Object();_e58.pointList=t.pointList,_e58=c.copyAttributesWithClip(_e58,t.style,["pointList"]);var _s34=new ii();return _s34.style=hi.transformStyle(_e58),_s34.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s34,t,["pointList","style","highlightStyle"]),_s34;}if(t instanceof Jr){if(!t.x&&!t.y&!t.width&!t.height)return null;var _e59=new Object();_e59.x=t.x,_e59.y=t.y,_e59.width=t.width,_e59.height=t.height,_e59=c.copyAttributesWithClip(_e59,t.style,["x","y","width","height"]);var _s35=new oi();return _s35.style=hi.transformStyle(_e59),_s35.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s35,t,["x","y","width","height","style","highlightStyle"]),_s35;}if(t instanceof Vr){var _e60=new Object();_e60.x=t.x,_e60.y=t.y,_e60.r=t.r,_e60.startAngle=t.startAngle,_e60.endAngle=t.endAngle,t.r0&&(_e60.r0=t.r0),t.clockWise&&(_e60.clockWise=t.clockWise),_e60=c.copyAttributesWithClip(_e60,t.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var _s36=new li();return _s36.style=hi.transformStyle(_e60),_s36.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s36,t,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),_s36;}if(t instanceof qr){var _e61=new Object();_e61.x=t.x,_e61.y=t.y,_e61.text=t.text,_e61=c.copyAttributesWithClip(_e61,t.style,["x","y","text"]);var _s37=new si();return _s37.style=hi.transformStyle(_e61),_s37.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s37,t,["x","y","text","style","highlightStyle"]),_s37;}if(t instanceof Wr){var _e62=new Object();_e62.x=t.x,_e62.y=t.y,t.image&&(_e62.image=t.image),t.width&&(_e62.width=t.width),t.height&&(_e62.height=t.height),t.sx&&(_e62.sx=t.sx),t.sy&&(_e62.sy=t.sy),t.sWidth&&(_e62.sWidth=t.sWidth),t.sHeight&&(_e62.sHeight=t.sHeight),_e62=c.copyAttributesWithClip(_e62,t.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var _s38=new ni();return _s38.style=hi.transformStyle(_e62),_s38.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s38,t,["x","y","image","width","height","style","highlightStyle"]),_s38;}if(t instanceof zr){var _e63=new Object();_e63.x=t.x,_e63.r=t.r,_e63.y=t.y,_e63=c.copyAttributesWithClip(_e63,t.style,["x","y","r"]);var _s39=new ri();return _s39.style=hi.transformStyle(_e63),_s39.highlightStyle=hi.transformStyle(t.highlightStyle),c.copyAttributesWithClip(_s39,t,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),_s39;}return null;}}],[{key:"transformStyle",value:function transformStyle(e){var t={},s=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var i in e){switch(i){case"fill":r[0]=e[i];break;case"fillColor":t.color=e[i];break;case"stroke":r[1]=e[i];break;case"strokeWidth":t.lineWidth=e[i];break;case"strokeLinecap":t.lineCap=e[i];break;case"strokeLineJoin":t.lineJoin=e[i];break;case"strokeDashstyle":t.lineType=e[i];break;case"pointRadius":t.r=e[i];break;case"label":t.text=e[i];break;case"labelRect":t.labelRect=e[i];break;case"fontColor":t.textColor=e[i];break;case"fontStyle":s[0]=e[i];break;case"fontVariant":s[1]=e[i];break;case"fontWeight":s[2]=e[i];break;case"fontSize":var a="";e[i]&&e[i].toString().indexOf("px")<0&&(a="px"),s[3]=e[i]+a;break;case"fontFamily":s[4]=e[i];break;case"fontOpacity":t.opacity=e[i];break;case"labelPosition":t.textPosition=e[i];break;case"labelAlign":t.textAlign=e[i];break;case"labelBaseline":t.textBaseline=e[i];break;case"labelRotation":t.textRotation=e[i];break;default:t[i]=e[i];}}return t.textFont=s.join(" "),!0===r[0]&&!1===r[1]?t.brushType="fill":!1===r[0]&&!0===r[1]?t.brushType="stroke":!0===r[0]&&!0===r[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t;}},{key:"Background",value:function Background(e,t,s){var r=s||{},i=new Jr(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return i.style={fillColor:"#f3f3f3"},r.backgroundStyle&&c.copyAttributesWithClip(i.style,r.backgroundStyle),r.backgroundRadius&&(i.style.radius=r.backgroundRadius),i.clickable=!1,i.hoverable=!1,e.createShape(i);}},{key:"GraphAxis",value:function GraphAxis(e,t,s,r){var i=t,a=s||{},n=[],o=[],l=!!a.useXReferenceLine&&a.useXReferenceLine,h=a.axisYTick&&!isNaN(a.axisYTick)?a.axisYTick:0,u=[],d=[];if(0==h){if(d.push([i[0],i[3]-5]),d.push([i[0],i[1]]),a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var _e64=parseInt(a.axis3DParameter),_t47=[i[0]-_e64,i[1]+_e64];a.axisUseArrow?(u.push([_t47[0]+1.5,_t47[1]-7.5]),u.push([_t47[0]-1,_t47[1]+1]),u.push([_t47[0]+7.5,_t47[1]-1.5]),d.push([_t47[0],_t47[1]])):d.push([_t47[0],_t47[1]]),d.push([i[0],i[1]]);}d.push([i[2]+5,i[1]]);}else{var p=Math.abs(i[1]-i[3])/h,m=i[3];d.push([i[0],m-5]);for(var f=0;f<h;f++){if(d.push([i[0],m]),d.push([i[0]-5,m]),d.push([i[0],m]),l){var y=new Hr([[i[0],m],[i[2],m]]);y.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},y.clickable=!1,y.hoverable=!1,a.xReferenceLineStyle&&c.copyAttributesWithClip(y.style,a.xReferenceLineStyle),n.push(e.createShape(y));}m+=p;}if(d.push([i[0],i[1]]),a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var _e65=parseInt(a.axis3DParameter),_t48=[i[0]-_e65,i[1]+_e65];a.axisUseArrow?(u.push([_t48[0]+1.5,_t48[1]-7.5]),u.push([_t48[0]-1,_t48[1]+1]),u.push([_t48[0]+7.5,_t48[1]-1.5]),d.push([_t48[0],_t48[1]])):d.push([_t48[0],_t48[1]]),d.push([i[0],i[1]]);}d.push([i[2]+5,i[1]]);}if(a.axisUseArrow){var g=[[i[2]+5,i[1]+4],[i[2]+13,i[1]],[i[2]+5,i[1]-4]],v=[[i[0]-4,i[3]-5],[i[0],i[3]-13],[i[0]+4,i[3]-5]],S=new jr(g);S.style={fillColor:"#008acd"},c.copyAttributesWithClip(S.style,a.axisStyle),o.push(e.createShape(S));var b=new jr(v);if(b.style={fillColor:"#008acd"},c.copyAttributesWithClip(b.style,a.axisStyle),o.push(e.createShape(b)),a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var x=new jr(u);x.style={fillColor:"#008acd"},c.copyAttributesWithClip(x.style,a.axisStyle),o.push(e.createShape(x));}}var C=new Hr(d);C.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},a.axisStyle&&c.copyAttributesWithClip(C.style,a.axisStyle),C.clickable=!1,C.hoverable=!1;var _=[e.createShape(C)],T=[];if(a.axisYLabels&&a.axisYLabels.length&&a.axisYLabels.length>0){var E=a.axisYLabels;var _t49=E.length;var A=[0,0];if(a.axisYLabelsOffset&&a.axisYLabelsOffset.length&&(A=a.axisYLabelsOffset),1==_t49){var _t50=new qr(i[0]-5+A[0],i[3]+A[1],E[0]);_t50.style={labelAlign:"right"},a.axisYLabelsStyle&&c.copyAttributesWithClip(_t50.style,a.axisYLabelsStyle),_t50.clickable=!1,_t50.hoverable=!1,T.push(e.createShape(_t50));}else for(var w=i[3],N=Math.abs(i[1]-i[3])/(_t49-1),P=0;P<_t49;P++){var _t51=new qr(i[0]-5+A[0],w+A[1],E[P]);_t51.style={labelAlign:"right"},a.axisYLabelsStyle&&c.copyAttributesWithClip(_t51.style,a.axisYLabelsStyle),_t51.clickable=!1,_t51.hoverable=!1,T.push(e.createShape(_t51)),w+=N;}}var O=[];if(a.axisXLabels&&a.axisXLabels.length&&a.axisXLabels.length>0){var _t52=a.axisXLabels,_s40=_t52.length,_n12=[0,0];if(a.axisXLabelsOffset&&a.axisXLabelsOffset.length&&(_n12=a.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==_s40){var _o12=r.xPositions;for(var _r16=0;_r16<_s40;_r16++){var _s41=new qr(_o12[_r16]+_n12[0],i[1]+_n12[1],_t52[_r16]);_s41.style={labelAlign:"center",labelBaseline:"top"},a.axisXLabelsStyle&&c.copyAttributesWithClip(_s41.style,a.axisXLabelsStyle),_s41.clickable=!1,_s41.hoverable=!1,O.push(e.createShape(_s41));}}else if(1==_s40){var _s42=new qr(i[0]-5+_n12[0],i[1]+_n12[0],_t52[0]);_s42.style={labelAlign:"center",labelBaseline:"top"},a.axisXLabelsStyle&&c.copyAttributesWithClip(_s42.style,a.axisXLabelsStyle),_s42.clickable=!1,_s42.hoverable=!1,O.push(e.createShape(_s42));}else{var _r17=i[0],_o13=Math.abs(i[2]-i[0])/(_s40-1);for(var _l10=0;_l10<_s40;_l10++){var _s43=new qr(_r17+_n12[0],i[1]+_n12[1],_t52[_l10]);_s43.style={labelAlign:"center",labelBaseline:"top"},a.axisXLabelsStyle&&c.copyAttributesWithClip(_s43.style,a.axisXLabelsStyle),_s43.clickable=!1,_s43.hoverable=!1,O.push(e.createShape(_s43)),_r17+=_o13;}}}return n.concat(_).concat(T).concat(O).concat(o);}},{key:"ShapeStyleTool",value:function ShapeStyleTool(e,t,s,r,i,a){var n=e||{};if(t&&c.copyAttributesWithClip(n,t),s&&s.length&&void 0!==i&&!isNaN(i)&&i>=0&&s[i]&&c.copyAttributesWithClip(n,s[i]),r&&r.length&&void 0!==a)for(var o=r,l=o.length,h=parseFloat(a),u=0;u<l;u++){if(o[u].start<=h&&h<o[u].end){c.copyAttributesWithClip(n,o[u].style);break;}}return n;}}]);return hi;}();r.Feature=r.Feature||{},r.Feature.ShapeFactory=hi;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ui=/*#__PURE__*/function(){function ui(e,t){_classCallCheck(this,ui);e&&t&&t.map&&t.renderer&&(this.id=c.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=t,this.CLASS_NAME="SuperMap.Feature.Theme");}_createClass(ui,[{key:"destroy",value:function destroy(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null;}},{key:"getLocalXY",value:function getLocalXY(e){var t=this.layer.map.getResolution(),s=this.layer.map.getExtent();if(e instanceof Le||e instanceof Ie){return[e.x/t+-s.left/t,s.top/t-e.y/t];}if(e instanceof Ee){return[e.lon/t+-s.left/t,s.top/t-e.lat/t];}return null;}}]);return ui;}();r.Feature=r.Feature||{},r.Feature.Theme=ui;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ci=/*#__PURE__*/function(_ui){_inherits(ci,_ui);function ci(e,t,s,r,i,a){var _this162;_classCallCheck(this,ci);_this162=_possibleConstructorReturn(this,_getPrototypeOf(ci).call(this,e,t,s,r,i,a)),_this162.shapeFactory=new hi(),_this162.shapeParameters=null,_this162.RelativeCoordinate=!1,_this162.setting=null,_this162.origonPoint=null,_this162.chartBox=null,_this162.chartBounds=null,_this162.width=null,_this162.height=null,_this162.XOffset=0,_this162.YOffset=0,_this162.DVBParameter=null,_this162.dataViewBox=null,_this162.DVBCodomain=null,_this162.DVBCenterPoint=null,_this162.DVBUnitValue=null,_this162.DVBOrigonPoint=null,_this162.DVBWidth=null,_this162.DVBHeight=null,_this162.origonPointOffset=null,_this162.fields=s||[],_this162.dataValues=null,_this162.lonlat=i||_this162.data.geometry.getBounds().getCenterLonLat(),r&&r.width&&r.height&&r.codomain&&(_this162.setting=r),_this162.CLASS_NAME="SuperMap.Feature.Theme.Graph";return _this162;}_createClass(ci,[{key:"destroy",value:function destroy(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,_get(_getPrototypeOf(ci.prototype),"destroy",this).call(this);}},{key:"initBaseParameter",value:function initBaseParameter(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,s=ui.getDataValues(this.data,this.fields,t);this.dataValues=s||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,i=this.height,a=this.location;this.origonPoint=[a[0]-r/2,a[1]-i/2];var n=this.origonPoint;this.chartBox=[n[0],n[1]+i,n[0]+r,n[1]];var o=this.chartBox,l=this.DVBParameter;this.dataViewBox=[o[0]+l[0],o[1]-l[1],o[2]-l[2],o[3]+l[3]];var h=this.dataViewBox;return!(h[0]>=h[2]||h[1]<=h[3])&&(this.DVBOrigonPoint=[h[0],h[3]],this.DVBWidth=Math.abs(h[2]-h[0]),this.DVBHeight=Math.abs(h[1]-h[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-n[0],this.DVBOrigonPoint[1]-n[1]],!0);}},{key:"resetLocation",value:function resetLocation(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var s=this.width,r=this.height,i=this.location;return this.chartBounds=new Ae(i[0]-s/2,i[1]+r/2,i[0]+s/2,i[1]-r/2),this.resetLinearGradient(),i;}},{key:"resetLinearGradient",value:function resetLinearGradient(){}},{key:"shapesConvertToRelativeCoordinate",value:function shapesConvertToRelativeCoordinate(){for(var e=this.shapes,t=this.location,s=0,r=e.length;s<r;s++){e[s].refOriginalPosition=t;var i=e[s].style;for(var a in i){switch(a){case"pointList":for(var n=i[a],o=0,l=n.length;o<l;o++){n[o][0]-=t[0],n[o][1]-=t[1];}break;case"x":i[a]-=t[0];break;case"y":i[a]-=t[1];}}}this.RelativeCoordinate=!0;}},{key:"assembleShapes",value:function assembleShapes(){}},{key:"getLocalXY",value:function getLocalXY(e){return this.layer.getLocalXY(e);}}]);return ci;}(ui);ui.getDataValues=function(e,t,s){if(!e.attributes)return!1;for(var r=[],i=e.attributes,a=0;a<t.length;a++){for(var n in i){if(n===t[a])try{!isNaN(s)&&s>=0?r.push(parseFloat(i[n].toString()).toFixed(s)):r.push(parseFloat(i[n].toString()));}catch(e){throw new Error("not a number");}}}return r.length===t.length&&r;},r.Feature.Theme.Graph=ci;r.Feature.Theme.Bar=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ci){_inherits(_class117,_ci);function _class117(e,t,s,r,i){var _this163;_classCallCheck(this,_class117);_this163=_possibleConstructorReturn(this,_getPrototypeOf(_class117).call(this,e,t,s,r,i)),_this163.CLASS_NAME="SuperMap.Feature.Theme.Bar";return _this163;}_createClass(_class117,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class117.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var s=this.DVBCodomain;this.DVBUnitValue=(s[1]-s[0])/this.DVBHeight;var r=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var _e66=0,_t53=i.length;_e66<_t53;_e66++){if(i[_e66]<s[0]||i[_e66]>s[1])return;}var a=this.calculateXShapeInfo();if(a){var n=a.xPositions,o=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(hi.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(hi.GraphAxis(this.shapeFactory,r,t,a)));for(var l=0;l<i.length;l++){var h=r[1]-(i[l]-s[0])/this.DVBUnitValue,u=[[n[l]-o/2,r[1]-1],[n[l]+o/2,r[1]-1],[n[l]+o/2,h],[n[l]-o/2,h]],d=new jr(u);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var p=t.barShadowStyle;p.shadowBlur&&(e.shadowBlur=p.shadowBlur),p.shadowColor&&(e.shadowColor=p.shadowColor),p.shadowOffsetX&&(e.shadowOffsetX=p.shadowOffsetX),p.shadowOffsetY&&(e.shadowOffsetY=p.shadowOffsetY);}d.style={},c.copyAttributesWithClip(d.style,e);}d.refDataID=this.data.id,d.dataInfo={field:this.fields[l],value:i[l]},void 0!==t.barHoverAble&&(d.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(d.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(d));}this.shapesConvertToRelativeCoordinate();}}}}},{key:"calculateXShapeInfo",value:function calculateXShapeInfo(){var e,t=this.dataViewBox,s=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],a=0,n=this.DVBWidth;if(s.xShapeBlank&&s.xShapeBlank.length&&3==s.xShapeBlank.length){var o=n-((e=s.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(o<=r)return null;a=o/r;}else e=[a=n/(2*r+1),a,a];for(var l=0,h=0;h<r;h++){0==h?l=e[0]+a/2:l+=a+e[1],i.push(t[0]+l);}return{xPositions:i,width:a};}},{key:"resetLinearGradient",value:function resetLinearGradient(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,s=-1,r=0;r<e;r++){var i=this.shapes[r];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var a=i.style,n=this.location[0]+a.pointList[0][0],o=this.location[0]+a.pointList[1][0];++s>=t.length&&(s%=t.length);var l=t[s][0],h=t[s][1],u=new Ir().getLinearGradient(n,0,o,0,[[0,l],[1,h]]);i.style.color=u;}}}}]);return _class117;}(ci);r.Feature.Theme.Bar3D=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ci2){_inherits(_class118,_ci2);function _class118(e,t,s,r,i){var _this164;_classCallCheck(this,_class118);_this164=_possibleConstructorReturn(this,_getPrototypeOf(_class118).call(this,e,t,s,r,i)),_this164.CLASS_NAME="SuperMap.Feature.Theme.Bar3D";return _this164;}_createClass(_class118,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class118.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var s=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var _e67=0,_s44=r.length;_e67<_s44;_e67++){if(r[_e67]<t[0]||r[_e67]>t[1])return;}var i=this.calculateXShapeInfo();if(i){var a=i.xPositions,n=i.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(hi.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(hi.GraphAxis(this.shapeFactory,s,e,i)));var o=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10;for(var _i22=0;_i22<r.length;_i22++){var l=s[1]-(r[_i22]-t[0])/this.DVBUnitValue,h=a[_i22]-n/2,u=a[_i22]+n/2,d=[[h,l],[u,l],[u-o,l+o],[h-o,l+o]],p=[[u,l],[u-o,l+o],[u-o,s[1]+o],[u,s[1]]],m=[[h-o,s[1]+o],[u-o,s[1]+o],[u-o,l+o],[h-o,l+o]];o<=0&&(m=[[h,s[1]],[u,s[1]],[u,l],[h,l]]);var f=new jr(d),y=new jr(p),g=new jr(m);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,g.style=hi.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,_i22,r[_i22]),y.style=hi.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,_i22,r[_i22]),f.style=hi.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,_i22,r[_i22]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,g.highlightStyle=hi.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),y.highlightStyle=hi.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),f.highlightStyle=hi.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),f.refDataID=y.refDataID=g.refDataID=this.data.id,f.isHoverByRefDataID=y.isHoverByRefDataID=g.isHoverByRefDataID=!0,f.refDataHoverGroup=y.refDataHoverGroup=g.refDataHoverGroup=c.createUniqueID("lr_shg"),f.dataInfo=y.dataInfo=g.dataInfo={field:this.fields[_i22],value:r[_i22]},void 0!==e.barHoverAble&&(f.hoverable=y.hoverable=g.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(f.clickable=y.clickable=g.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(y)),this.shapes.push(this.shapeFactory.createShape(f)),this.shapes.push(this.shapeFactory.createShape(g));}this.shapesConvertToRelativeCoordinate();}}}}},{key:"calculateXShapeInfo",value:function calculateXShapeInfo(){var e,t=this.dataViewBox,s=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],a=0,n=this.DVBWidth;if(s.xShapeBlank&&s.xShapeBlank.length&&3==s.xShapeBlank.length){var o=n-((e=s.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(o<=r)return null;a=o/r;}else e=[a=n/(2*r+1),a,a];for(var l=0,h=0;h<r;h++){0==h?l=e[0]+a/2:l+=a+e[1],i.push(t[0]+l);}return{xPositions:i,width:a};}}]);return _class118;}(ci);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var di=/*#__PURE__*/function(_ci3){_inherits(di,_ci3);function di(e,t,s,r,i,a){var _this165;_classCallCheck(this,di);_this165=_possibleConstructorReturn(this,_getPrototypeOf(di).call(this,e,t,s,r,i,a)),_this165.setting=null,r&&r.codomain&&(_this165.setting=r,_this165.DVBCodomain=_this165.setting.codomain),_this165.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol";return _this165;}_createClass(di,[{key:"destroy",value:function destroy(){this.setting=null,_get(_getPrototypeOf(di.prototype),"destroy",this).call(this);}},{key:"initBaseParameter",value:function initBaseParameter(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,s=this.height,r=this.location;this.origonPoint=[r[0]-t/2,r[1]-s/2];var i=this.origonPoint;this.chartBox=[i[0],i[1]+s,i[0]+t,i[1]];var a=this.chartBox,n=this.DVBParameter;this.dataViewBox=[a[0]+n[0],a[1]-n[1],a[2]-n[2],a[3]+n[3]];var o=this.dataViewBox;return!(o[0]>=o[2]||o[1]<=o[3])&&(this.DVBOrigonPoint=[o[0],o[3]],this.DVBWidth=Math.abs(o[2]-o[0]),this.DVBHeight=Math.abs(o[1]-o[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-i[0],this.DVBOrigonPoint[1]-i[1]],!0);}}]);return di;}(ci);r.Feature.Theme.RankSymbol=di;r.Feature.Theme.Circle=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_di){_inherits(_class119,_di);function _class119(e,t,s,r,i){var _this166;_classCallCheck(this,_class119);_this166=_possibleConstructorReturn(this,_getPrototypeOf(_class119).call(this,e,t,s,r,i)),_this166.CLASS_NAME="SuperMap.Feature.Theme.Circle";return _this166;}_createClass(_class119,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class119.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,s=ui.getDataValues(this.data,this.fields,t);this.dataValues=s||[];var r=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var i=this.DVBCodomain;i&&i[1]-i[0]>0?this.DVBUnitValue=e.maxR/(i[1]-i[0]):this.DVBUnitValue=e.maxR;var a=this.DVBUnitValue,n=r[0]*a+e.minR;if(this.width=2*n,this.height=2*n,this.initBaseParameter()&&(!i||!(r[0]<i[0]||r[0]>i[1]))){var o=this.DVBCenterPoint,l=new zr(o[0],o[1],n);l.style=hi.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=hi.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:n,value:r[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate();}}}]);return _class119;}(di);r.Feature.Theme.Line=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ci4){_inherits(_class120,_ci4);function _class120(e,t,s,r,i,a){var _this167;_classCallCheck(this,_class120);_this167=_possibleConstructorReturn(this,_getPrototypeOf(_class120).call(this,e,t,s,r,i,a)),_this167.CLASS_NAME="SuperMap.Feature.Theme.Line";return _this167;}_createClass(_class120,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class120.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,s=this.DVBCodomain;this.DVBUnitValue=(s[1]-s[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var a=this.calculateXShapeInfo();if(a){var n,o,l=a.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(hi.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(hi.GraphAxis(this.shapeFactory,t,e,a));for(var h=[],u=[],c=0,d=i.length;c<d;c++){if(i[c]<s[0]||i[c]>s[1])return null;n=l[c],o=t[1]-(i[c]-s[0])/r;var p=new Ur(n,o);p.style=hi.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,c,i[c]),p.highlightStyle=hi.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:i[c]},u.push(this.shapeFactory.createShape(p));var m=[n,o];h.push(m);}var f=new Hr(h);f.style=hi.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),f.clickable=!1,f.hoverable=!1;var y=this.shapeFactory.createShape(f);this.shapes.push(y),this.shapes=this.shapes.concat(u),this.shapesConvertToRelativeCoordinate();}}}}},{key:"calculateXShapeInfo",value:function calculateXShapeInfo(){var e,t=this.dataViewBox,s=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],a=this.DVBWidth,n=0;if(s.xShapeBlank&&s.xShapeBlank.length&&2==s.xShapeBlank.length){var o=a-((e=s.xShapeBlank)[0]+e[1]);if(o<=r)return null;n=o/(r-1);}else e=[n=a/(r+1),n,n];for(var l=0,h=0;h<r;h++){0==h?l=e[0]:l+=n,i.push(t[0]+l);}return{xPositions:i,width:0};}}]);return _class120;}(ci);r.Feature.Theme.Pie=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ci5){_inherits(_class121,_ci5);function _class121(e,t,s,r,i){var _this168;_classCallCheck(this,_class121);_this168=_possibleConstructorReturn(this,_getPrototypeOf(_class121).call(this,e,t,s,r,i)),_this168.CLASS_NAME="SuperMap.Feature.Theme.Pie";return _this168;}_createClass(_class121,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class121.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(hi.Background(this.shapeFactory,this.chartBox,e));var s=this.dataValues;if(!(s.length<1)){var r=this.DVBCodomain;for(var _e68=0;_e68<s.length;_e68++){if(s[_e68]<r[0]||s[_e68]>r[1])return;}var i=0;for(var _e69=0;_e69<s.length;_e69++){i+=Math.abs(s[_e69]);}this.DVBUnitValue=360/i;for(var a=this.DVBUnitValue,n=this.DVBCenterPoint,o=0,l=0,h=o,u=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,c=0;c<s.length;c++){var d=Math.abs(s[c]);(l=0===c?o+d*a:c===d.length-1?h:o+d*a)-o>=360&&(l=359.9999999);var p=new Vr(n[0],n[1],u,o,l);if(void 0===e.sectorStyleByFields){var m=c%t.length;p.style=hi.ShapeStyleTool(null,e.sectorStyle,t,null,m);}else p.style=hi.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,c,s[c]);p.highlightStyle=hi.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(p.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(p.clickable=e.sectorClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:s[c]},this.shapes.push(this.shapeFactory.createShape(p)),o=l;}this.shapesConvertToRelativeCoordinate();}}}}]);return _class121;}(ci);r.Feature.Theme.Point=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ci6){_inherits(_class122,_ci6);function _class122(e,t,s,r,i,a){var _this169;_classCallCheck(this,_class122);_this169=_possibleConstructorReturn(this,_getPrototypeOf(_class122).call(this,e,t,s,r,i,a)),_this169.CLASS_NAME="SuperMap.Feature.Theme.Point";return _this169;}_createClass(_class122,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class122.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,s=this.DVBCodomain;this.DVBUnitValue=(s[1]-s[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues,a=this.calculateXShapeInfo();if(a){var n,o,l=a.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(hi.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(hi.GraphAxis(this.shapeFactory,t,e,a));for(var h=0,u=i.length;h<u;h++){if(i[h]<s[0]||i[h]>s[1])return null;n=l[h],o=t[1]-(i[h]-s[0])/r;var c=new Ur(n,o);c.style=hi.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,h,i[h]),c.highlightStyle=hi.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(c.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(c.clickable=e.pointClickAble),c.refDataID=this.data.id,c.dataInfo={field:this.fields[h],value:i[h]},this.shapes.push(this.shapeFactory.createShape(c));}this.shapesConvertToRelativeCoordinate();}}}},{key:"calculateXShapeInfo",value:function calculateXShapeInfo(){var e,t=this.dataViewBox,s=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],a=this.DVBWidth,n=0;if(s.xShapeBlank&&s.xShapeBlank.length&&2==s.xShapeBlank.length){var o=a-((e=s.xShapeBlank)[0]+e[1]);if(o<=r)return null;n=o/(r-1);}else e=[n=a/(r+1),n,n];for(var l=0,h=0;h<r;h++){0==h?l=e[0]:l+=n,i.push(t[0]+l);}return{xPositions:i,width:0};}}]);return _class122;}(ci);r.Feature.Theme.Ring=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ci7){_inherits(_class123,_ci7);function _class123(e,t,s,r,i){var _this170;_classCallCheck(this,_class123);_this170=_possibleConstructorReturn(this,_getPrototypeOf(_class123).call(this,e,t,s,r,i)),_this170.CLASS_NAME="SuperMap.Feature.Theme.Ring";return _this170;}_createClass(_class123,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class123.prototype),"destroy",this).call(this);}},{key:"assembleShapes",value:function assembleShapes(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(hi.Background(this.shapeFactory,this.chartBox,t));var s=this.dataValues;if(!(s.length<1)){var r=this.DVBCodomain;for(var _e70=0;_e70<s.length;_e70++){if(s[_e70]<r[0]||s[_e70]>r[1])return;}var i=0;for(var _e71=0;_e71<s.length;_e71++){i+=Math.abs(s[_e71]);}this.DVBUnitValue=360/i;for(var a=this.DVBUnitValue,n=this.DVBCenterPoint,o=0,l=0,h=o,u=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,c=t.innerRingRadius>=0&&t.innerRingRadius<u,d=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&c?t.innerRingRadius:0,p=0;p<s.length;p++){var m=Math.abs(s[p]);l=0===p?o+m*a:p===m.length-1?h:o+m*a;var f=new Vr(n[0],n[1],u,o,l,d);if(void 0===t.sectorStyleByFields){var y=p%e.length;f.style=hi.ShapeStyleTool(null,t.sectorStyle,e,null,y);}else f.style=hi.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,p,s[p]);f.highlightStyle=hi.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(f.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(f.clickable=t.sectorClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[p],value:s[p]},this.shapes.push(this.shapeFactory.createShape(f)),o=l;}this.shapesConvertToRelativeCoordinate();}}}}]);return _class123;}(ci);r.Feature.Theme.ThemeVector=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_ui2){_inherits(_class124,_ui2);function _class124(e,t,s,r,i){var _this171;_classCallCheck(this,_class124);if(_this171=_possibleConstructorReturn(this,_getPrototypeOf(_class124).call(this,e,t)),e.geometry&&e.geometry instanceof we){_this171.dataBounds=e.geometry.getBounds(),_this171.nodesClipPixel=2,_this171.isHoverAble=!0,_this171.isMultiHover=!0,_this171.isClickAble=!0,_this171.highlightStyle=null,_this171.shapeOptions={},_this171.style=s||{},_this171.CLASS_NAME="SuperMap.Feature.Theme.Vector",_this171.style=s||{},r&&c.copyAttributesWithClip(_assertThisInitialized(_this171),r,["shapeOptions","dataBounds"]),i&&c.copyAttributesWithClip(_this171.shapeOptions,i);var a=e.geometry;_this171.lonlat=_this171.dataBounds.getCenterLonLat(),_this171.location=_this171.getLocalXY(_this171.lonlat),a instanceof Re?_this171.lineToTF(a):a instanceof Me?_this171.lineToTF(a):a instanceof Oe||(a instanceof Pe?_this171.multiPointToTF(a):a instanceof De?_this171.multiLineStringToTF(a):a instanceof Fe?_this171.multiPolygonToTF(a):a instanceof ke?_this171.polygonToTF(a):a instanceof Ne||(a instanceof Le?_this171.pointToTF(a):a instanceof Be?_this171.rectangleToTF(a):a instanceof Ie&&_this171.geoTextToTF(a)));}return _possibleConstructorReturn(_this171);}_createClass(_class124,[{key:"destroy",value:function destroy(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,_get(_getPrototypeOf(_class124.prototype),"destroy",this).call(this);}},{key:"lineToTF",value:function lineToTF(e){for(var t=e.components,s=[],r=[],i=this.location,a=[],n=this.nodesClipPixel,o=0;o<t.length;o++){var l=t[o];if(r=[],s=this.getLocalXY(l),r[0]=s[0]-i[0],r[1]=s[1]-i[1],a.length>0){var h=a[a.length-1];if(Math.abs(h[0]-r[0])<=n&&Math.abs(h[1]-r[1])<=n)continue;}a.push(r);}if(a.length<2)return null;var u=new Object();(u=c.copyAttributesWithClip(u,this.style,["pointList"])).pointList=a;var d=new ai({style:u,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(d.highlightStyle=this.highlightStyle),d.refOriginalPosition=this.location,d.refDataID=this.data.id,d.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&c.copyAttributesWithClip(d,this.shapeOptions),this.shapes.push(d);}},{key:"multiPointToTF",value:function multiPointToTF(e){for(var t=e.components,s=[],r=[],i=this.location,a=[],n=this.nodesClipPixel,o=0;o<t.length;o++){var l=t[o];if(r=[],s=this.getLocalXY(l),r[0]=s[0]-i[0],r[1]=s[1]-i[1],a.length>0){var h=a[a.length-1];if(Math.abs(h[0]-r[0])<=n&&Math.abs(h[1]-r[1])<=n)continue;}a.push(r);var u=new Object();u.r=6,(u=c.copyAttributesWithClip(u,this.style)).x=r[0],u.y=r[1];var d=new ti({style:u,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(d.highlightStyle=this.highlightStyle),d.refOriginalPosition=i,d.refDataID=this.data.id,d.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&c.copyAttributesWithClip(d,this.shapeOptions),this.shapes.push(d);}}},{key:"multiLineStringToTF",value:function multiLineStringToTF(e){for(var t=e.components,s=0;s<t.length;s++){var r=t[s];this.lineToTF(r);}}},{key:"multiPolygonToTF",value:function multiPolygonToTF(e){for(var t=e.components,s=0;s<t.length;s++){var r=t[s];this.polygonToTF(r);}}},{key:"pointToTF",value:function pointToTF(e){var t=this.location,s=this.getLocalXY(e),r=new Object();r.r=6,(r=c.copyAttributesWithClip(r,this.style)).x=s[0]-t[0],r.y=s[1]-t[1];var i=new ti({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&c.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i);}},{key:"polygonToTF",value:function polygonToTF(e){for(var t=e.components,s=[],r=[],i=this.location,a=[],n=[],o=[],l=this.nodesClipPixel,h=0;h<t.length;h++){var u=t[h].components;if(0===h){a=[];for(var d=0;d<u.length;d++){if(r=[],s=this.getLocalXY(u[d]),r[0]=s[0]-i[0],r[1]=s[1]-i[1],a.length>0){var p=a[a.length-1];if(Math.abs(p[0]-r[0])<=l&&Math.abs(p[1]-r[1])<=l)continue;}a.push(r);}}else{n=[];for(var m=0;m<u.length;m++){if(r=[],s=this.getLocalXY(u[m]),r[0]=s[0]-i[0],r[1]=s[1]-i[1],n.length>0){var f=n[n.length-1];if(Math.abs(f[0]-r[0])<=l&&Math.abs(f[1]-r[1])<=l)continue;}n.push(r);}}n.length<2||o.push(n);}if(!(a.length<2)){var y={};(y=c.copyAttributesWithClip(y,this.style,["pointList"])).pointList=a;var g=new ii({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(g.highlightStyle=this.highlightStyle),g.refOriginalPosition=this.location,g.refDataID=this.data.id,g.isHoverByRefDataID=this.isMultiHover,o.length>0&&(g.holePolygonPointLists=o),this.shapeOptions&&c.copyAttributesWithClip(g,this.shapeOptions),this.shapes.push(g);}}},{key:"rectangleToTF",value:function rectangleToTF(e){var t=this.location,s=new Ee(e.x,e.y),r=this.layer.map.getResolution(),i=this.getLocalXY(s),a=new Object();a.r=6,(a=c.copyAttributesWithClip(a,this.style)).x=i[0]-t[0],a.y=i[1]-t[1]-2*e.width/r,a.width=e.width/r,a.height=e.height/r;var n=new oi({style:a,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(n.highlightStyle=this.highlightStyle),n.refOriginalPosition=t,n.refDataID=this.data.id,n.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&c.copyAttributesWithClip(n,this.shapeOptions),this.shapes.push(n);}},{key:"geoTextToTF",value:function geoTextToTF(e){var t=this.location,s=this.getLocalXY(e),r=new Object();r.r=6,(r=c.copyAttributesWithClip(r,this.style,["x","y","text"])).x=s[0]-t[0],r.y=s[1]-t[1],r.text=e.text;var i=new si({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&c.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i);}},{key:"updateAndAddShapes",value:function updateAndAddShapes(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,s=0,r=this.shapes.length;s<r;s++){var i=this.shapes[s];i.refOriginalPosition=e,t.addShape(i);}}},{key:"getShapesCount",value:function getShapesCount(){return this.shapes.length;}},{key:"getLocalXY",value:function getLocalXY(e){return this.layer.getLocalXY(e);}}]);return _class124;}(ui);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pi=/*#__PURE__*/function(_r$mixin2){_inherits(pi,_r$mixin2);function pi(e){var _this172;_classCallCheck(this,pi);_this172=_possibleConstructorReturn(this,_getPrototypeOf(pi).call(this,e)),e=e||{},_this172.id=null,_this172.type="group",_this172.clipShape=null,_this172._children=[],_this172._storage=null,_this172.__dirty=!0,_this172.ignore=!1,c.extend(_assertThisInitialized(_this172),e),_this172.id=_this172.id||c.createUniqueID("smShapeGroup_"),_this172.CLASS_NAME="SuperMap.LevelRenderer.Group";return _this172;}_createClass(pi,[{key:"destroy",value:function destroy(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,_get(_getPrototypeOf(pi.prototype),"destroy",this).call(this);}},{key:"children",value:function children(){return this._children.slice();}},{key:"childAt",value:function childAt(e){return this._children[e];}},{key:"addChild",value:function addChild(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof pi&&e.addChildrenToStorage(this._storage)));}},{key:"removeChild",value:function removeChild(e){var t=c.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof pi&&e.delChildrenFromStorage(this._storage));}},{key:"eachChild",value:function eachChild(e,t){for(var s=!!t,r=0;r<this._children.length;r++){var i=this._children[r];s?e.call(t,i):e(i);}}},{key:"traverse",value:function traverse(e,t){for(var s=!!t,r=0;r<this._children.length;r++){var i=this._children[r];s?e.call(t,i):e(i),"group"===i.type&&i.traverse(e,t);}}},{key:"addChildrenToStorage",value:function addChildrenToStorage(e){for(var t=0;t<this._children.length;t++){var s=this._children[t];e.addToMap(s),"group"===s.type&&s.addChildrenToStorage(e);}}},{key:"delChildrenFromStorage",value:function delChildrenFromStorage(e){for(var t=0;t<this._children.length;t++){var s=this._children[t];e.delFromMap(s.id),"group"===s.type&&s.delChildrenFromStorage(e);}}},{key:"modSelf",value:function modSelf(){this.__dirty=!0;}}]);return pi;}(r.mixin(Yr,$r));/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mi=/*#__PURE__*/function(){function mi(){_classCallCheck(this,mi);this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage";}_createClass(mi,[{key:"destroy",value:function destroy(){this.dispose(),this._shapeList=null,this._shapeListOffset=null;}},{key:"iterShape",value:function iterShape(e,t){if(!t){t={hover:!1,normal:"down",update:!1};}if(t.hover)for(var s=0,r=this._hoverElements.length;s<r;s++){var i=this._hoverElements[s];if(i.updateTransform(),e(i))return this;}switch(t.update&&this.updateShapeList(),t.normal){case"down":{var _t54=this._shapeList.length;for(;_t54--;){if(e(this._shapeList[_t54]))return this;}break;}default:for(var _t55=0,_s45=this._shapeList.length;_t55<_s45;_t55++){if(e(this._shapeList[_t55]))return this;}}return this;}},{key:"getHoverShapes",value:function getHoverShapes(e){var t=[],s=this._hoverElements.length;for(var _e72=0;_e72<s;_e72++){t.push(this._hoverElements[_e72]);var r=this._hoverElements[_e72].hoverConnect;if(r)for(var i,a=0,n=(r=r instanceof Array?r:[r]).length;a<n;a++){(i=r[a].id?r[a]:this.get(r[a]))&&t.push(i);}}if(t.sort(mi.shapeCompareFunc),e)for(var _e73=0,_s46=t.length;_e73<_s46;_e73++){t[_e73].updateTransform();}return t;}},{key:"getShapeList",value:function getShapeList(e){return e&&this.updateShapeList(),this._shapeList;}},{key:"updateShapeList",value:function updateShapeList(){this._shapeListOffset=0;var e=this._roots.length;for(var _t56=0;_t56<e;_t56++){var _e74=this._roots[_t56];this._updateAndAddShape(_e74);}this._shapeList.length=this._shapeListOffset;var t=this._shapeList.length;for(var _e75=0;_e75<t;_e75++){this._shapeList[_e75].__renderidx=_e75;}this._shapeList.sort(mi.shapeCompareFunc);}},{key:"_updateAndAddShape",value:function _updateAndAddShape(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var s=0;s<e._children.length;s++){var r=e._children[s];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r,t);}e.__dirty=!1;}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e;}},{key:"mod",value:function mod(e,t){var s=this._elements[e];if(s&&(s.modSelf(),t))if(t.parent||t._storage||t.__startClip){var r={};for(var i in t){"parent"!=i&&"_storage"!=i&&"__startClip"!=i&&t.hasOwnProperty(i)&&(r[i]=t[i]);}new Mr().merge(s,r,!0);}else new Mr().merge(s,t,!0);return this;}},{key:"drift",value:function drift(e,t,s){var r=this._elements[e];return r&&(r.needTransform=!0,"horizontal"===r.draggable?s=0:"vertical"===r.draggable&&(t=0),(!r.ondrift||r.ondrift&&!r.ondrift(t,s))&&r.drift(t,s)),this;}},{key:"addHover",value:function addHover(e){return e.updateNeedTransform(),this._hoverElements.push(e),this;}},{key:"delHover",value:function delHover(){return this._hoverElements=[],this;}},{key:"hasHoverShape",value:function hasHoverShape(){return this._hoverElements.length>0;}},{key:"addRoot",value:function addRoot(e){e instanceof pi&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e);}},{key:"delRoot",value:function delRoot(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var s=this._roots[t];s instanceof pi&&s.delChildrenFromStorage(this);}return this._elements={},this._hoverElements=[],void(this._roots=[]);}if(e instanceof Array){var r=e.length;for(var _t57=0;_t57<r;_t57++){this.delRoot(e[_t57]);}}else{var i;i="string"==typeof e?this._elements[e]:e;var a=new Mr().indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof pi&&i.delChildrenFromStorage(this));}}},{key:"addToMap",value:function addToMap(e){return e instanceof pi&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this;}},{key:"get",value:function get(e){return this._elements[e];}},{key:"delFromMap",value:function delFromMap(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof pi&&(t._storage=null)),this;}},{key:"dispose",value:function dispose(){this._elements=null,this._roots=null,this._hoverElements=null;}}],[{key:"shapeCompareFunc",value:function shapeCompareFunc(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel;}}]);return mi;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fi=/*#__PURE__*/function(){function fi(e,t){_classCallCheck(this,fi);this.root=e,this.storage=t,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,fi.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var s=document.createElement("div");this._domRoot=s,s.style.position="relative",s.style.overflow="hidden",s.style.width=this._width+"px",s.style.height=this._height+"px",this.root.appendChild(s),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=fi.createDom(c.createUniqueID("SuperMap.Theme_background_"),"div",this),s.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var r=new yi(c.createUniqueID("_highLightLayer_"),this);this._layers.hover=r,s.appendChild(r.dom),r.initContext(),r.dom.onselectstart=a,r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1;}this.updatePainter=function(e,t){i.refreshShapes(e,t);};}_createClass(fi,[{key:"destroy",value:function destroy(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null;}},{key:"render",value:function render(e){return this.refresh(e,!0),this;}},{key:"refresh",value:function refresh(e,t){var s=this.storage.getShapeList(!0);return this._paintList(s,t),"function"==typeof e&&e(),this;}},{key:"_paintList",value:function _paintList(e,t){var s,r,i;for(var a in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers){"hover"!==a&&(this._layers[a].unusedCount++,this._layers[a].updateTransform());}for(var n=[],o=0,l=e.length;o<l;o++){var h=e[o];if(r!==h.zlevel&&(s&&s.needTransform&&i.restore(),i=(s=this.getLayer(h.zlevel)).ctx,r=h.zlevel,s.unusedCount=0,(s.dirty||t)&&s.clear(),s.needTransform&&(i.save(),s.setTransform(i))),i&&h.__startClip){var u=h.__startClip;if(i.save(),u.needTransform){var _e76=u.transform;Zr.Util_matrix.invert(n,_e76),i.transform(_e76[0],_e76[1],_e76[2],_e76[3],_e76[4],_e76[5]);}if(i.beginPath(),u.buildPath(i,u.style),i.clip(),u.needTransform){var _e77=n;i.transform(_e77[0],_e77[1],_e77[2],_e77[3],_e77[4],_e77[5]);}}if((s&&s.dirty||t)&&!h.invisible&&(!h.onbrush||h.onbrush&&!h.onbrush(i,!1)))if(Kr.catchBrushException)try{h.brush(i,!1,this.updatePainter);}catch(e){Zr.Util_log(e,"brush error of "+h.type,h);}else h.brush(i,!1,this.updatePainter);i&&h.__stopClip&&i.restore(),h.__dirty=!1;}i&&s&&s.needTransform&&i.restore();for(var _e78 in this._layers){if("hover"!==_e78){var c=this._layers[_e78];c.dirty=!1,1==c.unusedCount&&c.clear();}}}},{key:"getLayer",value:function getLayer(e){var t=this._layers[e];if(!t){var s=this._zlevelList.length,r=null,i=-1;if(s>0&&e>this._zlevelList[0]){for(i=0;i<s-1&&!(this._zlevelList[i]<e&&this._zlevelList[i+1]>e);i++){;}r=this._layers[this._zlevelList[i]];}this._zlevelList.splice(i+1,0,e),t=new yi(c.createUniqueID("_levelLayer_"+e),this);var a=r?r.dom:this._bgDom;a.nextSibling?a.parentNode.insertBefore(t.dom,a.nextSibling):a.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&new Mr().merge(t,this._layerConfig[e],!0),t.updateTransform();}return t;}},{key:"getLayers",value:function getLayers(){return this._layers;}},{key:"_updateLayerStatus",value:function _updateLayerStatus(e){var t=this._layers,s={};for(var _e79 in t){"hover"!==_e79&&(s[_e79]=t[_e79].elCount,t[_e79].elCount=0);}for(var _s47=0;_s47<e.length;_s47++){var r=e[_s47],i=t[r.zlevel];if(i){if(i.elCount++,i.dirty)continue;i.dirty=r.__dirty;}}for(var _e80 in t){"hover"!==_e80&&s[_e80]!==t[_e80].elCount&&(t[_e80].dirty=!0);}}},{key:"refreshShapes",value:function refreshShapes(e,t){for(var s=0,r=e.length;s<r;s++){var i=e[s];this.storage.mod(i.id);}return this.refresh(t),this;}},{key:"clear",value:function clear(){for(var e in this._layers){"hover"!=e&&this._layers[e].clear();}return this;}},{key:"modLayer",value:function modLayer(e,t){if(t){this._layerConfig[e]?new Mr().merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var s=this._layers[e];s&&new Mr().merge(s,this._layerConfig[e],!0);}}},{key:"delLayer",value:function delLayer(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice(new Mr().indexOf(this._zlevelList,e),1));}},{key:"refreshHover",value:function refreshHover(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,s=e.length;t<s;t++){this._brushHover(e[t]);}return this.storage.delHover(),this;}},{key:"clearHover",value:function clearHover(){var e=this._layers.hover;return e&&e.clear(),this;}},{key:"resize",value:function resize(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),s=this._getHeight();if(e.style.display="",this._width!=t||s!=this._height){for(var r in this._width=t,this._height=s,e.style.width=t+"px",e.style.height=s+"px",this._layers){this._layers[r].resize(t,s);}this.refresh(null,!0);}return this;}},{key:"clearLayer",value:function clearLayer(e){var t=this._layers[e];t&&t.clear();}},{key:"dispose",value:function dispose(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null;}},{key:"getDomHover",value:function getDomHover(){return this._layers.hover.dom;}},{key:"toDataURL",value:function toDataURL(e,t,s){var r=fi.createDom(c.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(r);var i=r.getContext("2d");1!=fi.devicePixelRatio&&i.scale(fi.devicePixelRatio,fi.devicePixelRatio),i.fillStyle=t||"#fff",i.rect(0,0,this._width*fi.devicePixelRatio,this._height*fi.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(Kr.catchBrushException)try{e.brush(i,!1,a.updatePainter);}catch(t){Zr.Util_log(t,"brush error of "+e.type,e);}else e.brush(i,!1,a.updatePainter);},{normal:"up",update:!0});var n=r.toDataURL(e,s);return i=null,this._bgDom.removeChild(r),n;}},{key:"getWidth",value:function getWidth(){return this._width;}},{key:"getHeight",value:function getHeight(){return this._height;}},{key:"_getWidth",value:function _getWidth(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0;}},{key:"_getHeight",value:function _getHeight(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0;}},{key:"_brushHover",value:function _brushHover(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var s=this.getLayer(e.zlevel);if(s.needTransform&&(t.save(),s.setTransform(t)),Kr.catchBrushException)try{e.brush(t,!0,this.updatePainter);}catch(t){Zr.Util_log(t,"hoverBrush error of "+e.type,e);}else e.brush(t,!0,this.updatePainter);s.needTransform&&t.restore();}}},{key:"_shapeToImage",value:function _shapeToImage(e,t,s,r,i){var a=document.createElement("canvas"),n=a.getContext("2d"),o=i||window.devicePixelRatio||1;a.style.width=s+"px",a.style.height=r+"px",a.setAttribute("width",s*o),a.setAttribute("height",r*o),n.clearRect(0,0,s*o,r*o);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(n,!1);var h=new ni({id:e,style:{x:0,y:0,image:a}});return null!=l.position&&(h.position=t.position=l.position),null!=l.rotation&&(h.rotation=t.rotation=l.rotation),null!=l.scale&&(h.scale=t.scale=l.scale),h;}},{key:"_createShapeToImageProcessor",value:function _createShapeToImageProcessor(){var e=this;return function(t,s,r,i){return e._shapeToImage(t,s,r,i,fi.devicePixelRatio);};}},{key:"updateHoverLayer",value:function updateHoverLayer(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++){this.storage.addHover(e[t]),this._brushHover(e[t]);}}}],[{key:"createDom",value:function createDom(e,t,s){var r=document.createElement(t),i=s._width,a=s._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=i+"px",r.style.height=a+"px",r.setAttribute("width",i*fi.devicePixelRatio),r.setAttribute("height",a*fi.devicePixelRatio),r.setAttribute("id",e),r;}}]);return fi;}();var yi=/*#__PURE__*/function(_$r){_inherits(yi,_$r);function yi(e,t){var _this173;_classCallCheck(this,yi);_this173=_possibleConstructorReturn(this,_getPrototypeOf(yi).call(this,e,t)),_this173.dom=null,_this173.domBack=null,_this173.ctxBack=null,_this173.painter=t,_this173.unusedCount=0,_this173.config=null,_this173.dirty=!0,_this173.elCount=0,_this173.clearColor=0,_this173.motionBlur=!1,_this173.lastFrameAlpha=.7,_this173.zoomable=!1,_this173.panable=!1,_this173.maxZoom=1/0,_this173.minZoom=0,_this173.ctx=null,_this173.dom=fi.createDom(c.createUniqueID("SuperMap.Theme"+e),"canvas",t),_this173.dom.onselectstart=function(){return!1;},_this173.dom.style["-webkit-user-select"]="none",_this173.dom.style["user-select"]="none",_this173.dom.style["-webkit-touch-callout"]="none",_this173.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer";return _this173;}_createClass(yi,[{key:"destroy",value:function destroy(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,$r.destroy.apply(this,arguments);}},{key:"initContext",value:function initContext(){this.ctx=this.dom.getContext("2d"),1!=fi.devicePixelRatio&&this.ctx.scale(fi.devicePixelRatio,fi.devicePixelRatio);}},{key:"createBackBuffer",value:function createBackBuffer(){this.domBack=fi.createDom(c.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=fi.devicePixelRatio&&this.ctxBack.scale(fi.devicePixelRatio,fi.devicePixelRatio);}},{key:"resize",value:function resize(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*fi.devicePixelRatio),this.dom.setAttribute("height",t*fi.devicePixelRatio),1!=fi.devicePixelRatio&&this.ctx.scale(fi.devicePixelRatio,fi.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*fi.devicePixelRatio),this.domBack.setAttribute("height",t*fi.devicePixelRatio),1!=fi.devicePixelRatio&&this.ctxBack.scale(fi.devicePixelRatio,fi.devicePixelRatio));}},{key:"clear",value:function clear(){var e=this.dom,t=this.ctx,s=e.width,r=e.height,i=this.clearColor,a=this.motionBlur,n=this.lastFrameAlpha;if(a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,s/fi.devicePixelRatio,r/fi.devicePixelRatio)),i?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,s/fi.devicePixelRatio,r/fi.devicePixelRatio),t.restore()):t.clearRect(0,0,s/fi.devicePixelRatio,r/fi.devicePixelRatio),a){var o=this.domBack;t.save(),t.globalAlpha=n,t.drawImage(o,0,0,s/fi.devicePixelRatio,r/fi.devicePixelRatio),t.restore();}}}]);return yi;}($r);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var gi=/*#__PURE__*/function(_Yr){_inherits(gi,_Yr);function gi(e,t,s){var _this174;_classCallCheck(this,gi);var r,i;_this174=_possibleConstructorReturn(this,_getPrototypeOf(gi).call(this,e,t,s)),_this174.root=e,_this174.storage=t,_this174.painter=s,_this174._lastX=0,_this174._lastY=0,_this174._mouseX=0,_this174._mouseY=0,_this174._findHover=null,_this174._domHover=null,_this174._findHover=(r=function r(e,t,s){var r=this;if(r._draggingTarget&&r._draggingTarget.id==e.id||e.isSilent())return!1;var i=r._event;if(e.isCover(t,s)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var a=e.refDataID,n=null;e.refDataHoverGroup&&(n=e.refDataHoverGroup);for(var o=r.storage._shapeList,l=0,h=o.length;l<h;l++){var u=o[l];u.refDataID&&a===u.refDataID&&(n?u.refDataHoverGroup&&n===u.refDataHoverGroup&&r.storage.addHover(u):r.storage.addHover(u));}}}else r.storage.addHover(e);for(var c=e.parent;c;){if(c.clipShape&&!c.clipShape.isCover(r._mouseX,r._mouseY))return!1;c=c.parent;}return r._lastHover!=e&&(r._processOutShape(i),r._processDragLeave(i),r._lastHover=e,r._processDragEnter(i)),r._processOverShape(i),r._processDragOver(i),r._hasfound=1,!0;}return!1;},i=_assertThisInitialized(_this174),function(e,t,s){return r.call(i,e,t,s);}),_this174._domHover=s.getDomHover(),_this174.CLASS_NAME="SuperMap.LevelRenderer.Handler";var a={resize:function resize(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(Kr.EVENT.RESIZE,e);},click:function click(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,Kr.EVENT.CLICK,e),this._mousemoveHandler(e);},dblclick:function dblclick(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,Kr.EVENT.DBLCLICK,e),this._mousemoveHandler(e);},mousewheel:function mousewheel(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,s=this.painter.getLayers(),r=!1;for(var i in s){if("hover"!==i){var a=s[i],n=a.position;if(a.zoomable){a.__zoom=a.__zoom||1;var o=a.__zoom;o*=t,t=(o=Math.max(Math.min(a.maxZoom,o),a.minZoom))/a.__zoom,a.__zoom=o,n[0]-=(this._mouseX-n[0])*(t-1),n[1]-=(this._mouseY-n[1])*(t-1),a.scale[0]*=t,a.scale[1]*=t,a.dirty=!0,r=!0;}}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,Kr.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e);},mousemove:function mousemove(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=Zr.Util_event.getX(e),this._mouseY=Zr.Util_event.getY(e);var t=this._mouseX-this._lastX,s=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,s),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),a=!1;for(var n in i){if("hover"!==n){var o=i[n];o.panable&&(r="move",o.position[0]+=t,o.position[1]+=s,a=!0,o.dirty=!0);}}a&&this.painter.refresh();}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,Kr.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover();},mouseout:function mouseout(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode;}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(Kr.EVENT.GLOBALOUT,e);},mousedown:function mousedown(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date(),e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,Kr.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button;},mouseup:function mouseup(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,Kr.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e);},touchstart:function touchstart(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date(),this._mobildFindFixed(e),this._mousedownHandler(e);},touchmove:function touchmove(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&Zr.Util_event.stop(e);},touchend:function touchend(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date();t-this._lastTouchMoment<Kr.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<Kr.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&Zr.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover();}};function n(e,t){return function(s){return e.call(t,s);};}!function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],s=t.length;for(;s--;){var r=t[s];e["_"+r+"Handler"]=n(a[r],e);}}(_assertThisInitialized(_this174)),window.addEventListener?(window.addEventListener("resize",_this174._resizeHandler),Zr.Util_env.os.tablet||Zr.Util_env.os.phone?(e.addEventListener("touchstart",_this174._touchstartHandler),e.addEventListener("touchmove",_this174._touchmoveHandler),e.addEventListener("touchend",_this174._touchendHandler)):(e.addEventListener("click",_this174._clickHandler),e.addEventListener("dblclick",_this174._dblclickHandler),e.addEventListener("mousewheel",_this174._mousewheelHandler),e.addEventListener("mousemove",_this174._mousemoveHandler),e.addEventListener("mousedown",_this174._mousedownHandler),e.addEventListener("mouseup",_this174._mouseupHandler)),e.addEventListener("DOMMouseScroll",_this174._mousewheelHandler),e.addEventListener("mouseout",_this174._mouseoutHandler)):(window.attachEvent("onresize",_this174._resizeHandler),e.attachEvent("onclick",_this174._clickHandler),e.ondblclick=_this174._dblclickHandler,e.attachEvent("onmousewheel",_this174._mousewheelHandler),e.attachEvent("onmousemove",_this174._mousemoveHandler),e.attachEvent("onmouseout",_this174._mouseoutHandler),e.attachEvent("onmousedown",_this174._mousedownHandler),e.attachEvent("onmouseup",_this174._mouseupHandler));return _this174;}_createClass(gi,[{key:"destroy",value:function destroy(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,Yr.prototype.destroy.apply(this,arguments);}},{key:"on",value:function on(e,t){return this.bind(e,t),this;}},{key:"un",value:function un(e,t){return this.unbind(e,t),this;}},{key:"trigger",value:function trigger(e,t){var s=Kr.EVENT;switch(e){case s.RESIZE:case s.CLICK:case s.DBLCLICK:case s.MOUSEWHEEL:case s.MOUSEMOVE:case s.MOUSEDOWN:case s.MOUSEUP:case s.MOUSEOUT:this["_"+e+"Handler"](t);}}},{key:"dispose",value:function dispose(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),Zr.Util_env.os.tablet||Zr.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un();}},{key:"_processDragStart",value:function _processDragStart(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date()-this._lastMouseDownMoment<t.dragEnableTime)return;var s=t;this._draggingTarget=s,this._isDragging=1,s.invisible=!0,this.storage.mod(s.id),this._dispatchAgency(s,Kr.EVENT.DRAGSTART,e),this.painter.refresh();}}},{key:"_processDragEnter",value:function _processDragEnter(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Kr.EVENT.DRAGENTER,e,this._draggingTarget);}},{key:"_processDragOver",value:function _processDragOver(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Kr.EVENT.DRAGOVER,e,this._draggingTarget);}},{key:"_processDragLeave",value:function _processDragLeave(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Kr.EVENT.DRAGLEAVE,e,this._draggingTarget);}},{key:"_processDrop",value:function _processDrop(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,Kr.EVENT.DROP,e,this._draggingTarget));}},{key:"_processDragEnd",value:function _processDragEnd(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,Kr.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null;}},{key:"_processOverShape",value:function _processOverShape(e){this._dispatchAgency(this._lastHover,Kr.EVENT.MOUSEOVER,e);}},{key:"_processOutShape",value:function _processOutShape(e){this._dispatchAgency(this._lastHover,Kr.EVENT.MOUSEOUT,e);}},{key:"_dispatchAgency",value:function _dispatchAgency(e,t,s,r){var i="on"+t,a={type:t,event:s,target:e,cancelBubble:!1},n=e;for(r&&(a.dragged=r);n&&(n[i]&&(a.cancelBubble=n[i](a)),n.dispatch(t,a),n=n.parent,!a.cancelBubble);){;}e?a.cancelBubble||this.dispatch(t,a):r||this.dispatch(t,{type:t,event:s});}},{key:"_iterateAndFindHover",value:function _iterateAndFindHover(){for(var e,t=Zr.Util_matrix.create(),s=this.storage.getShapeList(),r=[0,0],i=s.length-1;i>=0;i--){var a=s[i];if(void 0!==a.zlevel&&(e=this.painter.getLayer(a.zlevel,e),r[0]=this._mouseX,r[1]=this._mouseY,e.needTransform&&(Zr.Util_matrix.invert(t,e.transform),Zr.Util_vector.applyTransform(r,r,t))),this._findHover(a,r[0],r[1]))break;}}},{key:"_mobildFindFixed",value:function _mobildFindFixed(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var s=0;!this._lastHover&&s<t.length;s++){var r=t[s];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover();}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY);}},{key:"_zrenderEventFixed",value:function _zrenderEventFixed(e,t){if(e.zrenderFixed)return e;if(t){var s="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(s){var r=this.root.getBoundingClientRect();e.zrenderX=s.clientX-r.left,e.zrenderY=s.clientY-r.top;}}else{var i=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;i&&i!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+i.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+i.offsetTop);}return e.zrenderFixed=1,e;}},{key:"getLastHoverOne",value:function getLastHoverOne(){return this._lastHover?this._lastHover:null;}}]);return gi;}(Yr);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vi=/*#__PURE__*/function(){function vi(){_classCallCheck(this,vi);this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing";}_createClass(vi,[{key:"destroy",value:function destroy(){}},{key:"Linear",value:function Linear(e){return e;}},{key:"QuadraticIn",value:function QuadraticIn(e){return e*e;}},{key:"QuadraticOut",value:function QuadraticOut(e){return e*(2-e);}},{key:"QuadraticInOut",value:function QuadraticInOut(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1);}},{key:"CubicIn",value:function CubicIn(e){return e*e*e;}},{key:"CubicOut",value:function CubicOut(e){return--e*e*e+1;}},{key:"CubicInOut",value:function CubicInOut(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2);}},{key:"QuarticIn",value:function QuarticIn(e){return e*e*e*e;}},{key:"QuarticOut",value:function QuarticOut(e){return 1- --e*e*e*e;}},{key:"QuarticInOut",value:function QuarticInOut(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2);}},{key:"QuinticIn",value:function QuinticIn(e){return e*e*e*e*e;}},{key:"QuinticOut",value:function QuinticOut(e){return--e*e*e*e*e+1;}},{key:"QuinticInOut",value:function QuinticInOut(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2);}},{key:"SinusoidalIn",value:function SinusoidalIn(e){return 1-Math.cos(e*Math.PI/2);}},{key:"SinusoidalOut",value:function SinusoidalOut(e){return Math.sin(e*Math.PI/2);}},{key:"SinusoidalInOut",value:function SinusoidalInOut(e){return .5*(1-Math.cos(Math.PI*e));}},{key:"ExponentialIn",value:function ExponentialIn(e){return 0===e?0:Math.pow(1024,e-1);}},{key:"ExponentialOut",value:function ExponentialOut(e){return 1===e?1:1-Math.pow(2,-10*e);}},{key:"ExponentialInOut",value:function ExponentialInOut(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)));}},{key:"CircularIn",value:function CircularIn(e){return 1-Math.sqrt(1-e*e);}},{key:"CircularOut",value:function CircularOut(e){return Math.sqrt(1- --e*e);}},{key:"CircularInOut",value:function CircularInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1);}},{key:"ElasticIn",value:function ElasticIn(e){var t,s=.1;return 0===e?0:1===e?1:(s<1?(s=1,t=.1):t=.4*Math.asin(1/s)/(2*Math.PI),-s*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4));}},{key:"ElasticOut",value:function ElasticOut(e){var t,s=.1;return 0===e?0:1===e?1:(s<1?(s=1,t=.1):t=.4*Math.asin(1/s)/(2*Math.PI),s*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1);}},{key:"ElasticInOut",value:function ElasticInOut(e){var t,s=.1;return 0===e?0:1===e?1:(s<1?(s=1,t=.1):t=.4*Math.asin(1/s)/(2*Math.PI),(e*=2)<1?s*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:s*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1);}},{key:"BackIn",value:function BackIn(e){var t=1.70158;return e*e*((t+1)*e-t);}},{key:"BackOut",value:function BackOut(e){var t=1.70158;return--e*e*((t+1)*e+t)+1;}},{key:"BackInOut",value:function BackInOut(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2);}},{key:"BounceIn",value:function BounceIn(e){return 1-this.BounceOut(1-e);}},{key:"BounceOut",value:function BounceOut(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375;}},{key:"BounceInOut",value:function BounceInOut(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5;}}]);return vi;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Si=/*#__PURE__*/function(){function Si(e){_classCallCheck(this,Si);this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=new Date().getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip";}_createClass(Si,[{key:"destroy",value:function destroy(){}},{key:"step",value:function step(e){var t=new vi(),s=(e-this._startTime)/this._life;if(!(s<0)){s=Math.min(s,1);var r="string"==typeof this.easing?t[this.easing]:this.easing,i="function"==typeof r?r(s):s;return this.fire("frame",i),1==s?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null;}}},{key:"restart",value:function restart(){var e=(new Date().getTime()-this._startTime)%this._life;this._startTime=new Date().getTime()-e+this.gap;}},{key:"fire",value:function fire(e,t){for(var s=0,r=this._targetPool.length;s<r;s++){this["on"+e]&&this["on"+e](this._targetPool[s],t);}}}]);return Si;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bi=/*#__PURE__*/function(_Yr2){_inherits(bi,_Yr2);function bi(e){var _this175;_classCallCheck(this,bi);_this175=_possibleConstructorReturn(this,_getPrototypeOf(bi).call(this,e)),e=e||{},_this175.stage={},_this175.onframe=function(){},_this175._clips=[],_this175._running=!1,_this175._time=0,c.extend(_assertThisInitialized(_this175),e),_this175.CLASS_NAME="SuperMap.LevelRenderer.Animation";return _this175;}_createClass(bi,[{key:"add",value:function add(e){this._clips.push(e);}},{key:"remove",value:function remove(e){var t=new Mr().indexOf(this._clips,e);t>=0&&this._clips.splice(t,1);}},{key:"_update",value:function _update(){var e=new Date().getTime(),t=e-this._time,s=this._clips,r=s.length,i=[],a=[];for(var _t58=0;_t58<r;_t58++){var n=s[_t58],o=n.step(e);o&&(i.push(o),a.push(n));}this.stage.update&&this.stage.update();for(var _e81=0;_e81<r;){s[_e81]._needsRemove?(s[_e81]=s[r-1],s.pop(),r--):_e81++;}r=i.length;for(var _e82=0;_e82<r;_e82++){a[_e82].fire(i[_e82]);}this._time=e,this.onframe(t),this.dispatch("frame",t);}},{key:"start",value:function start(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16);},t=this;this._running=!0,this._time=new Date().getTime(),e(function s(){t._running&&(t._update(),e(s));});}},{key:"stop",value:function stop(){this._running=!1;}},{key:"clear",value:function clear(){this._clips=[];}},{key:"animate",value:function animate(e,t){var s=new xi(e,(t=t||{}).loop,t.getter,t.setter);return s.animation=this,s;}}],[{key:"_interpolateNumber",value:function _interpolateNumber(e,t,s){return(t-e)*s+e;}},{key:"_interpolateArray",value:function _interpolateArray(e,t,s,r,i){var a=e.length;if(1==i)for(var _i23=0;_i23<a;_i23++){r[_i23]=bi._interpolateNumber(e[_i23],t[_i23],s);}else{var n=e[0].length;for(var _i24=0;_i24<a;_i24++){for(var _a13=0;_a13<n;_a13++){r[_i24][_a13]=bi._interpolateNumber(e[_i24][_a13],t[_i24][_a13],s);}}}}},{key:"_isArrayLike",value:function _isArrayLike(e){switch(_typeof(e)){case"undefined":case"string":return!1;}return void 0!==e.length;}},{key:"_catmullRomInterpolateArray",value:function _catmullRomInterpolateArray(e,t,s,r,i,a,n,o,l){var h=e.length;if(1==l)for(var _l11=0;_l11<h;_l11++){o[_l11]=bi._catmullRomInterpolate(e[_l11],t[_l11],s[_l11],r[_l11],i,a,n);}else{var u=e[0].length;for(var _l12=0;_l12<h;_l12++){for(var c=0;c<u;c++){o[_l12][c]=bi._catmullRomInterpolate(e[_l12][c],t[_l12][c],s[_l12][c],r[_l12][c],i,a,n);}}}}},{key:"_catmullRomInterpolate",value:function _catmullRomInterpolate(e,t,s,r,i,a,n){var o=.5*(s-e),l=.5*(r-t);return(2*(t-s)+o+l)*n+(-3*(t-s)-2*o-l)*a+o*i+t;}},{key:"_cloneValue",value:function _cloneValue(e){var t=Array.prototype.slice;if(bi._isArrayLike(e)){var s=e.length;if(bi._isArrayLike(e[0])){for(var r=[],i=0;i<s;i++){r.push(t.call(e[i]));}return r;}return t.call(e);}return e;}},{key:"rgba2String",value:function rgba2String(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")";}}]);return bi;}(Yr);var xi=/*#__PURE__*/function(){function xi(e,t,s,r){_classCallCheck(this,xi);this._tracks={},this._target=e,this._loop=t||!1,this._getter=s||function(e,t){return e[t];},this._setter=r||function(e,t,s){e[t]=s;},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator";}_createClass(xi,[{key:"when",value:function when(e,t){for(var s in t){this._tracks[s]||(this._tracks[s]=[],0!==e&&this._tracks[s].push({time:0,value:bi._cloneValue(this._getter(this._target,s))})),this._tracks[s].push({time:parseInt(e,10),value:t[s]});}return this;}},{key:"during",value:function during(e){return this._onframeList.push(e),this;}},{key:"start",value:function start(e){var t=this,s=this._setter,r=this._getter,i=t._onframeList.length,a="spline"===e,n=function n(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,s=0;s<e;s++){t._doneList[s].call(t);}}},o=function o(_o14,l){var h=_o14.length;if(h){var u=_o14[0].value,c=bi._isArrayLike(u),d=!1,p=c&&bi._isArrayLike(u[0])?2:1;_o14.sort(function(e,t){return e.time-t.time;});var m=_o14[h-1].time,f=[],y=[];for(var _e83=0;_e83<h;_e83++){f.push(_o14[_e83].time/m);var g=_o14[_e83].value;"string"==typeof g&&(0===(g=Zr.Util_color.toArray(g)).length&&(g[0]=g[1]=g[2]=0,g[3]=1),d=!0),y.push(g);}var v,S,b,x,C,_,T,E=0,A=0;if(d)var w=[0,0,0,0];var N=new Si({target:t._target,life:m,loop:t._loop,delay:t._delay,onframe:function onframe(e,n){if(n<A){for(v=Math.min(E+1,h-1),S=v;S>=0&&!(f[S]<=n);S--){;}S=Math.min(S,h-2);}else{for(S=E;S<h&&!(f[S]>n);S++){;}S=Math.min(S-1,h-2);}E=S,A=n;var o=f[S+1]-f[S];if(0!==o){if(b=(n-f[S])/o,a){if(C=y[S],x=y[0===S?S:S-1],_=y[S>h-2?h-1:S+1],T=y[S>h-3?h-1:S+2],c)bi._catmullRomInterpolateArray(x,C,_,T,b,b*b,b*b*b,r(e,l),p);else{var _t59;_t59=d?bi.rgba2String(w):bi._catmullRomInterpolate(x,C,_,T,b,b*b,b*b*b),s(e,l,_t59);}}else if(c)bi._interpolateArray(y[S],y[S+1],b,r(e,l),p);else{var _t60;d?(bi._interpolateArray(y[S],y[S+1],b,w,1),_t60=bi.rgba2String(w)):_t60=bi._interpolateNumber(y[S],y[S+1],b),s(e,l,_t60);}for(S=0;S<i;S++){t._onframeList[S](e,n);}}},ondestroy:n});e&&"spline"!==e&&(N.easing=e),t._clipList.push(N),t._clipCount++,t.animation.add(N);}};for(var l in this._tracks){o(this._tracks[l],l);}return this;}},{key:"stop",value:function stop(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t);}this._clipList=[];}},{key:"delay",value:function delay(e){return this._delay=e,this;}},{key:"done",value:function done(e){return e&&this._doneList.push(e),this;}}]);return xi;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ci=/*#__PURE__*/function(){function Ci(e,t){_classCallCheck(this,Ci);this.id=e,this.storage=new mi(),this.painter=new fi(t,this.storage),this.handler=new gi(t,this.storage,this.painter),this.animatingElements=[],this.animation=new bi({stage:{update:Ci.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render";}_createClass(Ci,[{key:"destroy",value:function destroy(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null;}},{key:"getId",value:function getId(){return this.id;}},{key:"addShape",value:function addShape(e){return this.storage.addRoot(e),this;}},{key:"addGroup",value:function addGroup(e){return this.storage.addRoot(e),this;}},{key:"delShape",value:function delShape(e){return this.storage.delRoot(e),this;}},{key:"delGroup",value:function delGroup(e){return this.storage.delRoot(e),this;}},{key:"modShape",value:function modShape(e,t){return this.storage.mod(e,t),this;}},{key:"modGroup",value:function modGroup(e,t){return this.storage.mod(e,t),this;}},{key:"modLayer",value:function modLayer(e,t){return this.painter.modLayer(e,t),this;}},{key:"addHoverShape",value:function addHoverShape(e){return this.storage.addHover(e),this;}},{key:"render",value:function render(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this;}},{key:"refresh",value:function refresh(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this;}},{key:"refreshNextFrame",value:function refreshNextFrame(){return this._needsRefreshNextFrame=!0,this;}},{key:"refreshHover",value:function refreshHover(e){return this.painter.refreshHover(e),this;}},{key:"refreshShapes",value:function refreshShapes(e,t){return this.painter.refreshShapes(e,t),this;}},{key:"resize",value:function resize(){return this.painter.resize(),this;}},{key:"animate",value:function animate(e,t,s){if("string"==typeof e&&(e=this.storage.get(e)),e){var r;if(t){for(var i=t.split("."),a=e,n=0,o=i.length;n<o;n++){a&&(a=a[i[n]]);}a&&(r=a);}else r=e;if(!r)return void Zr.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(r,{loop:s}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=new Mr().indexOf(l,e);l.splice(t,1);}});}Zr.Util_log("Element not existed");}},{key:"clearAnimation",value:function clearAnimation(){this.animation.clear();}},{key:"getWidth",value:function getWidth(){return this.painter.getWidth();}},{key:"getHeight",value:function getHeight(){return this.painter.getHeight();}},{key:"toDataURL",value:function toDataURL(e,t,s){return this.painter.toDataURL(e,t,s);}},{key:"shapeToImage",value:function shapeToImage(e,t,s){var r=c.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,e,t,s);}},{key:"on",value:function on(e,t){return this.handler.on(e,t),this;}},{key:"un",value:function un(e,t){return this.handler.un(e,t),this;}},{key:"trigger",value:function trigger(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this;}},{key:"clear",value:function clear(){return this.storage.delRoot(),this.painter.clear(),this;}},{key:"dispose",value:function dispose(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null;}},{key:"updateHoverShapes",value:function updateHoverShapes(e){return this.painter.updateHoverLayer(e),this;}},{key:"getAllShapes",value:function getAllShapes(){return this.storage._shapeList;}},{key:"clearAll",value:function clearAll(){return this.clear(),this.painter.clearHover(),this;}},{key:"getHoverOne",value:function getHoverOne(){return this.handler.getLastHoverOne();}}],[{key:"getFrameCallback",value:function getFrameCallback(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var s=0,r=t.length;s<r;s++){e.storage.mod(t[s].id);}(t.length||e._needsRefreshNextFrame)&&e.refresh();}};}}]);return Ci;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _i=/*#__PURE__*/function(){function _i(){_classCallCheck(this,_i);_i._instances={},_i.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer";}_createClass(_i,[{key:"destroy",value:function destroy(){this.dispose(),this.version=null;}},{key:"init",value:function init(e){var t=new Ci(c.createUniqueID("LRenderer_"),e);return _i._instances[t.id]=t,t;}},{key:"dispose",value:function dispose(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var t in _i._instances){_i._instances[t].dispose();}_i._instances={};}return this;}},{key:"getInstance",value:function getInstance(e){return _i._instances[e];}},{key:"delInstance",value:function delInstance(e){return delete _i._instances[e],this;}}]);return _i;}();r.LevelRenderer=_i;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ti={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ei=/*#__PURE__*/function(){function Ei(){_classCallCheck(this,Ei);this._initView();}_createClass(Ei,[{key:"_initView",value:function _initView(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var s=document.createElement("div");s.setAttribute("class","component-messagebox"),s.innerHTML="",e.appendChild(s),this.messageBox=s;var r=document.createElement("div");r.setAttribute("class","component-messagebox__cancelbtncontainer");var i=document.createElement("button");i.setAttribute("class","component-messagebox__cancelBtn"),i.innerHTML="x",i.onclick=this.closeView.bind(this),r.appendChild(i),e.appendChild(r),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer);}},{key:"closeView",value:function closeView(){this.messageBoxContainer.hidden=!0;}},{key:"showView",value:function showView(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1;}}]);return Ei;}();r.Components.MessageBox=Ei;var Ai=s(6),wi=s.n(Ai);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ni={code:null,defaultCode:"en-US",getCode:function getCode(){return r.Lang.code||r.Lang.setCode(),r.Lang.code;},setCode:function setCode(){var e=this.getLanguageFromCookie();e?r.Lang.code=e:(e=r.Lang.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),r.Lang.code=e);},getLanguageFromCookie:function getLanguageFromCookie(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var s=e[t];" "===s.charAt(0);){s=s.substring(1);}if(-1!==s.indexOf("language="))return s.substring("language=".length,s.length);}return"";},i18n:function i18n(e){var t=r.Lang[r.Lang.getCode()],s=t&&t[e];return s||(s=e),s;}};r.Lang=Ni,r.i18n=r.Lang.i18n;var Pi=s(3),Oi=s.n(Pi);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Li={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function readFile(e,t,s,r,i){Ti.JSON===e||Ti.GEOJSON===e?this.readTextFile(t,s,r,i):Ti.EXCEL!==e&&Ti.CSV!==e||this.readXLSXFile(t,s,r,i);},readTextFile:function readTextFile(e,t,s,r){var i=new FileReader();i.onloadend=function(e){t&&t.call(r,e.target.result);},i.onerror=function(e){s&&s.call(r,e);},this.rAT?i.readAsText(e.file,"utf-8"):i.readAsBinaryString(e.file);},readXLSXFile:function readXLSXFile(e,t,s,r){var i=new FileReader();i.onloadend=function(e){var i=new Uint8Array(e.target.result),a=Oi.a.read(i,{type:"array"});try{if(a&&a.SheetNames&&a.SheetNames.length>0){var _e84=a.SheetNames[0],_s48=Oi.a.utils.sheet_to_csv(a.Sheets[_e84]);t&&t.call(r,_s48);}}catch(e){s&&s.call(r,e);}},i.onerror=function(e){s&&s.call(r,e);},this.rABF&&i.readAsArrayBuffer(e.file);},processDataToGeoJson:function processDataToGeoJson(e,t,s,r,i){var a=null;if("EXCEL"===e||"CSV"===e)a=this.processExcelDataToGeoJson(t),s&&s.call(i,a);else if("JSON"===e||"GEOJSON"===e){var _e85=t;"string"==typeof _e85&&(_e85=JSON.parse(_e85)),"ISERVER"===_e85.type?a=_e85.data.recordsets[0].features:"FeatureCollection"===_e85.type?a=_e85:r&&r.call(i,Ni.i18n("msg_dataInWrongGeoJSONFormat")),s&&s.call(i,a);}else r&&r.call(i,Ni.i18n("msg_dataInWrongFormat"));},processExcelDataToGeoJson:function processExcelDataToGeoJson(e){var t=this.string2Csv(e),s=t.colTitles,r=-1,i=-1;for(var _e86=0,_t61=s.length;_e86<_t61;_e86++){this.isXField(s[_e86])&&(r=_e86),this.isYField(s[_e86])&&(i=_e86);}var a=[];for(var _e87=0,_s49=t.rows.length;_e87<_s49;_e87++){var _s50=t.rows[_e87],_n13=Number(_s50[r]),_o15=Number(_s50[i]),_l13={};for(var _s51 in t.colTitles){_l13[t.colTitles[_s51]]=t.rows[_e87][_s51];}var _h7={type:"Feature",geometry:{type:"Point",coordinates:[_n13,_o15]},properties:_l13};a.push(_h7);}return a;},isXField:function isXField(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"经度"===t||"东经"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"x坐标"===t;},isYField:function isYField(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"纬度"===t||"北纬"===t||"latitude"===t||"lat"===t||"y坐标"===t;},string2Csv:function string2Csv(e,t){var s=e.split("\n"),r={};r.colTitles=t?[]:s[0].split(","),r.rows=[];for(var _e88=t?0:1;_e88<s.length;_e88++){s[_e88]&&r.rows.push(s[_e88].split(","));}return r;}};r.Components.FileReaderUtil=Li;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Mi=/*#__PURE__*/function(){function Mi(e){_classCallCheck(this,Mi);this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new p(this,null,this.EVENT_TYPES);}_createClass(Mi,[{key:"getDatasetInfo",value:function getDatasetInfo(e){var t=this.datasets.url,s=this;C.get(t).then(function(e){return e.json();}).then(function(t){if(t.datasetInfo){var _r18=t.datasetInfo;s.datasetsInfo={dataSourceName:_r18.dataSourceName,datasetName:_r18.name,mapName:t.name},e({result:s.datasetsInfo});}})["catch"](function(e){console.log(e),s._fireFailedEvent(e);});}},{key:"getDataFeatures",value:function getDataFeatures(e,t){var s,i,a,n=e.result,o={name:n.datasetName+"@"+n.dataSourceName};Object.assign(o,this.datasets.queryInfo),s=new r.FilterParameter(o),i=new r.GetFeaturesBySQLParameters({queryParameter:s,datasetNames:[n.dataSourceName+":"+n.datasetName],fromIndex:0,toIndex:1e5}),(a=new r.GetFeaturesBySQLService(n.dataUrl,{eventListeners:{processCompleted:t,processFailed:function processFailed(){}}})).processAsync(i);}},{key:"getLayerFeatures",value:function getLayerFeatures(e,t){var s,i,a,n=e.result,o={name:n.mapName};Object.assign(o,this.datasets.queryInfo),s=new r.FilterParameter(o),i=new r.QueryBySQLParameters({queryParams:[s],expectCount:1e5}),(a=new r.QueryBySQLService(n.dataUrl,{eventListeners:{processCompleted:t,processFailed:function processFailed(){}}})).processAsync(i);}},{key:"getDataInfoByIptl",value:function getDataInfoByIptl(e){this.getServiceInfo(this.datasets.url,e);}},{key:"getServiceInfo",value:function getServiceInfo(e,t){var s=this;C.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json();}).then(function(r){if(!1!==r.succeed){if(r.dataItemServices&&r.dataItemServices.length>0){var _i25;r.dataItemServices.forEach(function(r){if("RESTDATA"===r.serviceType&&"PUBLISHED"===r.serviceStatus)_i25=r;else{if("RESTMAP"!==r.serviceType||"PUBLISHED"!==r.serviceStatus)return void s.getDatafromContent(e,t);_i25=r;}}),_i25&&s.getDatafromRest(_i25.serviceType,_i25.address,t);}else s.getDatafromContent(e,t);}else s._fireFailedEvent(r);})["catch"](function(e){console.log(e),s._fireFailedEvent(e);});}},{key:"getDatafromContent",value:function getDatafromContent(e,t){var _this176=this;var s={result:{}},r=this;e+="/content.json?pageSize=9999999&currentPage=1",C.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json();}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(Ni.i18n("msg_jsonResolveFiled"));var _t62=_this176._formatGeoJSON(e.content);s.result.features={type:e.content.type,features:_t62};}else if("EXCEL"===e.type||"CSV"===e.type){var _t63=_this176._excelData2Feature(e.content);s.result.features={type:"FeatureCollection",features:_t63};}t(s,"content");}}else r._fireFailedEvent(e);},this)["catch"](function(e){console.log(e),r._fireFailedEvent(e);});}},{key:"getDatafromRest",value:function getDatafromRest(e,t,s){var r=this,i=this.datasets.withCredentials;if("RESTDATA"===e){var _e89,_a14,_n14="".concat(t,"/data/datasources");C.get(_n14,null,{withCredentials:i}).then(function(e){return e.json();}).then(function(o){_e89=o.datasourceNames[0],_n14="".concat(t,"/data/datasources/").concat(_e89,"/datasets"),C.get(_n14,null,{withCredentials:i}).then(function(e){return e.json();}).then(function(i){return _a14=i.datasetNames[0],r.getDatafromRestData("".concat(t,"/data"),[_e89+":"+_a14],s),[_e89+":"+_a14];})["catch"](function(e){r._fireFailedEvent(e);});})["catch"](function(e){r._fireFailedEvent(e);});}else{var _e90,_a15,_n15,_o16="".concat(t,"/maps");C.get(_o16,null,{withCredentials:i}).then(function(e){return e.json();}).then(function(l){_e90=l[0].name,_n15=l[0].path,_o16=_o16="".concat(t,"/maps/").concat(_e90,"/layers"),C.get(_o16,null,{withCredentials:i}).then(function(e){return e.json();}).then(function(e){return _a15=e[0].subLayers.layers[0].caption,r.getDatafromRestMap(_a15,_n15,s),_a15;})["catch"](function(e){r._fireFailedEvent(e);});})["catch"](function(e){r._fireFailedEvent(e);});}}},{key:"getDatafromRestData",value:function getDatafromRestData(e,t,s){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){s(e,"RESTDATA");},function(e){console.log(e),r._fireFailedEvent(e);});}},{key:"getDatafromRestMap",value:function getDatafromRestMap(e,t,s){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){s(e,"RESTMAP");},function(e){console.log(e),r._fireFailedEvent(e);});}},{key:"_getFeatureBySQL",value:function _getFeatureBySQL(e,t,s,r,i){var a,n,o,l={name:t.join().replace(":","@")};Object.assign(l,s),a=new ft(l),o=new us({queryParameter:a,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),(n=new cs(e,{eventListeners:{processCompleted:function processCompleted(e){r&&r(e);},processFailed:function processFailed(e){i&&i(e);}}})).processAsync(o);}},{key:"_queryFeatureBySQL",value:function _queryFeatureBySQL(e,t,s,r,i,a,n,o,l,h){var u,c,d={name:t};Object.assign(d,s),u=new ft(d),r&&(u.fields=r);var p={queryParams:[u]};h&&(p.queryOption=w.ATTRIBUTE),o&&(p.startRecord=o),l&&(p.expectCount=l),i&&(p.prjCoordSys={epsgCode:i}),c=new sr(p),this._queryBySQL(e,c,function(e){"processCompleted"===e.type?a(e):n(e);});}},{key:"_queryBySQL",value:function _queryBySQL(e,t,s,r){new rr(e,{eventListeners:{scope:this,processCompleted:s,processFailed:s},format:this._processFormat(r)}).processAsync(t);}},{key:"_processFormat",value:function _processFormat(e){return e||T.GEOJSON;}},{key:"_formatGeoJSON",value:function _formatGeoJSON(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t;}),t;}},{key:"_excelData2Feature",value:function _excelData2Feature(e){var t=e.colTitles,s=-1,r=-1;for(var _e91=0,_i26=t.length;_e91<_i26;_e91++){Li.isXField(t[_e91])&&(s=_e91),Li.isYField(t[_e91])&&(r=_e91);}var i=[];for(var _t64=0,_a16=e.rows.length;_t64<_a16;_t64++){var _a17=e.rows[_t64],_n16=Number(_a17[s]),_o17=Number(_a17[r]),_l14={};for(var _s52 in e.colTitles){_l14[e.colTitles[_s52]]=e.rows[_t64][_s52];}_l14.index=_t64+"";var _h8={type:"Feature",geometry:{type:"Point",coordinates:[_n16,_o17]},properties:_l14};i.push(_h8);}return i;}},{key:"_fireFailedEvent",value:function _fireFailedEvent(e){var t=e?{error:e,message:Ni.i18n("msg_getdatafailed")}:{message:Ni.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t);}}]);return Mi;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ii=/*#__PURE__*/function(){function Ii(e){_classCallCheck(this,Ii);this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new p(this,null,this.EVENT_TYPES);}_createClass(Ii,[{key:"_initXYField",value:function _initXYField(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name});});}},{key:"getDatasetInfo",value:function getDatasetInfo(e){var _this177=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new Mi(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function getdatafailed(e){_this177.events.triggerEvent("getdatafailed",e);}}));}},{key:"_getDatasetInfoSuccess",value:function _getDatasetInfoSuccess(e){var t=this.datasets.url,s=t.indexOf("rest");if(s>0){var _r19=t.indexOf("/",s+5),_i27=t.substring(s+5,_r19),_a18=t.substring(0,s+4)+"/data";if("maps"===_i27){var _i28=t.indexOf("/",_r19+1),_n17=t.substring(_r19+1,_i28);_a18=t.substring(0,s+4)+"/maps/"+_n17,e.result.dataUrl=_a18,this._getLayerFeatures(e);}else"data"===_i27&&(e.result.dataUrl=_a18,this._getDataFeatures(e));}}},{key:"_getDataInfoSuccess",value:function _getDataInfoSuccess(e,t){var s=this;"RESTMAP"===t?s._getChartDatasFromLayer(e):s._getChartDatas(e);}},{key:"_getDataFeatures",value:function _getDataFeatures(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this));}},{key:"_getLayerFeatures",value:function _getLayerFeatures(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this));}},{key:"_getChartDatas",value:function _getChartDatas(e){if(e){this.features=e.result.features;var _t65=this.features.features,_s53={};if(_t65.length){var _e92=_t65[0],_r20=[],_i29=[];for(var _t66 in _e92.properties){_r20.push(_t66),_i29.push(this._getDataType(_e92.properties[_t66]));}_s53={features:_t65,fieldCaptions:_r20,fieldTypes:_i29,fieldValues:[]};for(var _e93 in _i29){var _r21=[];for(var _i30 in _t65){var _a19=_t65[_i30],_n18=_s53.fieldCaptions[_e93],_o18=_a19.properties[_n18];_r21.push(_o18);}_s53.fieldValues.push(_r21);}this.createChart(_s53);}}}},{key:"_getChartDatasFromLayer",value:function _getChartDatasFromLayer(e){if(e.result.recordsets){var _t67=e.result.recordsets[0],_s54=_t67.features.features;this.features=_t67.features;var _r22={};if(_s54.length){_r22={features:_t67.features,fieldCaptions:_t67.fieldCaptions,fieldTypes:_t67.fieldTypes,fieldValues:[]};for(var _e94 in _r22.fieldCaptions){var _t68=[];for(var _i31 in _s54){var _a20=_s54[_i31],_n19=_r22.fieldCaptions[_e94],_o19=_a20.properties[_n19];_t68.push(_o19);}_r22.fieldValues.push(_t68);}this.createChart(_r22);}}}},{key:"_createChartOptions",value:function _createChartOptions(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType);}},{key:"changeType",value:function changeType(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType);}},{key:"updateData",value:function updateData(e,t,s){this.updateChart=s,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this));}},{key:"_updateDataSuccess",value:function _updateDataSuccess(e){var t=this._createChartOptions(e);this.updateChart(t);}},{key:"updateChartOptions",value:function updateChartOptions(e,t){if(this.calculatedData){var _s55=this.grid,_r23=this._createChartSeries(this.calculatedData,e),_i32=[];for(var _e95 in this.calculatedData.XData){_i32.push({value:this.calculatedData.XData[_e95].fieldsData});}var _a21={type:"category",name:this.xField[0].name||"X",data:_i32,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},_n20={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},_o20={formatter:"{b0}: {c0}"},_l15="#404a59";return t&&(t.grid&&(_s55=t.grid),t.tooltip&&(_o20=t.tooltip),t.backgroundColor&&(_l15=t.backgroundColor)),{backgroundColor:_l15,grid:_s55,series:_r23,xAxis:_a21,yAxis:_n20,tooltip:_o20};}}},{key:"_createChartDatas",value:function _createChartDatas(e){var t=0,s=[],r=e.fieldCaptions,i=this;r.forEach(function(e,s){i.xField[0]&&e===i.xField[0].field&&(t=s);}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(i.yFieldName=i.yFieldName+","),i.yFieldName=i.yFieldName+e.name,r.forEach(function(t,r){t===e.field&&s.push(r);});});var a=this._getAttrData(e,t),n=[];if(s.length>0)s.forEach(function(t){var s=[];for(var _r24 in e.fieldValues[t]){s.push({value:e.fieldValues[t][_r24]});}n.push(s);});else{var _e96=[],_t69=[],_s56=a.length;for(var _r25=0;_r25<_s56;_r25++){var _s57=!1;for(var _i33=0,_n21=_t69.length;_i33<_n21;_i33++){if(a[_r25].fieldsData===_t69[_i33].fieldsData){_e96[_i33].value++,_t69[_i33].recordIndexs.push(_r25),_s57=!0;break;}}_s57||a[_r25].fieldsData&&(_t69.push({fieldsData:a[_r25].fieldsData,recordIndexs:[_r25]}),_e96.push({value:1}));}a=_t69,n=[_e96];}return{XData:a,YData:n};}},{key:"_getAttrData",value:function _getAttrData(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);var s=[];for(var _r26=0,_i34=e.fieldValues[t].length;_r26<_i34;_r26++){var _i35=e.fieldValues[t][_r26];s.push({recordIndexs:_r26,fieldsData:_i35});}return s;}},{key:"_createChartSeries",value:function _createChartSeries(e,t){var s=[];return e.YData.forEach(function(e){var r=0,i=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=e[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _t70=_step.value;r=_t70.value,i.push({value:r});}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}var a={type:t,data:i,name:"y"};s.push(a);}),s;}},{key:"_isDate",value:function _isDate(e){return /((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e);}},{key:"_isNumber",value:function _isNumber(e){var t=Number(e);return 0===t||!isNaN(t);}},{key:"_getDataType",value:function _getDataType(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER";}return"STRING";}},{key:"_checkUrl",value:function _checkUrl(e){var t;return t=!(""===e||!this._isMatchUrl(e))&&!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e);}},{key:"_isMatchUrl",value:function _isMatchUrl(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e);}},{key:"getStyle",value:function getStyle(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor};}},{key:"getFeatures",value:function getFeatures(){return this.features;}},{key:"setStyle",value:function setStyle(e){return this.updateChartOptions(this.chartType,e);}}]);return Ii;}();r.Components.ChartViewModel=Ii;r.Components.Chart=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(){function _class125(e,t){_classCallCheck(this,_class125);this.domID=e,this.chartType=t.type||"bar",t.datasets.type=t.datasets.type||"iServer",t.datasets.withCredentials=t.datasets.withCredentials||!1,this.viewModel=new Ii(t),this._fillDataToView();}_createClass(_class125,[{key:"onAdd",value:function onAdd(e){this.addChart=e;}},{key:"_fillDataToView",value:function _fillDataToView(){var e=new Ei();this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function getdatafailed(t){e.showView(t.message);}});}},{key:"getStyle",value:function getStyle(){return this.viewModel.getStyle();}},{key:"getFeatures",value:function getFeatures(){return this.viewModel.getFeatures();}},{key:"setStyle",value:function setStyle(e){var t=this.viewModel.setStyle(e);this._updateChart(t);}},{key:"changeType",value:function changeType(e){if(this.chartType!==e){this.chartType=e;var _t71=this.viewModel.changeType(e);this._updateChart(_t71);}}},{key:"updateData",value:function updateData(e,t){var s=this;this.viewModel.updateData(e,t,function(e){s._updateChart(e),s.addChart&&s.addChart();});}},{key:"_createChart",value:function _createChart(e){this.echart=wi.a.init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart();}},{key:"_updateChart",value:function _updateChart(e){this.echart&&(this.echart.clear(),this.echart.setOption(e));}}]);return _class125;}();/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ri=/*#__PURE__*/function(){function Ri(e){_classCallCheck(this,Ri);e=e||{},this.id=e.id?e.id:null,this.rootContainer=null;}_createClass(Ri,[{key:"getElement",value:function getElement(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer;}},{key:"_initView",value:function _initView(){}},{key:"showView",value:function showView(){this.rootContainer.hidden=!1;}},{key:"closeView",value:function closeView(){this.rootContainer.hidden=!0;}}]);return Ri;}();r.Components.TemplateBase=Ri;r.Components.CommonContainer=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ri){_inherits(_class126,_Ri);function _class126(e){var _this178;_classCallCheck(this,_class126);_this178=_possibleConstructorReturn(this,_getPrototypeOf(_class126).call(this,e));var t=e.title?e.title:"";_this178._initView(t);return _this178;}_createClass(_class126,[{key:"_initView",value:function _initView(e){var t=document.createElement("div");t.setAttribute("class","component-container");var s=document.createElement("div");s.setAttribute("class","component-title");var r=document.createElement("div");r.innerHTML=e,s.appendChild(r),t.appendChild(s);var i=document.createElement("div");return i.setAttribute("class","component-content"),t.appendChild(i),this.content=i,this.rootContainer=t,t;}},{key:"getContentElement",value:function getContentElement(){return this.content;}},{key:"appendContent",value:function appendContent(e){this.content.appendChild(e);}}]);return _class126;}(Ri);r.Components.Select=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ri2){_inherits(_class127,_Ri2);function _class127(e){var _this179;_classCallCheck(this,_class127);_this179=_possibleConstructorReturn(this,_getPrototypeOf(_class127).call(this,e)),_this179._initView(e);return _this179;}_createClass(_class127,[{key:"_initView",value:function _initView(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var s=this._createElement("div","component-selecttool--chart",t);s.setAttribute("tabindex","1");var r=this._createElement("div","component-selecttool__name",s);r.title=e.optionsArr[0],r.innerHTML=e.optionsArr[0];var i=this._createElement("div","component-selecttool__trianglebtn--chart",s),a=this._createElement("div","component-triangle-down-img",i),n=this._createElement("div","component-selecttool__content",s),o=this._createElement("div","component-selecttool__content--chart",n),l=this._createElement("div","component-selecttool__scrollarea__content",o);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,r,e.optionsClickCb),this._selectClickEvent(s,n,a),this.rootContainer=t;}},{key:"createOptions",value:function createOptions(e,t){for(var _s58 in t){var _r27=this._createElement("div","component-selecttool__option",e);_r27.title=t[_s58],_r27.innerHTML=t[_s58];}}},{key:"_selectClickEvent",value:function _selectClickEvent(e,t,s){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",s.className="component-triangle-down-img"):(t.style.display="block",s.className="triangle-up-img"),e.preventDefault(),e.stopPropagation();},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation());},e.onblur=function(){t.style.display="none",s.className="component-triangle-down-img";};}},{key:"_createElement",value:function _createElement(e,t,s){var r=document.createElement(e||"div");return t&&(r.className=t),s&&s.appendChild(r),r;}},{key:"optionClickEvent",value:function optionClickEvent(e,t,s){var _loop=function _loop(_r28){var i=e.children[_r28];i.onclick=function(){t.innerHTML=i.innerHTML,t.title=i.title,i.getAttribute("data-value")&&t.setAttribute("data-value",i.getAttribute("data-value")),s&&s(i);};};for(var _r28=0;_r28<e.children.length;_r28++){_loop(_r28);}}}]);return _class127;}(Ri);r.Components.DropDownBox=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ri3){_inherits(_class128,_Ri3);function _class128(e){var _this180;_classCallCheck(this,_class128);_this180=_possibleConstructorReturn(this,_getPrototypeOf(_class128).call(this,e)),_this180._initView(e);return _this180;}_createClass(_class128,[{key:"_initView",value:function _initView(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var s=document.createElement("div");s.setAttribute("tabindex","1"),s.className="component-dropdownbox",t.appendChild(s);var r=document.createElement("div");s.appendChild(r),this._createDropDownOption(e[0],r);var i=document.createElement("div");i.className="component-dropdownbox__triangle-btn",s.appendChild(i);var a=document.createElement("div");a.className="component-triangle-down-img",i.appendChild(a);var n={parentEle:s,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:a,dropDownTopContainer:r};this._createDropDownBox(n),this.rootContainer=t;}},{key:"_createDropDownBox",value:function _createDropDownBox(e){var t=e.parentEle,s=e.dropDownTopContainer,r=document.createElement("div");r.className=e.dropDownContent[0],t.appendChild(r);var i=document.createElement("div");i.className=e.scrollareaContent,r.appendChild(i);var a=e.optionsArr;for(var _e97=0;_e97<a.length;_e97++){this._createDropDownOption(a[_e97],i);}var n=e.triangleBtn;this._dropDownClickEvent(t,r,n),this._eleOnblur(t,r,n);var o=i.children;var _loop2=function _loop2(_e98){o[_e98].onclick=function(){s.innerHTML=o[_e98].outerHTML;};};for(var _e98=0;_e98<o.length;_e98++){_loop2(_e98);}}},{key:"_createDropDownOption",value:function _createDropDownOption(e,t){var s=document.createElement("div");s.className="component-dropdownbox__item";var r=e;r.dataValue&&s.setAttribute("data-value",r.dataValue),t.appendChild(s);var i=document.createElement("div");i.className="component-dropdownbox__item__img",s.appendChild(i);var a=document.createElement("div");r.icon.className&&(a.className=r.icon.className),r.icon.background&&(a.style.background=r.icon.background),i.appendChild(a);var n=document.createElement("div");n.className="component-dropdownbox__item__title",n.title=r.title,n.innerHTML=r.title,s.appendChild(n);var o=document.createElement("div");o.className="component-dropdownbox__item__remark",o.title=r.remark,o.innerHTML=r.remark,s.appendChild(o);}},{key:"_dropDownClickEvent",value:function _dropDownClickEvent(e,t,s){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",s.className="component-triangle-down-img"):(t.style.display="block",s.className="triangle-up-img"),e.preventDefault(),e.stopPropagation();},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation());};}},{key:"_eleOnblur",value:function _eleOnblur(e,t,s){e.onblur=function(){t.style.display="none",s.className="component-triangle-down-img";};}},{key:"_createElement",value:function _createElement(e,t,s){var r=document.createElement(e||"div");return t&&(r.className=t),s&&s.appendChild(r),r;}}]);return _class128;}(Ri);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Di=/*#__PURE__*/function(_Ri4){_inherits(Di,_Ri4);function Di(e){var _this181;_classCallCheck(this,Di);_this181=_possibleConstructorReturn(this,_getPrototypeOf(Di).call(this,e=e||{})),e.title=e.title?e.title:"",_this181._initView(e.title);return _this181;}_createClass(Di,[{key:"_initView",value:function _initView(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var s=document.createElement("div");s.setAttribute("class","component-popcontainer__header");var r=document.createElement("label");r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=e,s.appendChild(r);var i=document.createElement("span");i.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),i.onclick=this.closeView.bind(this),t.appendChild(i),t.appendChild(s);var a=document.createElement("div");a.setAttribute("class","component-popcontainer__content"),this.content=a,t.appendChild(a),this.rootContainer=t;}},{key:"appendContent",value:function appendContent(e){this.content.appendChild(e);}}]);return Di;}(Ri);r.Components.PopContainer=Di;r.Components.AttributesPopContainer=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Di){_inherits(_class129,_Di);function _class129(e){var _this182;_classCallCheck(this,_class129);e.title=e.title?e.title:"属性",_this182=_possibleConstructorReturn(this,_getPrototypeOf(_class129).call(this,e)),_this182.rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],_this182._createAttributesTable(e.attributes);return _this182;}_createClass(_class129,[{key:"_createAttributesTable",value:function _createAttributesTable(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var s=document.createElement("tbody");var r=!0;for(var _t72 in e){var _i36=document.createElement("tr");r&&_i36.setAttribute("class","component-popcontainer__content__td--color");var _a22=document.createElement("td"),_n22=document.createElement("Span");_n22.innerHTML=_t72,_a22.appendChild(_n22);var _o21=document.createElement("td");_o21.innerHTML=e[_t72],_i36.appendChild(_a22),_i36.appendChild(_o21),s.appendChild(_i36),r=!r;}t.appendChild(s),this.appendContent(t);}}]);return _class129;}(Di);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Fi=/*#__PURE__*/function(_Ri5){_inherits(Fi,_Ri5);function Fi(e){var _this183;_classCallCheck(this,Fi);_this183=_possibleConstructorReturn(this,_getPrototypeOf(Fi).call(this,e)),_this183._initView();return _this183;}_createClass(Fi,[{key:"_initView",value:function _initView(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var s=document.createElement("div");s.setAttribute("class","component-tabpage__content"),this.content=s,e.appendChild(t),e.appendChild(s),this.rootContainer=e;}},{key:"setTabs",value:function setTabs(e){this.removeAllTabs(),this.appendTabs(e);}},{key:"appendTabs",value:function appendTabs(e){for(var _t73=0;_t73<e.length;_t73++){var _s59=document.createElement("span");_s59.index=_t73,_s59.appendChild(document.createTextNode(e[_t73].title)),_s59.onclick=this._changeTabsPage.bind(this);var _r29=e[_t73].content;_r29.index=_t73,_r29.hidden=!0,this.header.appendChild(_s59),this.content.appendChild(_r29);}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1;}},{key:"removeTab",value:function removeTab(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e]);}},{key:"removeAllTabs",value:function removeAllTabs(){for(var _e99=this.header.children.length;_e99>0;_e99--){this.header.removeChild(this.header.children[_e99]),this.content.removeChild(this.content.children[_e99]);}}},{key:"_changeTabsPage",value:function _changeTabsPage(e){var t=e.target.index;for(var _e100=0;_e100<this.header.children.length;_e100++){this.header.children[_e100].setAttribute("class",""),this.content.children[_e100].hidden=!0,_e100===t&&(this.header.children[_e100].setAttribute("class","on"),this.content.children[_e100].hidden=!1);}}}]);return Fi;}(Ri);r.Components.IndexTabsPageContainer=Fi;r.Components.CityTabsPage=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Fi){_inherits(_class130,_Fi);function _class130(e){var _this184;_classCallCheck(this,_class130);_this184=_possibleConstructorReturn(this,_getPrototypeOf(_class130).call(this,e)),_this184.rootContainer.classList.add("component-citytabpage--noneBoxShadow"),_this184.config=e.config,c.isArray(_this184.config)?(_this184.header.hidden=!0,_this184._createCityItem("城市",_this184.config),_this184.content.style.border="none"):(_this184._createTabs(),_this184.header.onclick=function(e){for(var _e101=0;_e101<_this184.header.children.length;_e101++){_this184.header.children[_e101].setAttribute("class","");}e.target.setAttribute("class","on"),_this184._createCityContent(e.target.innerHTML);});return _this184;}_createClass(_class130,[{key:"_createTabs",value:function _createTabs(){if(c.isArray(this.config))for(var _e102=0;_e102<this.config.length;_e102++){var _t74="";for(var _s61 in this.config[_e102]){_t74+=_s61;}var _s60=document.createElement("li");_s60.innerHTML=_t74,this.header.appendChild(_s60);}else for(var _e103 in this.config){var _t75=document.createElement("li");_t75.innerHTML=_e103,this.header.appendChild(_t75);}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML);}},{key:"_createCityContent",value:function _createCityContent(e){for(var _e104=this.content.children.length;_e104>0;_e104--){this.content.removeChild(this.content.children[_e104-1]);}var t=this.config[e];for(var _e105 in t){this._createCityItem(_e105,t[_e105]);}}},{key:"_createCityItem",value:function _createCityItem(e,t){var s=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=e,s.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-citytabpag__content");for(var _e106=0;_e106<t.length;_e106++){var _s62=document.createElement("span");_s62.innerHTML=t[_e106],i.appendChild(_s62);}"HOT"===e&&(i.style.width="428px"),s.appendChild(i),this.content.appendChild(s);}}]);return _class130;}(Fi);r.Components.NavTabsPage=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ri6){_inherits(_class131,_Ri6);function _class131(e){var _this185;_classCallCheck(this,_class131);_this185=_possibleConstructorReturn(this,_getPrototypeOf(_class131).call(this,e)),_this185.navTabsTitle=null,_this185.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],_this185._initView(e.tabs);return _this185;}_createClass(_class131,[{key:"_initView",value:function _initView(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var s=document.createElement("span");s.setAttribute("class","supermapol-icons-close"),s.onclick=this.closeView.bind(this),t.appendChild(s);var r=document.createElement("div");this.navTabsTitle=r,r.setAttribute("class","component-navtabspage__title"),t.appendChild(r);var i=document.createElement("div");this.navTabsContent=i,i.setAttribute("class","component-navtabspage__content"),t.appendChild(i),e.length>0&&this.appendTabs(e),this.rootContainer=t;}},{key:"setTabs",value:function setTabs(e){this.removeAllTabs(),this.appendTabs(e);}},{key:"appendTabs",value:function appendTabs(e){for(var _t76=0;_t76<e.length;_t76++){var _s63=document.createElement("span");_s63.index=_t76,_s63.appendChild(document.createTextNode(e[_t76].title)),_s63.onclick=this._changeTabsPage.bind(this);var _r30=e[_t76].content;_r30.index=_t76,_r30.hidden=!0,this.navTabsTitle.appendChild(_s63),this.navTabsContent.appendChild(_r30);}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1;}},{key:"removeTab",value:function removeTab(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e]);}},{key:"removeAllTabs",value:function removeAllTabs(){for(var _e107=this.navTabsTitle.children.length;_e107>0;_e107--){this.navTabsTitle.removeChild(this.navTabsTitle.children[_e107]),this.navTabsContent.removeChild(this.navTabsContent.children[_e107]);}}},{key:"_changeTabsPage",value:function _changeTabsPage(e){var t=e.target.index;for(var _e108=0;_e108<this.navTabsTitle.children.length;_e108++){this.navTabsTitle.children[_e108].setAttribute("class",""),this.navTabsContent.children[_e108].hidden=!0,_e108===t&&(this.navTabsTitle.children[_e108].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[_e108].hidden=!1);}}}]);return _class131;}(Ri);r.Components.PaginationContainer=/*#__PURE__*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function(_Ri7){_inherits(_class132,_Ri7);function _class132(e){var _this186;_classCallCheck(this,_class132);_this186=_possibleConstructorReturn(this,_getPrototypeOf(_class132).call(this,e=e||{})),_this186.currentPage=0,_this186.pageNumberLis=[],_this186.currentPageNumberLis=[],_this186.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,_this186._initView(e.contents,e.pageCounts);return _this186;}_createClass(_class132,[{key:"setLinkageEvent",value:function setLinkageEvent(e){this.linkageEvent=e;}},{key:"_initView",value:function _initView(e,t){var s=document.createElement("div");s.setAttribute("class","component-pagination");var r=document.createElement("div");r.setAttribute("class","component-pagination__content"),s.appendChild(r),this.content=r;var i=document.createElement("ul");i.setAttribute("class","component-pagination__link"),i.onclick=this._changePageEvent.bind(this),s.appendChild(i),this._createLink(i),this.link=i,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=s;}},{key:"setContent",value:function setContent(e){this.clearContent(),this.appendContent(e);}},{key:"appendContent",value:function appendContent(e){this.content.appendChild(e);}},{key:"clearContent",value:function clearContent(){for(var _e109=this.content.children.length-1;_e109>=0;_e109--){this.content.removeChild(this.content.children[_e109]);}}},{key:"setPageLink",value:function setPageLink(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink();}},{key:"_createPageLi",value:function _createPageLi(e){for(var _t77=0;_t77<e;_t77++){var _e110=document.createElement("li");_e110.innerHTML=_t77+1,this.pageNumberLis.push(_e110);}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var _e111=0;_e111<5;_e111++){this.currentPageNumberLis.push(this.pageNumberLis[_e111]);}}},{key:"_appendPageLink",value:function _appendPageLink(){for(var _e112=0;_e112<this.currentPageNumberLis.length;_e112++){this.link.insertBefore(this.currentPageNumberLis[_e112],this.link.childNodes[this.link.children.length-2]);}for(var _e113=0;_e113<this.currentPageNumberLis.length;_e113++){this.currentPageNumberLis[_e113].setAttribute("class",""),Number(this.currentPageNumberLis[_e113].innerHTML)===this.currentPage&&this.currentPageNumberLis[_e113].setAttribute("class","active");}this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage);}},{key:"clearPageLink",value:function clearPageLink(){for(var _e114=this.link.children.length-3;_e114>1;_e114--){this.link.removeChild(this.link.children[_e114]);}}},{key:"_createLink",value:function _createLink(e){for(var _t78=0;_t78<4;_t78++){var _s64=document.createElement("li");_s64.setAttribute("class","disable");var _r31=document.createElement("span");_s64.appendChild(_r31),0===_t78?(_r31.id="first",_r31.setAttribute("class","supermapol-icons-first")):1===_t78?(_r31.id="prev",_r31.setAttribute("class","supermapol-icons-prev")):2===_t78?(_r31.id="next",_r31.setAttribute("class","supermapol-icons-next")):3===_t78&&(_r31.id="last",_r31.setAttribute("class","supermapol-icons-last")),e.appendChild(_s64);}}},{key:"_changePageEvent",value:function _changePageEvent(e){var t=e.target;if("disable"===t.parentElement.classList[0])return;var s;if(t.id)s=t.id;else{if(!Number(t.innerHTML))return;s=Number(t.innerHTML);}this._prePageNum(s),this.clearPageLink(),this._appendPageLink();}},{key:"_changeDisableState",value:function _changeDisableState(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"));}},{key:"_prePageNum",value:function _prePageNum(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var _e115=0;_e115<this.pageNumberLis.length;_e115++){t.push(this.pageNumberLis[_e115]);}else if(this.currentPage<=3)for(var _e116=0;_e116<5;_e116++){t.push(this.pageNumberLis[_e116]);}else if(this.currentPage>=this.pageNumberLis.length-3)for(var _e117=this.pageNumberLis.length-5;_e117<this.pageNumberLis.length;_e117++){t.push(this.pageNumberLis[_e117]);}else for(var _e118=this.currentPage-3;_e118<=this.currentPage+1;_e118++){t.push(this.pageNumberLis[_e118]);}t.length>0&&(this.currentPageNumberLis=t);}}]);return _class132;}(Ri);r.Lang["en-US"]={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"};r.Lang["zh-CN"]={title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"};/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ki=_e.baiduMapLayer?_e.baiduMapLayer.__proto__:Function;var Bi=/*#__PURE__*/function(_ki){_inherits(Bi,_ki);function Bi(e,t,s,r){var _this187;_classCallCheck(this,Bi);if(_this187=_possibleConstructorReturn(this,_getPrototypeOf(Bi).call(this,e,s,r)),!ki)return _possibleConstructorReturn(_this187,_assertThisInitialized(_this187));r=r||{},_this187.init(r),_this187.argCheck(r),_this187.canvasLayer=t,_this187.clickEvent=_this187.clickEvent.bind(_assertThisInitialized(_this187)),_this187.mousemoveEvent=_this187.mousemoveEvent.bind(_assertThisInitialized(_this187)),_this187.bindEvent();return _possibleConstructorReturn(_this187);}_createClass(Bi,[{key:"clickEvent",value:function clickEvent(e){var t=e.xy;_get(_getPrototypeOf(Bi.prototype),"clickEvent",this).call(this,t,e);}},{key:"mousemoveEvent",value:function mousemoveEvent(e){var t=e.xy;_get(_getPrototypeOf(Bi.prototype),"mousemoveEvent",this).call(this,t,e);}},{key:"bindEvent",value:function bindEvent(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.events.on({click:this.clickEvent}),this.options.methods.mousemove&&e.events.on({mousemove:this.mousemoveEvent}));}},{key:"unbindEvent",value:function unbindEvent(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.events.un({click:this.clickEvent}),this.options.methods.mousemove&&e.events.un({mousemove:this.mousemoveEvent}));}},{key:"getContext",value:function getContext(){return this.canvasLayer&&this.canvasLayer.canvasContext;}},{key:"addData",value:function addData(e,t){var s=e;e&&e.get&&(s=e.get()),this.dataSet.add(s),this.update({options:t});}},{key:"setData",value:function setData(e,t){var s=e;e&&e.get&&(s=e.get()),this.dataSet=this.dataSet||new _e.DataSet(),this.dataSet.set(s),this.update({options:t});}},{key:"getData",value:function getData(){return this.dataSet;}},{key:"removeData",value:function removeData(e){if(this.dataSet){var t=this.dataSet.get({filter:function filter(t){return null==e||"function"!=typeof e||!e(t);}});this.dataSet.set(t),this.update({options:null});}}},{key:"clearData",value:function clearData(){this.dataSet&&this.dataSet.clear(),this.update({options:null});}},{key:"render",value:function render(e){this._canvasUpdate(e);}},{key:"transferToMercator",value:function transferToMercator(){if(this.options.coordType&&["bd09mc","coordinates_mercator"].indexOf(this.options.coordType)>-1){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var t=Ce.Projection.transform({x:e[0],y:e[1]},"EPSG:3857","EPSG:4326");return[t.x,t.y];},"coordinates","coordinates"),this.dataSet._set(e);}}},{key:"_canvasUpdate",value:function _canvasUpdate(e){if(this.canvasLayer){var t=this.options.animation,s=this.getContext(),r=this.map;if(this.isEnabledTime()){if(void 0===e)return void this.clear(s);"2d"===this.context&&(s.save(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0, 0, 0, .1)",s.fillRect(0,0,s.canvas.width,s.canvas.height),s.restore());}else this.clear(s);if("2d"===this.context)for(var i in this.options){s[i]=this.options[i];}else s.clear(s.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&r.getZoom()<this.options.minZoom||this.options.maxZoom&&r.getZoom()>this.options.maxZoom)){var a=this.canvasLayer,n={fromColumn:"coordinates",transferCoordinate:function transferCoordinate(e){var t={lon:e[0],lat:e[1]},s=r.getViewPortPxFromLonLat(t);return[s.x,s.y];}};void 0!==e&&(n.filter=function(s){var r=t.trails||10;return e&&s.time>e-r&&s.time<e;});var o=this.dataSet.get(n);this.processData(o);var l=r.getResolution()*Dr("DEGREE");"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/l),this.options.width&&(this.options._width=this.options.width/l),this.options.height&&(this.options._height=this.options.height/l)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var h=r.getViewPortPxFromLonLat(a.transferToMapLatLng({lon:0,lat:0}));this.drawContext(s,o,this.options,h),this.options.updateCallback&&this.options.updateCallback(e);}}}},{key:"init",value:function init(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator();}},{key:"addAnimatorEvent",value:function addAnimatorEvent(){this.map.events.on({movestart:this.animatorMovestartEvent.bind(this)}),this.map.events.on({moveend:this.animatorMoveendEvent.bind(this)});}},{key:"clear",value:function clear(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height);}},{key:"show",value:function show(){this.map.addLayer(this.canvasLayer);}},{key:"hide",value:function hide(){this.map.removeLayer(this.canvasLayer);}},{key:"draw",value:function draw(){this.canvasLayer.redraw();}}]);return Bi;}(ki);/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gi=/*#__PURE__*/function(_Ce$Layer){_inherits(Gi,_Ce$Layer);function Gi(e,t){var _this188;_classCallCheck(this,Gi);if(_this188=_possibleConstructorReturn(this,_getPrototypeOf(Gi).call(this,e,t)),_this188.dataSet=null,_this188.options=null,_this188.supported=!1,_this188.canvas=null,_this188.canvasContext=null,t&&Ce.Util.extend(_assertThisInitialized(_this188),t),_this188.canvas=document.createElement("canvas"),_this188.canvas.getContext){_this188.supported=!0,_this188.canvas.style.position="absolute",_this188.canvas.style.top="0px",_this188.canvas.style.left="0px",_this188.div.appendChild(_this188.canvas);var s=_this188.options&&_this188.options.context||"2d";_this188.canvasContext=_this188.canvas.getContext(s);var r="undefined"==typeof window?{}:window,i=_this188.devicePixelRatio=r.devicePixelRatio||1;"2d"==s&&_this188.canvasContext.scale(i,i),_this188.attribution="© 2018 百度 <a href='https://mapv.baidu.com' target='_blank'>MapV</a> with <span>© <a target='_blank' href='https://iclient.supermap.io' style='color: #08c;text-decoration: none;'>SuperMap iClient</a></span>",_this188.CLASS_NAME="SuperMap.Layer.MapVLayer";}return _possibleConstructorReturn(_this188);}_createClass(Gi,[{key:"destroy",value:function destroy(){this.renderer&&this.renderer.animator&&(this.renderer.animator.stop(),this.renderer.animator=null),this.dataSet=null,this.options=null,this.renderer=null,this.supported=null,this.canvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,_get(_getPrototypeOf(Gi.prototype),"destroy",this).call(this);}},{key:"addData",value:function addData(e,t){this.renderer&&this.renderer.addData(e,t);}},{key:"setData",value:function setData(e,t){this.renderer&&this.renderer.setData(e,t);}},{key:"getData",value:function getData(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet;}},{key:"removeData",value:function removeData(e){this.renderer&&this.renderer.removeData(e);}},{key:"clearData",value:function clearData(){this.renderer.clearData();}},{key:"setMap",value:function setMap(e){_get(_getPrototypeOf(Gi.prototype),"setMap",this).call(this,e),this.renderer=new Bi(e,this,this.dataSet,this.options),this.supported?this.redraw():this.map.removeLayer(this);}},{key:"moveTo",value:function moveTo(e,t,s){if(_get(_getPrototypeOf(Gi.prototype),"moveTo",this).call(this,e,t,s),this.supported){if(this.zoomChanged=t,!s){this.div.style.visibility="hidden",this.div.style.left=-parseInt(this.map.layerContainerDiv.style.left)+"px",this.div.style.top=-parseInt(this.map.layerContainerDiv.style.top)+"px";var r=this.map.getSize();this.div.style.width=parseInt(r.w)+"px",this.div.style.height=parseInt(r.h)+"px",this.canvas.width=parseInt(r.w),this.canvas.height=parseInt(r.h),this.canvas.style.width=this.div.style.width,this.canvas.style.height=this.div.style.height,this.maxWidth=r.w,this.maxHeight=r.h,this.div.style.visibility="",t||this.renderer&&this.renderer.render();}t&&this.renderer&&this.renderer.render();}}},{key:"transferToMapLatLng",value:function transferToMapLatLng(e){var t="EPSG:4326",s=this.map.getUnits()||"degree";return["m","meter"].indexOf(s.toLowerCase())>-1&&(t="EPSG:3857"),new Ce.LonLat(e.lon,e.lat).transform("EPSG:4326",t);}}]);return Gi;}(Ce.Layer);Ce.Layer.MapVLayer=Gi;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ /* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ui=/*#__PURE__*/function(_it30){_inherits(Ui,_it30);function Ui(e,t){var _this189;_classCallCheck(this,Ui);_this189=_possibleConstructorReturn(this,_getPrototypeOf(Ui).call(this,e,t)),_this189.CLASS_NAME="SuperMap.REST.AddressMatchService";return _this189;}_createClass(Ui,[{key:"code",value:function code(e,t){var s=this;new at(s.url,{headers:s.headers,proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,serverType:s.serverType,eventListeners:{scope:s,processCompleted:t,processFailed:t}}).code(s.url+"/geocoding",e);}},{key:"decode",value:function decode(e,t){var s=this;new at(s.url,{headers:s.headers,proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,serverType:s.serverType,eventListeners:{scope:s,processCompleted:t,processFailed:t}}).decode(s.url+"/geodecoding",e);}}]);return Ui;}(it);Ce.REST.AddressMatchService=Ui;/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
     * This program are made available under the terms of the Apache License, Version 2.0
     * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Hi=/*#__PURE__*/function(_it31){_inherits(Hi,_it31);function Hi(e,t){var _this190;_classCallCheck(this,Hi);_this190=_possibleConstructorReturn(this,_getPrototypeOf(Hi).call(this,e,t)),_this190.kernelDensityJobs={},_this190.summaryMeshJobs={},_this190.queryJobs={},_this190.summaryRegionJobs={},_this190.vectorClipJobs={},_this190.overlayGeoJobs={},_this190.buffersJobs={},_this190.topologyValidatorJobs={},_this190.summaryAttributesJobs={};return _this190;}_createClass(Hi,[{key:"getKernelDensityJobs",value:function getKernelDensityJobs(e,t){var s=this,r=s._processFormat(t);new zs(s.url,{headers:s.headers,proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getKernelDensityJobs();}},{key:"getKernelDensityJob",value:function getKernelDensityJob(e,t,s){var r=this,i=r._processFormat(s);new zs(r.url,{headers:r.headers,proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getKernelDensityJob(e);}},{key:"addKernelDensityJob",value:function addKernelDensityJob(e,t,s,r){var i=this,a=i._processFormat(r);new zs(i.url,{headers:i.headers,proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.kernelDensityJobs[e.id]=e.state;}},format:a}).addKernelDensityJob(e,s);}},{key:"getKernelDensityJobState",value:function getKernelDensityJobState(e){return this.kernelDensityJobs[e];}},{key:"getSummaryMeshJobs",value:function getSummaryMeshJobs(e,t){var s=this,r=s._processFormat(t);new cr(s.url,{headers:s.headers,proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJobs();}},{key:"getSummaryMeshJob",value:function getSummaryMeshJob(e,t,s){var r=this,i=r._processFormat(s);new cr(r.url,{headers:r.headers,proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryMeshJob(e);}},{key:"addSummaryMeshJob",value:function addSummaryMeshJob(e,t,s,r){var i=this,a=i._processFormat(r);new cr(i.url,{headers:i.headers,proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.summaryMeshJobs[e.id]=e.state;}},format:a}).addSummaryMeshJob(e,s);}},{key:"getSummaryMeshJobState",value:function getSummaryMeshJobState(e){return this.summaryMeshJobs[e];}},{key:"getQueryJobs",value:function getQueryJobs(e,t){var s=this,r=s._processFormat(t);new lr(s.url,{headers:s.headers,proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getQueryJobs();}},{key:"getQueryJob",value:function getQueryJob(e,t,s){var r=this,i=r._processFormat(s);new lr(r.url,{headers:r.headers,proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getQueryJob(e);}},{key:"addQueryJob",value:function addQueryJob(e,t,s,r){var i=this,a=i._processParams(e),n=i._processFormat(r);new lr(i.url,{headers:i.headers,proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.queryJobs[e.id]=e.state;}},format:n}).addQueryJob(a,s);}},{key:"getQueryJobState",value:function getQueryJobState(e){return this.queryJobs[e];}},{key:"getSummaryRegionJobs",value:function getSummaryRegionJobs(e,t){var s=this,r=s._processFormat(t);new dr(s.url,{proxy:s.proxy,headers:s.headers,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJobs();}},{key:"getSummaryRegionJob",value:function getSummaryRegionJob(e,t,s){var r=this,i=r._processFormat(s);new dr(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryRegionJob(e);}},{key:"addSummaryRegionJob",value:function addSummaryRegionJob(e,t,s,r){var i=this,a=i._processFormat(r);new dr(i.url,{proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,headers:i.headers,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.summaryRegionJobs[e.id]=e.state;}},format:a}).addSummaryRegionJob(e,s);}},{key:"getSummaryRegionJobState",value:function getSummaryRegionJobState(e){return this.summaryRegionJobs[e];}},{key:"getVectorClipJobs",value:function getVectorClipJobs(e,t){var s=this,r=s._processFormat(t);new Nr(s.url,{proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,headers:s.headers,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getVectorClipJobs();}},{key:"getVectorClipJob",value:function getVectorClipJob(e,t,s){var r=this,i=r._processFormat(s);new Nr(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getVectorClipJob(e);}},{key:"addVectorClipJob",value:function addVectorClipJob(e,t,s,r){var i=this,a=i._processParams(e),n=i._processFormat(r);new Nr(i.url,{proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,headers:i.headers,serverType:i.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.vectorClipJobs[e.id]=e.state;}},format:n}).addVectorClipJob(a,s);}},{key:"getVectorClipJobState",value:function getVectorClipJobState(e){return this.vectorClipJobs[e];}},{key:"getOverlayGeoJobs",value:function getOverlayGeoJobs(e,t){var s=this,r=s._processFormat(t);new Ks(s.url,{proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,headers:s.headers,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJobs();}},{key:"getOverlayGeoJob",value:function getOverlayGeoJob(e,t,s){var r=this,i=r._processFormat(s);new Ks(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getOverlayGeoJob(e);}},{key:"addOverlayGeoJob",value:function addOverlayGeoJob(e,t,s,r){var i=this,a=i._processFormat(r);new Ks(i.url,{proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,headers:i.headers,serverType:i.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.overlayGeoJobs[e.id]=e.state;}},format:a}).addOverlayGeoJob(e,s);}},{key:"getoverlayGeoJobState",value:function getoverlayGeoJobState(e){return this.overlayGeoJobs[e];}},{key:"getBuffersJobs",value:function getBuffersJobs(e,t){var s=this,r=s._processFormat(t);new St(s.url,{proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,headers:s.headers,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getBuffersJobs();}},{key:"getBuffersJob",value:function getBuffersJob(e,t,s){var r=this,i=r._processFormat(s);new St(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getBuffersJob(e);}},{key:"addBuffersJob",value:function addBuffersJob(e,t,s,r){var i=this,a=i._processFormat(r);new St(i.url,{proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,headers:i.headers,serverType:i.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.buffersJobs[e.id]=e.state;}},format:a}).addBuffersJob(e,s);}},{key:"getBuffersJobState",value:function getBuffersJobState(e){return this.buffersJobs[e];}},{key:"getTopologyValidatorJobs",value:function getTopologyValidatorJobs(e,t){var s=this,r=s._processFormat(t);new xr(s.url,{proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,headers:s.headers,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJobs();}},{key:"getTopologyValidatorJob",value:function getTopologyValidatorJob(e,t,s){var r=this,i=r._processFormat(s);new xr(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getTopologyValidatorJob(e);}},{key:"addTopologyValidatorJob",value:function addTopologyValidatorJob(e,t,s,r){var i=this,a=i._processFormat(r);new xr(i.url,{proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,headers:i.headers,serverType:i.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.topologyValidatorJobs[e.id]=e.state;}},format:a}).addTopologyValidatorJob(e,s);}},{key:"getTopologyValidatorJobState",value:function getTopologyValidatorJobState(e){return this.topologyValidatorJobs[e];}},{key:"getSummaryAttributesJobs",value:function getSummaryAttributesJobs(e,t){var s=this,r=s._processFormat(t);new ur(s.url,{proxy:s.proxy,withCredentials:s.withCredentials,crossOrigin:s.crossOrigin,headers:s.headers,serverType:s.serverType,eventListeners:{scope:s,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJobs();}},{key:"getSummaryAttributesJob",value:function getSummaryAttributesJob(e,t,s){var r=this,i=r._processFormat(s);new ur(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryAttributesJob(e);}},{key:"addSummaryAttributesJob",value:function addSummaryAttributesJob(e,t,s,r){var i=this,a=i._processFormat(r);new ur(i.url,{proxy:i.proxy,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,headers:i.headers,serverType:i.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function processRunning(e){i.summaryAttributesJobs[e.id]=e.state;}},format:a}).addSummaryAttributesJob(e,s);}},{key:"getSummaryAttributesJobState",value:function getSummaryAttributesJobState(e){return this.summaryAttributesJobs[e];}},{key:"_processFormat",value:function _processFormat(e){return e||T.GEOJSON;}},{key:"_processParams",value:function _processParams(e){return e?(e.geometryQuery&&(e.geometryQuery=this._convertPatams(e.geometryQuery)),e.geometryClip&&(e.geometryClip=this._convertPatams(e.geometryClip)),e):{};}},{key:"_convertPatams",value:function _convertPatams(e){var t={};if(e.length<1)t="";else{for(var s=[],r=0;r<e.length;r++){var i={};i.x=e[r].x,i.y=e[r].y,s.push(i);}t.type="REGION",t.points=s;}return t;}}]);return Hi;}(it);Ce.REST.ProcessingService=Hi,/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
         * This program are made available under the terms of the Apache License, Version 2.0
         * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/s.d(t,"ElasticSearch",function(){return y;}),s.d(t,"SecurityManager",function(){return _;}),s.d(t,"KernelDensityJobParameter",function(){return de;}),s.d(t,"SingleObjectQueryJobsParameter",function(){return pe;}),s.d(t,"SummaryAttributesJobsParameter",function(){return me;}),s.d(t,"SummaryMeshJobParameter",function(){return fe;}),s.d(t,"SummaryRegionJobParameter",function(){return ye;}),s.d(t,"OverlayGeoJobParameter",function(){return ge;}),s.d(t,"BuffersAnalystJobsParameter",function(){return ve;}),s.d(t,"TopologyValidatorJobsParameter",function(){return Se;}),s.d(t,"OutputSetting",function(){return ue;}),s.d(t,"MappingParameters",function(){return ce;}),s.d(t,"GeoCodingParameter",function(){return be;}),s.d(t,"GeoDecodingParameter",function(){return xe;}),s.d(t,"MapVLayer",function(){return Gi;}),s.d(t,"MapVRenderer",function(){return Bi;}),s.d(t,"AddressMatchService",function(){return Ui;}),s.d(t,"ProcessingService",function(){return Hi;}),s.d(t,"SuperMap",function(){return Ce;});}]);